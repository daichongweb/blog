{"meta":{"title":"Daichong's Blog","subtitle":"æˆ´å´‡åšå®¢,æˆ´å´‡æŠ€æœ¯åšå®¢,phpæŠ€æœ¯åšå®¢,hexoåšå®¢,webæŠ€æœ¯åšå®¢","description":"æˆ´å´‡åšå®¢,æˆ´å´‡æŠ€æœ¯åšå®¢,phpæŠ€æœ¯åšå®¢,hexoåšå®¢,webæŠ€æœ¯åšå®¢","author":"Daichongweb","url":"http://www.daichongweb.com","root":"/"},"pages":[{"title":"about","date":"2019-02-16T09:44:10.000Z","updated":"2021-09-03T05:56:57.989Z","comments":true,"path":"about/index.html","permalink":"http://www.daichongweb.com/about/index.html","excerpt":"","text":"æˆ‘æ˜¯è°ï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘æ˜¯ä¸€ä¸ªç”¨å…¨æ ˆå½¢å®¹ä¸äº†çš„ç”·äººï¼ E-mail:daichongweb@foxmail.comï¼Œdaichongweb@gmain.com æŠ€æœ¯äº¤æµç¾¤ï¼Œæ¬¢è¿å¤§å®¶åŠ å…¥ï¼š"},{"title":"categories","date":"2019-06-23T06:23:08.000Z","updated":"2021-09-03T05:56:57.989Z","comments":true,"path":"categories/index.html","permalink":"http://www.daichongweb.com/categories/index.html","excerpt":"","text":""},{"title":"friends","date":"2021-09-03T05:56:57.990Z","updated":"2021-09-03T05:56:57.990Z","comments":true,"path":"friends/index.html","permalink":"http://www.daichongweb.com/friends/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-06-23T06:22:55.000Z","updated":"2021-09-03T05:56:58.004Z","comments":true,"path":"tags/index.html","permalink":"http://www.daichongweb.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"è§£å†³å¾®ä¿¡å°ç¨‹åºæˆæƒç¬¬ä¸€æ¬¡æ€»æ˜¯ä¼šå¤±è´¥çš„é—®é¢˜","slug":"è§£å†³å¾®ä¿¡å°ç¨‹åºæˆæƒç¬¬ä¸€æ¬¡æ€»æ˜¯ä¼šå¤±è´¥çš„é—®é¢˜","date":"2021-04-20T02:52:42.000Z","updated":"2021-09-03T05:56:57.987Z","comments":true,"path":"è§£å†³å¾®ä¿¡å°ç¨‹åºæˆæƒç¬¬ä¸€æ¬¡æ€»æ˜¯ä¼šå¤±è´¥çš„é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/è§£å†³å¾®ä¿¡å°ç¨‹åºæˆæƒç¬¬ä¸€æ¬¡æ€»æ˜¯ä¼šå¤±è´¥çš„é—®é¢˜/","excerpt":"ä»‹ç»&emsp;ç›¸ä¿¡æœ‰å¾ˆå¤šåŒå­¦éƒ½é‡åˆ°è¿‡å°ç¨‹åºéœ€è¦æˆæƒä¸¤æ¬¡çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯é”™è¯¯çš„æˆæƒæµç¨‹å¯¼è‡´çš„ã€‚ &emsp;(1)é”™è¯¯çš„æµç¨‹ï¼šå¼•å¯¼ç”¨æˆ·ç‚¹å‡»æˆæƒæŒ‰é’®(getUserProfile)=&gt;è°ƒèµ·æˆæƒ(wx.getUserProfile)=&gt;è·å–code(wx.login)=&gt;è¯·æ±‚åç«¯ã€ä¼ è¾“æ•°æ®ï¼ˆcodeã€ivç­‰ï¼‰=&gt;åç«¯è§£å¯†å¹¶ç™»é™†ã€‚ &emsp;(2)æ­£ç¡®çš„æµç¨‹ï¼šè·å–code(wx.show)=&gt;å¼•å¯¼ç”¨æˆ·ç‚¹å‡»æˆæƒæŒ‰é’®(getUserProfile)=&gt;è°ƒèµ·æˆæƒ(wx.getUserProfile)=&gt;è¯·æ±‚åç«¯ã€ä¼ è¾“æ•°æ®ï¼ˆcodeã€ivç­‰ï¼‰=&gt;åç«¯è§£å¯†å¹¶ç™»é™†ã€‚","text":"ä»‹ç»&emsp;ç›¸ä¿¡æœ‰å¾ˆå¤šåŒå­¦éƒ½é‡åˆ°è¿‡å°ç¨‹åºéœ€è¦æˆæƒä¸¤æ¬¡çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯é”™è¯¯çš„æˆæƒæµç¨‹å¯¼è‡´çš„ã€‚ &emsp;(1)é”™è¯¯çš„æµç¨‹ï¼šå¼•å¯¼ç”¨æˆ·ç‚¹å‡»æˆæƒæŒ‰é’®(getUserProfile)=&gt;è°ƒèµ·æˆæƒ(wx.getUserProfile)=&gt;è·å–code(wx.login)=&gt;è¯·æ±‚åç«¯ã€ä¼ è¾“æ•°æ®ï¼ˆcodeã€ivç­‰ï¼‰=&gt;åç«¯è§£å¯†å¹¶ç™»é™†ã€‚ &emsp;(2)æ­£ç¡®çš„æµç¨‹ï¼šè·å–code(wx.show)=&gt;å¼•å¯¼ç”¨æˆ·ç‚¹å‡»æˆæƒæŒ‰é’®(getUserProfile)=&gt;è°ƒèµ·æˆæƒ(wx.getUserProfile)=&gt;è¯·æ±‚åç«¯ã€ä¼ è¾“æ•°æ®ï¼ˆcodeã€ivç­‰ï¼‰=&gt;åç«¯è§£å¯†å¹¶ç™»é™†ã€‚ ä»£ç æ¼”ç¤º(1)é”™è¯¯çš„æµç¨‹123456789101112131415161718192021222324252627282930getUserProfile: function (e) &#123; let _this = this; // å¾®ä¿¡å°ç¨‹åºæˆæƒæ¡† wx.getUserProfile(&#123; desc: 'ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™', success: (userResult) =&gt; &#123; wx.login(&#123; success (loginResult) &#123; if (loginResult.code) &#123; //å‘èµ·ç½‘ç»œè¯·æ±‚,æ•°æ®è§£å¯† wx.request(&#123; url: 'https://test.com/onLogin', data: &#123; code: loginResult.code, iv: userResult.iv, encryptedData: userResult.encryptedData, rawData: userResult.rawData &#125;, success(res)&#123; // è§£å¯†æˆåŠŸï¼Œå¹¶ç™»é™† &#125; &#125;) &#125; else &#123; console.log('ç™»å½•å¤±è´¥ï¼' + res.errMsg) &#125; &#125; &#125;) &#125; &#125;)&#125; (2)æ­£ç¡®çš„æµç¨‹12345678910111213141516171819202122232425262728293031323334353637383940414243// è·å–codeonShow:function()&#123; wx.login(&#123; success: res =&gt; &#123; _this.setData(&#123; code: res.code &#125;) &#125; &#125;);&#125;// ç”¨æˆ·ç‚¹å‡»äº†æˆæƒæŒ‰é’®getUserProfile: function (e) &#123; let _this = this; // æ£€æµ‹æˆæƒæ˜¯å¦è¿‡æœŸ wx.checkSession(&#123; success(checkRes) &#123; // è°ƒèµ·æˆæƒçª—å£ wx.getUserProfile(&#123; lang: 'zh_CN', desc: 'ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™', success: (userResult) =&gt; &#123; //å‘èµ·ç½‘ç»œè¯·æ±‚,æ•°æ®è§£å¯† wx.request(&#123; url: 'https://test.com/onLogin', data: &#123; code: _this.data.code, iv: userResult.iv, encryptedData: userResult.encryptedData, rawData: userResult.rawData &#125;, success(res)&#123; //è§£å¯†æˆåŠŸï¼Œå¹¶ç™»é™† &#125; &#125;) &#125; &#125;) &#125;, fail() &#123; //è¿‡æœŸé‡æ–°è·å– _this.getCode(); &#125; &#125;) &#125;, æ³¨æ„&emsp;æ­£ç¡®çš„å†™æ³•åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å’Œæ‰«ç é¢„è§ˆéƒ½æ— æ³•è°ƒèµ·å¾®ä¿¡æˆæƒæ¡†ï¼Œä¸€å®šè¦åœ¨çœŸæœºè°ƒè¯•å’Œå‘å¸ƒä½“éªŒç‰ˆä¸­æµ‹è¯•ã€‚","categories":[],"tags":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡å°ç¨‹åº/"}]},{"title":"phpå¾®ä¿¡æ”¯ä»˜ApiV3ç‰ˆ-æ–°ç‰ˆå¾®ä¿¡æ”¯ä»˜å¼€å‘","slug":"phpå¾®ä¿¡æ”¯ä»˜ApiV3ç‰ˆ-æ–°ç‰ˆå¾®ä¿¡æ”¯ä»˜å¼€å‘","date":"2021-04-06T08:13:10.000Z","updated":"2021-09-03T05:56:57.956Z","comments":true,"path":"phpå¾®ä¿¡æ”¯ä»˜ApiV3ç‰ˆ-æ–°ç‰ˆå¾®ä¿¡æ”¯ä»˜å¼€å‘/","link":"","permalink":"http://www.daichongweb.com/phpå¾®ä¿¡æ”¯ä»˜ApiV3ç‰ˆ-æ–°ç‰ˆå¾®ä¿¡æ”¯ä»˜å¼€å‘/","excerpt":"å¾®ä¿¡æ”¯ä»˜æ–‡æ¡£ç»Ÿä¸€ä¸‹å•æ–‡æ¡£JsApi å‰æœŸå‡†å¤‡æµç¨‹ å¾®ä¿¡å…¬ä¼—å·ç”³è¯· æ”¯ä»˜å•†æˆ·å·ç”³è¯· å¾®ä¿¡å…¬ä¼—å·ç»‘å®šæ”¯ä»˜å•†æˆ·å·","text":"å¾®ä¿¡æ”¯ä»˜æ–‡æ¡£ç»Ÿä¸€ä¸‹å•æ–‡æ¡£JsApi å‰æœŸå‡†å¤‡æµç¨‹ å¾®ä¿¡å…¬ä¼—å·ç”³è¯· æ”¯ä»˜å•†æˆ·å·ç”³è¯· å¾®ä¿¡å…¬ä¼—å·ç»‘å®šæ”¯ä»˜å•†æˆ·å· 4.è®¾ç½®ç™½åå•ã€ç”ŸæˆAppSecretï¼ˆå¼€å‘-åŸºæœ¬é…ç½®ï¼‰ 5.ç”³è¯·Apiè¯ä¹¦ã€è®¾ç½®APIv3å¯†é’¥ 6.è®¾ç½®æ”¯ä»˜é…ç½®ã€jsapiæ”¯ä»˜æˆæƒç›®å½•ã€Nativeæ”¯ä»˜å›è°ƒé“¾æ¥ï¼ˆäº§å“ä¸­å¿ƒ-å¼€å‘é…ç½®ï¼‰ æ”¯ä»˜æµç¨‹ 1.å‰ç«¯è°ƒç”¨åç«¯ä¸‹å•æ¥å£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * åˆ›å»ºè®¢å• * @param &#123;*&#125; active * @param &#123;*&#125; mobile * @param &#123;*&#125; token */function createOrder(active, mobile, token) &#123; $.showLoading(); $.ajax(&#123; type: 'post', url: url, data: &#123; 'active': active, 'pay_type': 'wechat', 'mobile': mobile &#125;, dataType: 'json', beforeSend: function (XMLHttpRequest) &#123; XMLHttpRequest.setRequestHeader(\"token\", token); &#125;, success: function (res) &#123; try &#123; if (res.status == 'error' || res.code != 200) &#123; $.toptip(res.message, 'warning') return false; &#125; WeixinJSBridge.invoke('getBrandWCPayRequest', &#123; \"appId\": res.data.appId, \"timeStamp\": res.data.timeStamp, \"nonceStr\": res.data.nonceStr, \"package\": res.data.package, \"signType\": res.data.signType, \"paySign\": res.data.paySign &#125;, function (res) &#123; if (res.err_msg == \"get_brand_wcpay_request:ok\") &#123; $.toptip('æ”¯ä»˜æˆåŠŸ', 'success') &#125; &#125;); &#125; catch (err) &#123; toLogin(); &#125; &#125;, error: function (res) &#123; $.toptip('ç½‘ç»œé”™è¯¯', 'warning') &#125;, complete: function (res) &#123; $.hideLoading(); &#125; &#125;)&#125;&lt;a href=\"javascript:;\" class=\"weui-btn weui-btn_primary\" onclick=\"createOrder(1,mobile,token)\"&gt;ç«‹å³æ”¯ä»˜&lt;/a&gt; 2.å¤„ç†ä¿¡æ¯ã€ç”Ÿæˆè®¢å•ã€è¿”å›æ”¯ä»˜ä¿¡æ¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163/** * ç”Ÿæˆè®¢å• * @param $userId * @param $mobile * @param int $active * @param string $payType * @return array|mixed * @throws ApiException * @throws \\Throwable */ public function createOrder($userId, $mobile, $active = 1, $payType = 'wechat') &#123; DB::beginTransaction(); try &#123; if ($this-&gt;countWaitOrderByUserId($userId)) &#123; throw new ApiException('æ‚¨æœ‰æœªæ”¯ä»˜çš„è®¢å•ï¼Œè¯·å…ˆå¤„ç†å®Œæ¯•', 500); &#125; $activity = $this-&gt;findActive($active); if (!$activity) &#123; throw new ApiException('å……å€¼é‡‘é¢æœ‰è¯¯', 500); &#125; $orderId = StringHelper::getOrderId('R'); $orderData = [ 'order_id' =&gt; $orderId, 'user_id' =&gt; $userId, 'original_price' =&gt; $activity-&gt;original_price, 'price' =&gt; $activity-&gt;price, 'pay_type' =&gt; $payType, 'mobile' =&gt; $mobile, 'active' =&gt; $active ]; if (!$this-&gt;insertOrder($orderData)) &#123; throw new ApiException('è®¢å•åˆ›å»ºå¤±è´¥', 500); &#125; // è¯·æ±‚å¾®ä¿¡ç»Ÿä¸€ä¸‹å• if ($result = $this-&gt;payOrder($orderId, $userId)) &#123; DB::commit(); return $result; &#125; throw new ApiException('ç»Ÿä¸€ä¸‹å•å¤±è´¥', 500); &#125; catch (\\Exception $exception) &#123; DB::rollBack(); throw new ApiException($exception-&gt;getMessage(), 500); &#125; &#125; /** * å¾®ä¿¡ç»Ÿä¸€ä¸‹å• * @param $orderId * @param $userId * @return mixed * @throws ApiException * @throws GuzzleException */ public function payOrder($orderId, $userId) &#123; $orderInfo = $this-&gt;findOrderByOrderId($orderId); if (!$orderInfo || $orderInfo-&gt;user_id != $userId) &#123; throw new ApiException('è®¢å•ä¸å­˜åœ¨', 500); &#125; $userInfo = (new UserService())-&gt;findUserById($userId, ['openid']); if (!$userInfo) &#123; throw new ApiException('ç”¨æˆ·ä¸å­˜åœ¨', 500); &#125; if (!$userInfo-&gt;openid) &#123; throw new ApiException('è¯·å…ˆç»‘å®šå¾®ä¿¡', 500); &#125; $payParam = config('wechat.config'); //ç»Ÿä¸€ä¸‹å•å‚æ•° $payConfig = [ 'appid' =&gt; $payParam['appId'], 'mchid' =&gt; $payParam['mchId'], 'description' =&gt; $orderInfo['price'] . 'è¯è´¹å……å€¼-è¯è´¹æ…¢å……72å°æ—¶å†…åˆ°è´¦', 'out_trade_no' =&gt; $orderId, 'notify_url' =&gt; $payParam['notifyUrl'], 'amount' =&gt; [ 'total' =&gt; $orderInfo['price'], 'currency' =&gt; 'CNY' ], 'payer' =&gt; [ 'openid' =&gt; $userInfo['openid'] ] ]; // é‡ç‚¹ï¼Œå¾®ä¿¡apiv3å¿…é¡»åœ¨headersé‡Œè®¾ç½®å››ä¸ªå‚æ•° $client = new Client(); $httpClient = $client-&gt;post($payParam['payUrl'], [ 'headers' =&gt; [ 'Content-Type' =&gt; 'application/json', 'User-Agent' =&gt; 'Mozilla/4.0', 'Accept' =&gt; 'application/json', 'Authorization' =&gt; StringHelper::getAuth($payParam['payUrl'], json_encode($payConfig), 'POST') ], 'json' =&gt; $payConfig ]); $result = $httpClient-&gt;getBody() -&gt;getContents(); $payResult = json_decode($result, true); if ($httpClient-&gt;getStatusCode() != 200) &#123; throw new ApiException('æ”¯ä»˜é”™è¯¯', 500); &#125; if (isset($payResult['errcode'])) &#123; throw new ApiException($payResult['errmsg'], 500); &#125; if (isset($payResult['code'])) &#123; throw new ApiException($payResult['code'], 500); &#125; // è·å–æ”¯ä»˜å‚æ•° $appId = $payParam['appId']; $time = time(); $str = StringHelper::createNonce(); $prepayId = 'prepay_id=' . $payResult['prepay_id']; $message = $appId . \"\\n\" . $time . \"\\n\" . $str . \"\\n\" . $prepayId . \"\\n\"; return [ 'appId' =&gt; $payParam['appId'], 'timeStamp' =&gt; $time, 'nonceStr' =&gt; $str, 'package' =&gt; 'prepay_id=' . $payResult['prepay_id'], 'signType' =&gt; 'RSA', 'paySign' =&gt; StringHelper::getSign($message) ]; &#125; // ç”Ÿæˆå­—ç¬¦ä¸² public static function createNonce($length = 32) &#123; $chars = \"abcdefghijklmnopqrstuvwxyz0123456789\"; $str = \"\"; for ($i = 0; $i &lt; $length; $i++) &#123; $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); &#125; return $str; &#125; // ç”Ÿæˆauth public static function getAuth($url, $body, $type = 'POST') &#123; $config = Config::get('wechat.config'); $nonce = self::createNonce(); $timestamp = time(); $url_parts = parse_url($url); $canonical_url = ($url_parts['path'] . (!empty($url_parts['query']) ? \"?$&#123;url_parts['query']&#125;\" : \"\")); $message = $type . \"\\n\" . $canonical_url . \"\\n\" . $timestamp . \"\\n\" . $nonce . \"\\n\" . $body . \"\\n\"; $sign = self::getSign($message); $schema = 'WECHATPAY2-SHA256-RSA2048'; $token = sprintf('mchid=\"%s\",nonce_str=\"%s\",timestamp=\"%d\",serial_no=\"%s\",signature=\"%s\"', $config['mchId'], $nonce, $timestamp, $config['serialNo'], $sign); return $schema . ' ' . $token; &#125; // è·å–è¯ä¹¦ public static function getSign($message) &#123; $filePath = '../resources/cert/apiclient_key.pem'; openssl_sign($message, $raw_sign, openssl_get_privatekey(file_get_contents($filePath)), 'sha256WithRSAEncryption'); return base64_encode($raw_sign); &#125; å®Œæˆæ”¯ä»˜è¿™ç¯‡æ–‡ç« æ²¡æœ‰ä½¿ç”¨å¾®ä¿¡çš„sdkï¼Œæ‰€ä»¥ä»£ç é‡è¿˜æœ‰æœ‰ç‚¹å¤§çš„ï¼Œä¸è¿‡æ•´ä½“é€»è¾‘ç®€å•ã€‚","categories":[],"tags":[{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡æ”¯ä»˜/"}]},{"title":"JetBrains2020å…¨å®¶æ¡¶æ¿€æ´»","slug":"JetBrains2020å…¨å®¶æ¡¶æ¿€æ´»","date":"2020-08-19T02:28:42.000Z","updated":"2021-09-03T05:56:57.858Z","comments":true,"path":"JetBrains2020å…¨å®¶æ¡¶æ¿€æ´»/","link":"","permalink":"http://www.daichongweb.com/JetBrains2020å…¨å®¶æ¡¶æ¿€æ´»/","excerpt":"å®˜æ–¹ä¸‹è½½æœ€æ–°ç‰ˆJetBrainså®˜ç½‘ä¸‹è½½ äº²æµ‹å¯æ¿€æ´» 1.IntelliJ IDEA 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬2.PhpStorm 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬3.WebStorm 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬","text":"å®˜æ–¹ä¸‹è½½æœ€æ–°ç‰ˆJetBrainså®˜ç½‘ä¸‹è½½ äº²æµ‹å¯æ¿€æ´» 1.IntelliJ IDEA 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬2.PhpStorm 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬3.WebStorm 2020.2åŠä»¥ä¸‹ç‰ˆæœ¬ ä¸‹è½½è¡¥ä¸ä¸‹è½½è¡¥ä¸ å¦‚ä½•æ¿€æ´»&emsp;(1).è¿è¡ŒIDEï¼ˆæ–°å®‰è£…çš„é€‰æ‹©Evaluateï¼‰ &emsp;(2).éšä¾¿æ‰“å¼€æˆ–è€…åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼ŒæˆåŠŸåä¿æŒä¸åŠ¨ &emsp;(3).æŠŠè¡¥ä¸è§£å‹åçš„jetbrains-agent.jaræ‹–å…¥åˆ°IDEä¸­ï¼Œå¼¹æ¡†åç‚¹å‡»Restartã€‚ &emsp;(4).é‡å¯åä¼šå¼¹å‡ºã€JetbrainsAgent é…ç½®åŠ©æ‰‹ã€‘ï¼Œé€‰æ‹©Activation Codeï¼Œå¤åˆ¶ä¸‹é¢çš„å®‰è£…å‚æ•°ï¼Œç„¶åç‚¹å‡»ä¸ºXXXå®‰è£…å°±å¯ä»¥äº†ï¼ï¼ï¼ å®‰è£…å‚æ•°1LFq51qqupnaiTNn39w6zATiOTxZI2JYuRJEBlzmUDv4zeeNlXhMgJZVb0q5QkLr+CIUrSuNB7ucifrGXawLB4qswPOXYG7+ItDNUR/9UkLTUWlnHLX07hnR1USOrWIjTmbytcIKEdaI6x0RskyotuItj84xxoSBP/iRBW2EHpOc å¸¸è§é—®é¢˜&emsp;(1).å®‰è£…æˆåŠŸåè¿˜æ˜¯è·³è½¬åˆ°æ¿€æ´»é¡µé¢ï¼Œè¯·å°è¯•æ–­ç½‘åå†æ“ä½œã€‚&emsp;(2).æ–­ç½‘åè¿˜æ˜¯æ— æ³•ç ´è§£ï¼Œè¯·å°è¯•åˆ é™¤hostsè®¾ç½®çš„æ˜ å°„åå†æ“ä½œã€‚ è‡´è°¢ğŸ™&emsp;å¥½ç”¨çš„è¯å°±è¯·è¯„è®ºä¸€ä¸‹å†èµ°å§ï¼","categories":[],"tags":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/tags/å¼€å‘å·¥å…·/"}]},{"title":"fastjsonç±»å‹è½¬æ¢","slug":"fastjsonç±»å‹è½¬æ¢","date":"2020-05-25T03:15:32.000Z","updated":"2021-09-03T05:56:57.912Z","comments":true,"path":"fastjsonç±»å‹è½¬æ¢/","link":"","permalink":"http://www.daichongweb.com/fastjsonç±»å‹è½¬æ¢/","excerpt":"jsonStringè½¬map1JSON.parseObject(string) å®ä½“ç±»è½¬jsonstring1JSON.toJSONString(javaClass)","text":"jsonStringè½¬map1JSON.parseObject(string) å®ä½“ç±»è½¬jsonstring1JSON.toJSONString(javaClass) å­˜å…¥redisé˜Ÿåˆ—ä¹‹å‰æ˜¯jsonStringï¼Œæ‹¿å‡ºæ¥å˜æˆobjectå¤„ç†åŠæ³•1234// å…ˆè½¬å­—ç¬¦String value = lotteryData.index(roomId, userId).toString();// è½¬mapJSON.parseObject(value); å¦‚ä½•ç»„æˆä¸€ä¸ªå¤šç»´æ•°ç»„12345678910111213141516171819202122232425262728293031// ä¾‹å­&#123; \"data\": [ &#123; \"nickname\": \"æˆ´å´‡\", \"userId\": 6144, \"roomId\": 10086 &#125;, &#123; \"nickname\": \"æˆ´å´‡\", \"userId\": 2174, \"roomId\": 10086 &#125;, &#123; \"nickname\": \"æˆ´å´‡\", \"userId\": 9997, \"roomId\": 10086 &#125; ], \"code\": \"0\", \"msg\": \"æ“ä½œæˆåŠŸï¼\"&#125;// åšæ³•List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;&gt;();for (long userId : rands) &#123; if (userId == 0) &#123; continue; &#125; String value = lotteryData.index(roomId, userId).toString(); list.add(JSON.parseObject(value));&#125;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"http://www.daichongweb.com/tags/java/"}]},{"title":"macä¸‹ä½¿ç”¨homebrewå®‰è£…æŒ‡å®šç‰ˆæœ¬node","slug":"macä¸‹ä½¿ç”¨homebrewå®‰è£…æŒ‡å®šç‰ˆæœ¬node","date":"2020-05-10T11:21:41.000Z","updated":"2021-09-03T05:56:57.931Z","comments":true,"path":"macä¸‹ä½¿ç”¨homebrewå®‰è£…æŒ‡å®šç‰ˆæœ¬node/","link":"","permalink":"http://www.daichongweb.com/macä¸‹ä½¿ç”¨homebrewå®‰è£…æŒ‡å®šç‰ˆæœ¬node/","excerpt":"ä»‹ç»&emsp;macä¸‹çš„homebrewç›´æ¥ä½¿ç”¨brew install nodeå®‰è£…çš„nodeç‰ˆæœ¬æ˜¯14.+ï¼Œè¿™ç»™å¾ˆå¤šç¨‹åºå¸¦æ¥äº†é—®é¢˜ï¼Œå¦‚æœç›´æ¥å®‰è£…ä½ç‰ˆæœ¬çš„nodeä¼šé€ æˆâ€˜npmâ€™ç­‰æ— æ³•ä½¿ç”¨ã€‚ å¸è½½1brew remove node","text":"ä»‹ç»&emsp;macä¸‹çš„homebrewç›´æ¥ä½¿ç”¨brew install nodeå®‰è£…çš„nodeç‰ˆæœ¬æ˜¯14.+ï¼Œè¿™ç»™å¾ˆå¤šç¨‹åºå¸¦æ¥äº†é—®é¢˜ï¼Œå¦‚æœç›´æ¥å®‰è£…ä½ç‰ˆæœ¬çš„nodeä¼šé€ æˆâ€˜npmâ€™ç­‰æ— æ³•ä½¿ç”¨ã€‚ å¸è½½1brew remove node è§£ç»‘&emsp;å¸è½½ä¹‹åè¦å…ˆæŠŠä¹‹å‰nodeè§£é™¤è¿æ¥ã€‚1brew unlink node æŸ¥æ‰¾å¯ç”¨çš„nodeç‰ˆæœ¬1brew search node å®‰è£…1brew install node@10 æ·»åŠ ç¯å¢ƒå˜é‡12vi ~/.bash_profileexport PATH=\"/usr/local/opt/node@10/bin:$PATH\" &emsp;ç»è¿‡æ­¤æ­¥éª¤è¿˜æ˜¯æ— æ³•åœ¨ç»ˆç«¯ä½¿ç”¨â€˜node -vâ€™å°±å¢åŠ 12vi ~/.bash_profilealias node='/usr/local/opt/node@10/bin/node' &emsp;æ— æ³•ä½¿ç”¨npmç­‰æƒ…å†µæ‰§è¡Œ1brew link --overwrite --force node@10","categories":[],"tags":[{"name":"node","slug":"node","permalink":"http://www.daichongweb.com/tags/node/"}]},{"title":"phpç”Ÿæˆæµ·æŠ¥å›¾å‡ºç°å›¾ç‰‡æŸåçš„é—®é¢˜","slug":"phpç”Ÿæˆæµ·æŠ¥å›¾å‡ºç°å›¾ç‰‡æŸåçš„é—®é¢˜","date":"2020-05-10T08:52:30.000Z","updated":"2021-09-03T05:56:57.961Z","comments":true,"path":"phpç”Ÿæˆæµ·æŠ¥å›¾å‡ºç°å›¾ç‰‡æŸåçš„é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/phpç”Ÿæˆæµ·æŠ¥å›¾å‡ºç°å›¾ç‰‡æŸåçš„é—®é¢˜/","excerpt":"ç®€ä»‹&emsp;è¿‘å¹´å°ç¨‹åºã€å¾®ä¿¡å‘å±•è¿…é€Ÿã€‚å¾®ä¿¡ã€å¾®åšç—…æ¯’å¼ä¼ æ’­ä½¿ç”¨æˆ·ä»ä¼ ç»Ÿçš„APPä¸Šå‘å³æ‰«å³ç”¨ã€æ— éœ€å®‰è£…çš„å°ç¨‹åºä¸Šè½¬åŒ–ã€‚è€Œå¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºçš„è¿…é€Ÿå‘å±•ç¦»ä¸å¼€è½¬å‘ã€äºŒç»´ç åˆ†äº«ã€‚ &emsp;ä½†æ˜¯äºŒç»´ç å½¢å¼å•ä¸€ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ¯«æ— å¸å¼•åŠ›ã€‚çº¯ç²¹ä¾é â€˜å†å–ã€é‡‘é’±ã€ç¤¼ç‰©å¸å¼•â€™æ–¹å¼å·²ç»å˜å¾—æ„ˆæ¥æ„ˆæ— ä»·å€¼ã€‚ &emsp;å¯¹äºâ€™è§†è§‰åŠ¨ç‰©â€™å’Œå¤§éƒ¨åˆ†ç”¨æˆ·æ¥è¯´ï¼Œç²¾ç¾çš„å›¾ç‰‡åŠ ä¸ŠäºŒç»´ç çš„ç»„åˆæ›´å…·æœ‰å¸å¼•åŠ›ã€‚","text":"ç®€ä»‹&emsp;è¿‘å¹´å°ç¨‹åºã€å¾®ä¿¡å‘å±•è¿…é€Ÿã€‚å¾®ä¿¡ã€å¾®åšç—…æ¯’å¼ä¼ æ’­ä½¿ç”¨æˆ·ä»ä¼ ç»Ÿçš„APPä¸Šå‘å³æ‰«å³ç”¨ã€æ— éœ€å®‰è£…çš„å°ç¨‹åºä¸Šè½¬åŒ–ã€‚è€Œå¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºçš„è¿…é€Ÿå‘å±•ç¦»ä¸å¼€è½¬å‘ã€äºŒç»´ç åˆ†äº«ã€‚ &emsp;ä½†æ˜¯äºŒç»´ç å½¢å¼å•ä¸€ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ¯«æ— å¸å¼•åŠ›ã€‚çº¯ç²¹ä¾é â€˜å†å–ã€é‡‘é’±ã€ç¤¼ç‰©å¸å¼•â€™æ–¹å¼å·²ç»å˜å¾—æ„ˆæ¥æ„ˆæ— ä»·å€¼ã€‚ &emsp;å¯¹äºâ€™è§†è§‰åŠ¨ç‰©â€™å’Œå¤§éƒ¨åˆ†ç”¨æˆ·æ¥è¯´ï¼Œç²¾ç¾çš„å›¾ç‰‡åŠ ä¸ŠäºŒç»´ç çš„ç»„åˆæ›´å…·æœ‰å¸å¼•åŠ›ã€‚ phpç”Ÿæˆæµ·æŠ¥å›¾å‰ææ¡ä»¶ gdåº“æ‰©å±• ä¸Šä»£ç ç”Ÿæˆæ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546// ç”Ÿæˆæ–¹æ³•private function createPoster($data) &#123; $poster = new Poster(); //åˆ›å»ºç”»å¸ƒ $im = $poster-&gt;createTrueColor(672, 1060); //å­—ä½“æ–‡ä»¶ $font_file = $this-&gt;typeface; // å•†å“å›¾ç‰‡ $goodsImg = $poster-&gt;createImgBoard($im, $data['goodsPath'], 0, 0, 672, 668); //äºŒç»´ç  $codeImg = $poster-&gt;createImgBoard($im, $data['qrcode'], 410, 710, 225, 225); //headimg $headImg = $poster-&gt;createImgBoard($im, $data['headimg'], 46, 942, 65, 65); //btnimg $btnimg = $poster-&gt;createImgBoard($im, $data['btn'], 420, 960, 220, 48); // ä»·æ ¼ $price_font = ImageColorAllocate($im, 248, 6, 74); imagettftext($im, 25, 0, 41, 759, $price_font, $font_file, 'Â¥'); imagettftext($im, 38, 0, 60, 760, $price_font, $font_file, $data[\"price\"]); // å•†å“åç§° $goodsName = trim(mb_substr($data['title'], 0, 20)); $good_font = ImageColorAllocate($im, 1, 1, 1); imagettftext($im, 24, 0, 40, 820, $good_font, $font_file, $poster-&gt;AutoWrap(12, 0, $font_file, $goodsName, 160)); // æ˜µç§° $nickname = trim(mb_substr($data['nickname'], 0, 8)); $nick_font = ImageColorAllocate($im, 109, 114, 120); imagettftext($im, 16, 0, 130, 965, $nick_font, $font_file, $poster-&gt;AutoWrap(12, 0, $font_file, $nickname, 80)); imagettftext($im, 16, 0, 130, 1000, $nick_font, $font_file, $data['time']); ob_clean(); ob_end_clean(); // è¾“å‡ºå›¾ç‰‡ $poster-&gt;lookImg($im); //é‡Šæ”¾ç©ºé—´ imagedestroy($im); imagedestroy($btnimg); imagedestroy($goodsImg); imagedestroy($codeImg); imagedestroy($headImg); // åˆ é™¤æœ¬åœ°äºŒç»´ç  Qrcode::deleteCode($data['qrcode']); &#125; å®ç°ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137// å…·ä½“ç±»&lt;?phpnamespace app\\library;/** * ç”Ÿæˆæµ·æŠ¥å›¾ * @author daichongweb * @url daichongweb.cn,daichongweb.com */class Poster&#123; /** * ä»å›¾ç‰‡æ–‡ä»¶åˆ›å»ºImageèµ„æº * @param $file å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒurl * @return bool|resource æˆåŠŸè¿”å›å›¾ç‰‡imageèµ„æºï¼Œå¤±è´¥è¿”å›false */ public function createImageFromFile($file) &#123; if (preg_match('/http(s)?:\\/\\//', $file)) &#123; $fileSuffix = self::getNetworkImgType($file); &#125; else &#123; $file_info = getimagesize($file); $fileSuffix = $file_info[2]; // $fileSuffix = pathinfo($file, PATHINFO_EXTENSION); &#125; if (!$fileSuffix) return false; switch ($fileSuffix) &#123; /*case 'jpeg': $theImage = @imagecreatefromjpeg($file); break;*/ case '2': $theImage = imagecreatefromjpeg($file); break; case '3': $theImage = @imagecreatefrompng($file); break; case '1': $theImage = @imagecreatefromgif($file); break; default: $theImage = @imagecreatefromstring(file_get_contents($file)); break; &#125; return $theImage; &#125; // æ–‡å­—æ¢è¡Œ public function AutoWrap($fontsize, $angle, $fontface, $string, $width) &#123; $content = \"\"; for ($i = 0; $i &lt; mb_strlen($string); $i++) &#123; $letter[] = mb_substr($string, $i, 1); &#125; foreach ($letter as $l) &#123; $teststr = $content . \"\" . $l; $testbox = imagettfbbox($fontsize, $angle, $fontface, $teststr); if (($testbox[2] &gt; $width) &amp;&amp; ($content !== \"\")) &#123; $content .= \"\\n\"; &#125; $content .= $l; &#125; $content = mb_convert_encoding($content, \"html-entities\", \"utf-8\"); return $content; &#125; public function getNetworkImgType($url) &#123; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_NOBODY, 1); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3); curl_setopt($ch, CURLOPT_TIMEOUT, 3); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); curl_exec($ch); $http_code = curl_getinfo($ch); curl_close($ch); if ($http_code['http_code'] == 200) &#123; $theImgType = explode('/', $http_code['content_type']); if ($theImgType[0] == 'image') &#123; return $theImgType[1]; &#125; else &#123; return false; &#125; &#125; else &#123; return false; &#125; &#125; /** * åˆ›å»ºçœŸå½©ç”»å¸ƒ * @param int $width * @param int $height * @param int $r * @param int $g * @param int $b * @return false|resource */ public function createTrueColor(int $width, int $height, $r = 255, $g = 255, $b = 255) &#123; $im = imagecreatetruecolor($width, $height); $color = imagecolorallocate($im, $r, $g, $b); imagefill($im, 0, 0, $color); return $im; &#125; /** * åˆ›å»ºå›¾åƒç”»å¸ƒ * @param $im * @param $imgUrl * @param $dst_w * @param $dst_h * @return bool|resource */ public function createImgBoard($im, $imgUrl, $dst_x, $dst_y, $dst_w, $dst_h) &#123; list($width, $height) = getimagesize($imgUrl); $imgBoard = Poster::createImageFromFile($imgUrl); imagecopyresized($im, $imgBoard, $dst_x, $dst_y, 0, 0, $dst_w, $dst_h, $width, $height); return $imgBoard; &#125; /** * @param $im */ public function lookImg($im) &#123; header(\"Content-type:text/html;charset=utf-8\"); Header(\"Content-Type: image/jpeg\"); // jpeg ç”Ÿæˆä¼šæ›´å¿«ï¼Œpngç”Ÿæˆé€Ÿåº¦æ…¢ä½†æ˜¯é«˜æ¸… imagejpeg($im); &#125;&#125; ä½¿ç”¨æ–¹æ³•123456789101112131415161718192021222324// è·å–å¾®ä¿¡äºŒç»´ç $codePath = Qrcode::createQrcode([ 'scene' =&gt; $scene, 'page' =&gt; $path, 'width' =&gt; '112', 'auto_color' =&gt; false, 'line_color' =&gt; [ 'r' =&gt; 0, 'g' =&gt; 0, 'b' =&gt; 0 ]]);$data = [ 'bg' =&gt; $this-&gt;bg, 'goodsPath' =&gt; $goodsPath, 'title' =&gt; $goodsName, 'price' =&gt; $goodsPrice, 'btn' =&gt; $this-&gt;btn, 'time' =&gt; date('Y-m-d H:i'), 'qrcode' =&gt; $codePath, 'headimg' =&gt; $userInfo-&gt;headimgurl ? $userInfo-&gt;headimgurl : $this-&gt;defaultHeadImg, 'nickname' =&gt; $userInfo-&gt;nickname ? $userInfo-&gt;nickname : 'ç‰¹æŠ±æŠ±'];$this-&gt;createPoster($data); æ•ˆæœå›¾ &emsp;ä»ä¸Šé¢ä¸¤ä¸ªå›¾å¾ˆæ˜æ˜¾å¯ä»¥çœ‹å‡ºï¼Œç¬¬äºŒå¼ å›¾ä¸‹é¢è¢«åˆ‡æ‰äº†ï¼Œè€Œä¸”ç”µè„‘æ˜¯æ‰“ä¸å¼€çš„ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºob_clean();ob_end_clean();ä¸¤ä¸ªå‡½æ•°ã€‚ è§£å†³æ–¹æ³•123// æ¸…ç©ºç¼“å†²åŒºob_clean();ob_end_clean();","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜","slug":"å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜","date":"2020-05-10T06:57:38.000Z","updated":"2021-09-03T05:56:57.977Z","comments":true,"path":"å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜/","link":"","permalink":"http://www.daichongweb.com/å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜/","excerpt":"å°ç¨‹åºæ”¯ä»˜&emsp;ç°å¦‚ä»Šçš„å°ç¨‹åºæ„ˆå‘é‡è¦ï¼Œå¾®ä¿¡å°ç¨‹åºå¼€å‘ä¹Ÿæˆä¸ºå¼€å‘è€…å¿…é¡»æŒæ¡çš„é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ã€‚&emsp;ç»è¿‡å¤šå¹´çš„å‘å±•ï¼Œå°ç¨‹åºå¼€å‘æ›´æ–°æ¢ä»£éå¸¸å¿«ï¼Œåœ¨æœ€è¿‘çš„å¼€å‘ä¸­å‘ç°ä¹‹å‰å°ç¨‹åºæ”¯ä»˜çš„å†™æ³•å·²ç»å®Œå…¨ä¸é€‚ç”¨äº†ï¼Œå®³å¾—æˆ‘ç ”ç©¶äº†å¾ˆä¹…ï¼Œç‰¹å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ã€‚ å¼€å‘å‰æ&emsp;ï¼ˆ1ï¼‰å¼€é€šå¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ã€‚&emsp;ï¼ˆ2ï¼‰å¼€é€šå°ç¨‹åºã€‚&emsp;ï¼ˆ3ï¼‰å¾®ä¿¡æ”¯ä»˜å¹³å°è®¾ç½®ç‰¹çº¦å•†æˆ·APPID,ç»‘å®šå°ç¨‹åºAppidã€‚ï¼ˆè¿™é‡Œè¦æ³¨æ„ï¼Œå°ç¨‹åºå’Œæ”¯ä»˜å•†æˆ·å¿…é¡»æ˜¯åŒä¸€ä¸ªä¸»ä½“ï¼‰ã€‚&emsp;ï¼ˆ4ï¼‰å°ç¨‹åºç»‘å®šå¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ã€‚","text":"å°ç¨‹åºæ”¯ä»˜&emsp;ç°å¦‚ä»Šçš„å°ç¨‹åºæ„ˆå‘é‡è¦ï¼Œå¾®ä¿¡å°ç¨‹åºå¼€å‘ä¹Ÿæˆä¸ºå¼€å‘è€…å¿…é¡»æŒæ¡çš„é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ã€‚&emsp;ç»è¿‡å¤šå¹´çš„å‘å±•ï¼Œå°ç¨‹åºå¼€å‘æ›´æ–°æ¢ä»£éå¸¸å¿«ï¼Œåœ¨æœ€è¿‘çš„å¼€å‘ä¸­å‘ç°ä¹‹å‰å°ç¨‹åºæ”¯ä»˜çš„å†™æ³•å·²ç»å®Œå…¨ä¸é€‚ç”¨äº†ï¼Œå®³å¾—æˆ‘ç ”ç©¶äº†å¾ˆä¹…ï¼Œç‰¹å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ã€‚ å¼€å‘å‰æ&emsp;ï¼ˆ1ï¼‰å¼€é€šå¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ã€‚&emsp;ï¼ˆ2ï¼‰å¼€é€šå°ç¨‹åºã€‚&emsp;ï¼ˆ3ï¼‰å¾®ä¿¡æ”¯ä»˜å¹³å°è®¾ç½®ç‰¹çº¦å•†æˆ·APPID,ç»‘å®šå°ç¨‹åºAppidã€‚ï¼ˆè¿™é‡Œè¦æ³¨æ„ï¼Œå°ç¨‹åºå’Œæ”¯ä»˜å•†æˆ·å¿…é¡»æ˜¯åŒä¸€ä¸ªä¸»ä½“ï¼‰ã€‚&emsp;ï¼ˆ4ï¼‰å°ç¨‹åºç»‘å®šå¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ã€‚ å…·ä½“å·®åˆ«&emsp;å¯ä»¥ä»å¾ˆä¹…ä¹‹å‰çš„æ–‡ç« çœ‹å‡ºï¼Œç°åœ¨çš„å°ç¨‹åºæ”¯ä»˜å¤šäº†ä¸€ä¸ªäºŒæ¬¡ç­¾åçš„æ­¥éª¤ï¼Œè¿™ç‚¹éœ€è¦å¤§å®¶æ³¨æ„ã€‚&emsp;å…¶ä»–çš„æ­¥éª¤å€’æ˜¯æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œå…·ä½“å¯ å®˜æ–¹æ–‡æ¡£ã€‚ ä¸Šä»£ç ï¼ˆåºŸè¯ä¸å¤šè¯´ï¼Œyii2å†™æ³•ï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public function actionIndex()&#123; try &#123; $user_id = FsRequest::userId('true'); if (!$user_id) &#123; throw new Exception('è¯·å…ˆç™»å½•', [], 201); &#125; $data = \\Yii::$app-&gt;request-&gt;post(); if (empty($data)) &#123; throw new Exception('å‚æ•°ä¸å…¨', [], 201); &#125; $openId = WeixinUser::find()-&gt;where(['ecuid' =&gt; $user_id])-&gt;select(['dingdang_mini'])-&gt;one(); if (!$openId) &#123; throw new Exception('æœªç»‘å®šå°ç¨‹åº', [], 201); &#125; $payParams = [ 'appid' =&gt; $appid, 'mch_id' =&gt; $mch_id, 'nonce_str' =&gt; WxHelper::createNoncestr(32), 'sign' =&gt; '', 'body' =&gt; $data['body'], 'out_trade_no' =&gt; $data['orderId'], 'total_fee' =&gt; (int)($data['price'] * 100), 'openid' =&gt; $openId-&gt;dingdang_mini, 'spbill_create_ip' =&gt; $_SERVER['REMOTE_ADDR'], 'notify_url' =&gt; 'æ”¯ä»˜å›è°ƒ', 'trade_type' =&gt; 'JSAPI', ]; $payParams['sign'] = WxHelper::paySign($payParams, $key); $xml = WxHelper::arrayToXml($payParams); // die($xml); $payUrl = 'https://api.mch.weixin.qq.com/pay/unifiedorder'; $curl = new Curl(); $curl-&gt;setHeader('Content-Type', 'text/xml; charset=utf-8'); // xml $curl-&gt;post($payUrl, $xml); // è¯·æ±‚å¤±è´¥ if ($curl-&gt;error) &#123; throw new Exception($curl-&gt;errorMessage, [], 201); &#125; else &#123; // å¾®ä¿¡è¿”å›é”™è¯¯ $result = WxHelper::xmlToArray($curl-&gt;response); if ($result['result_code'] == 'FAIL') &#123; throw new Exception($result['err_code_des'], [], 201); &#125; // äºŒæ¬¡ç­¾å $payParamsResult = [ 'appId' =&gt; $this-&gt;appid, 'nonceStr' =&gt; WxHelper::createNoncestr(32), 'package' =&gt; 'prepay_id=' . $result['prepay_id'], 'paySign' =&gt; '', 'signType' =&gt; 'MD5', 'timeStamp' =&gt; (string)time() ]; $payParamsResult['paySign'] = WxHelper::paySign($payParamsResult, $this-&gt;key); FsResponse::jsonSuccess($payParamsResult); &#125; &#125; catch (Exception $e) &#123; return FsResponse::jsonFaild($e-&gt;getCode(), $e-&gt;getMessage()); &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394&lt;?php// å…·ä½“æ–¹æ³•namespace app\\library\\wechat;use \\Curl\\Curl;use app\\models\\redis\\WxAccessToken;use yii\\db\\Exception;/** * Class WxHelper * @package app\\library */class WxHelper&#123; // è·å–å°ç¨‹åºAccessToken public static function getToken() &#123; $token = WxAccessToken::get(); if (!$token) &#123; $url = 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=' . $appId . '&amp;secret=' . $secret; $curl = new Curl(); $curl-&gt;get($url); if ($curl-&gt;error) &#123; WxAccessToken::delete(); throw new Exception($curl-&gt;errorMessage, [],210); &#125; if (isset($curl-&gt;response-&gt;errcode)) &#123; WxAccessToken::delete(); throw new Exception($curl-&gt;response-&gt;errmsg,[],210); &#125; $token = $curl-&gt;response-&gt;access_token; $time = $curl-&gt;response-&gt;expires_in; WxAccessToken::set($token, $time - 100); &#125; return $token; &#125; public static function xmlToArray($xml) &#123; //ç¦æ­¢å¼•ç”¨å¤–éƒ¨xmlå®ä½“ libxml_disable_entity_loader(true); $values = json_decode(json_encode(simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_NOCDATA)), true); return $values; &#125; public static function paySign($payParams, $key) &#123; ksort($payParams); $signString = self::toUrlParams($payParams); $signString .= '&amp;key=' . $key; $signString = strtoupper(md5($signString)); return $signString; &#125; #ç”Ÿæˆéšæœºå­—ç¬¦ä¸² public static function createNoncestr($length = 7) &#123; $chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789\"; $str = \"\"; for ($i = 0; $i &lt; $length; $i++) &#123; $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); &#125; return $str; &#125; public static function toUrlParams($payParams) &#123; $buff = \"\"; foreach ($payParams as $k =&gt; $v) &#123; if ($k != \"sign\" &amp;&amp; $v != \"\" &amp;&amp; !is_array($v)) &#123; $buff .= $k . \"=\" . $v . \"&amp;\"; &#125; &#125; $buff = trim($buff, \"&amp;\"); return $buff; &#125; public static function arrayToXml($array) &#123; $xml = \"&lt;xml&gt;\"; foreach ($array as $key =&gt; $val) &#123; if (is_numeric($val)) &#123; $xml .= \"&lt;\" . $key . \"&gt;\" . $val . \"&lt;/\" . $key . \"&gt;\"; &#125; else &#123; $xml .= \"&lt;\" . $key . \"&gt;&lt;![CDATA[\" . $val . \"]]&gt;&lt;/\" . $key . \"&gt;\"; &#125; &#125; $xml .= \"&lt;/xml&gt;\"; return $xml; &#125;&#125; æ€»ç»“&emsp;å¾®ä¿¡æ”¯ä»˜æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯æ–‡æ¡£å†™çš„ä¸æ¸…æ™°å¯¼è‡´å¼€å‘éš¾åº¦å¢åŠ ã€‚","categories":[],"tags":[{"name":"å°ç¨‹åºæ”¯ä»˜","slug":"å°ç¨‹åºæ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å°ç¨‹åºæ”¯ä»˜/"}]},{"title":"phpOffice/phpSpreadsheetå¯¼å‡ºexcel","slug":"phpOffice-phpSpreadsheetå¯¼å‡ºexcel","date":"2020-04-10T01:46:38.000Z","updated":"2021-09-03T05:56:57.944Z","comments":true,"path":"phpOffice-phpSpreadsheetå¯¼å‡ºexcel/","link":"","permalink":"http://www.daichongweb.com/phpOffice-phpSpreadsheetå¯¼å‡ºexcel/","excerpt":"åˆè¯†phpSpreadsheet&emsp;PHPSpreadsheetæ˜¯ç”±è€å¤–ä½¿ç”¨çº¯PHPç¼–å†™çš„Excelæ–‡ä»¶å¤„ç†æ‰©å±•ï¼Œä»–ä½¿ç”¨çš„æ˜¯æœ€æ–°å†™æ³•ï¼Œç›¸æ¯”PHPExcel(å·²ä¸å†ç»´æŠ¤)æ€§èƒ½æå‡å·¨å¤§ï¼Œä½¿ç”¨æ–¹æ³•å’Œå‡½æ•°åŸºæœ¬ç›¸åŒï¼Œå¯ä»¥å®Œå…¨çš„æ›¿ä»£PHPExcelã€‚ä½¿ç”¨PhpSpreadsheetå¯ä»¥è½»æ¾è¯»å–å’Œå†™å…¥Excelæ–‡æ¡£ï¼Œæ”¯æŒExcelçš„æ‰€æœ‰æ“ä½œã€‚ è½¯ä»¶ä¾èµ– PHP5.6æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ¨èPHP7 php_zipæ‰©å±• php_gd2æ‰©å±•","text":"åˆè¯†phpSpreadsheet&emsp;PHPSpreadsheetæ˜¯ç”±è€å¤–ä½¿ç”¨çº¯PHPç¼–å†™çš„Excelæ–‡ä»¶å¤„ç†æ‰©å±•ï¼Œä»–ä½¿ç”¨çš„æ˜¯æœ€æ–°å†™æ³•ï¼Œç›¸æ¯”PHPExcel(å·²ä¸å†ç»´æŠ¤)æ€§èƒ½æå‡å·¨å¤§ï¼Œä½¿ç”¨æ–¹æ³•å’Œå‡½æ•°åŸºæœ¬ç›¸åŒï¼Œå¯ä»¥å®Œå…¨çš„æ›¿ä»£PHPExcelã€‚ä½¿ç”¨PhpSpreadsheetå¯ä»¥è½»æ¾è¯»å–å’Œå†™å…¥Excelæ–‡æ¡£ï¼Œæ”¯æŒExcelçš„æ‰€æœ‰æ“ä½œã€‚ è½¯ä»¶ä¾èµ– PHP5.6æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ¨èPHP7 php_zipæ‰©å±• php_gd2æ‰©å±• PHPSpreadsheet ç‰¹æ€§ æ”¯æŒå¯¼å…¥å’Œå¯¼å‡º.xlsï¼Œ.xlsxï¼Œ.htmlï¼Œ.csvï¼Œ.pdfç­‰æ ¼å¼æ–‡ä»¶ã€‚ æä¾›ä¸°å¯Œçš„APIï¼Œæä¾›å•å…ƒæ ¼æ ·å¼è®¾ç½®ã€Excelè¡¨æ ¼å±æ€§è®¾ç½®ã€å›¾è¡¨è®¾ç½®ç­‰ç­‰è¯¸å¤šåŠŸèƒ½ã€‚ä½¿ç”¨PhpSpreadsheetå®Œå…¨å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¤–è§‚ç»“æ„éƒ½æ»¡è¶³ä½ çš„Excelè¡¨æ ¼æ–‡ä»¶ã€‚ å“è¶Šçš„æ€§èƒ½ï¼Œå°¤å…¶åœ¨PHP7ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œæ¯”PHPExcelå¼ºå¤§å¾ˆå¤šã€‚ å®‰è£…1composer require phpoffice/phpspreadsheet å®æˆ˜&emsp;ä¸‹é¢å’±ä»¬æ¥åšä¸€ä¸ªé€šç”¨çš„å¯¼å‡ºExcelè¡¨æ ¼ç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152&lt;?phpnamespace app\\common\\library;use app\\common\\exception\\BusiException;use PhpOffice\\PhpSpreadsheet\\IOFactory;use PhpOffice\\PhpSpreadsheet\\Spreadsheet;/** * å¯¼å‡ºexcel class * @author daichongweb */class Export&#123; // è¡¨æ ¼åæ ‡ private $cellIndex = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'AA', 'AB', 'AC', 'AD', 'AE', 'AF', 'AG', 'AH', 'AI', 'AJ', 'AK', 'AL', 'AM', 'AN', 'AO', 'AP', 'AQ', 'AR', 'AS', 'AT', 'AU', 'AV', 'AW', 'AX', 'AY', 'AZ']; // é»˜è®¤é…ç½® public $config = [ 'bold' =&gt; true, // åŠ ç²— 'size' =&gt; 12, // æ–‡å­—å¤§å° 'column' =&gt; 4, // è®¾ç½®åˆ—æ•° 'title' =&gt; 'é»˜è®¤å¯¼å‡º', // è¡¨æ ¼æ ‡é¢˜ 'name' =&gt; 'ç‰¹æŠ±æŠ±', // æ–‡ä»¶å 'type' =&gt; 'Xls', // å¯¼å‡ºæ ¼å¼ ]; // é»˜è®¤è¡¨å¤´ public $tableHeader = [ 'php', 'vue', 'java', 'go', ]; // é»˜è®¤æ•°æ® public $tableDefaultData = [ [ 'å¤©ä¸‹ç¬¬ä¸€', 'Vueç‰›é€¼', 'javaç‰›é€¼', 'goç‰›é€¼', ], ]; /** * @param array $tableHeader è¡¨å¤´ * @param array $tableDefaultData éœ€è¦å¯¼å‡ºæ•°æ® */ public function __construct($tableHeader, $tableDefaultData) &#123; if (empty($tableHeader)) &#123; throw new BusiException('export error', 'è¯·è®¾ç½®è¡¨å¤´'); &#125; if (empty($tableDefaultData)) &#123; throw new BusiException('export error', 'è¯·è®¾ç½®å¯¼å‡ºæ•°æ®'); &#125; $this-&gt;tableHeader = $tableHeader; $this-&gt;config['column'] = count($tableHeader); $this-&gt;tableDefaultData = $tableDefaultData; &#125; /** * åˆ›å»ºè¡¨æ ¼ createTable */ public function createTable() &#123; $spreadsheet = new Spreadsheet(); $worksheet = $spreadsheet-&gt;getActiveSheet(); //å±…ä¸­ $styleArray = [ 'alignment' =&gt; [ 'horizontal' =&gt; \\PhpOffice\\PhpSpreadsheet\\Style\\Alignment::HORIZONTAL_CENTER, ], ]; // è®¾ç½®åŸºæœ¬å±æ€§ $worksheet-&gt;setTitle($this-&gt;config['title']); $worksheet-&gt;getStyle($this-&gt;getColumn())-&gt;applyFromArray($styleArray) -&gt;getFont() -&gt;setBold($this-&gt;config['bold']) -&gt;setName('Verdana') -&gt;setSize($this-&gt;config['size']); foreach ($this-&gt;tableHeader as $index =&gt; $name) &#123; $worksheet-&gt;setCellValue($this-&gt;cellIndex[$index] . '1', $name); &#125; $baseRow = 2; foreach ($this-&gt;tableDefaultData as $index =&gt; $data) &#123; $i = $index + $baseRow; for ($k = 0; $k &lt;= $this-&gt;config['column'] - 1; $k++) &#123; $item = $data[$k]; $worksheet-&gt;setCellValue($this-&gt;cellIndex[$k] . $i, ' ' . $item); // ä¸­æ–‡è®¾ç½®è¡¨æ ¼å®½åº¦ if (preg_match(\"/[\\x7f-\\xff]/\", $data[$k])) &#123; $worksheet-&gt;getColumnDimension($this-&gt;cellIndex[$k])-&gt;setWidth(strlen($item)); &#125; else &#123; // éä¸­æ–‡è‡ªåŠ¨è®¾ç½®å®½åº¦ $worksheet-&gt;getColumnDimension($this-&gt;cellIndex[$k])-&gt;setAutoSize(true); &#125; &#125; &#125; $worksheet-&gt;calculateColumnWidths(); self::downloadExcel($spreadsheet, $this-&gt;config['name'], 'Xls'); &#125; /** * æ–‡ä»¶ä¸‹è½½ downloadExcel * * @param data $spreadsheet * @param string $filename * @param string $format * @return void */ private function downloadExcel($spreadsheet, $filename, $format) &#123; // $formatåªèƒ½ä¸º Xlsx æˆ– Xls if ($format == 'Xlsx') &#123; header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'); &#125; elseif ($format == 'Xls') &#123; header('Content-Type: application/vnd.ms-excel'); &#125; header(\"Content-Disposition: attachment;filename=\" . urlencode($filename) . '.' . strtolower($format)); //. date('Y-m-d') header('Cache-Control: max-age=0'); $objWriter = IOFactory::createWriter($spreadsheet, $format); $objWriter-&gt;save('php://output'); exit; &#125; private function getColumn($row = 1) &#123; $index = $this-&gt;cellIndex[$this-&gt;config['column']]; return 'A' . $row . ':' . $index . $row; &#125; private function autoFitColumnWidthToContent($sheet, $fromCol, $toCol) &#123; if (empty($toCol)) &#123; //not defined the last column, set it the max one $toCol = $sheet-&gt;getColumnDimension($sheet-&gt;getHighestColumn())-&gt;getColumnIndex(); &#125; for ($i = $fromCol; $i &lt;= $toCol; $i++) &#123; $sheet-&gt;getColumnDimension($i)-&gt;setAutoSize(true); &#125; $sheet-&gt;calculateColumnWidths(); &#125;&#125; ä½¿ç”¨æ–¹æ³•1234567891011121314151617&lt;?phpuse helper\\Export;...// è®¾ç½®è¡¨å¤´$export = new Export( [ 'æµ‹è¯•æ ‡é¢˜', 'æµ‹è¯•æ ‡é¢˜2', 'æ—¶é—´', ], [ ['11111111111111', 'æµ‹è¯•æ•°æ®2', '2020-04-30'], ['æµ‹è¯•æ•°æ®1-1', 'æµ‹è¯•æ•°æ®2-2', '2020-04-30'], ]);echo $export-&gt;createTable();exit; æ•ˆæœ","categories":[],"tags":[{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/tags/phpæ‰©å±•ç±»/"}]},{"title":"nginxè´Ÿè½½å‡è¡¡çš„å®ç°","slug":"nginxè´Ÿè½½å‡è¡¡çš„å®ç°","date":"2020-03-25T07:50:50.000Z","updated":"2021-09-03T05:56:57.934Z","comments":true,"path":"nginxè´Ÿè½½å‡è¡¡çš„å®ç°/","link":"","permalink":"http://www.daichongweb.com/nginxè´Ÿè½½å‡è¡¡çš„å®ç°/","excerpt":"è´Ÿè½½å‡è¡¡æ˜¯ä»€ä¹ˆï¼Ÿ&emsp;è´Ÿè½½å‡è¡¡å»ºç«‹åœ¨ç°æœ‰ç½‘ç»œç»“æ„ä¹‹ä¸Šï¼Œå®ƒæä¾›äº†ä¸€ç§å»‰ä»·æœ‰æ•ˆé€æ˜çš„æ–¹æ³•æ‰©å±•ç½‘ç»œè®¾å¤‡å’ŒæœåŠ¡å™¨çš„å¸¦å®½ã€å¢åŠ ååé‡ã€åŠ å¼ºç½‘ç»œæ•°æ®å¤„ç†èƒ½åŠ›ã€æé«˜ç½‘ç»œçš„çµæ´»æ€§å’Œå¯ç”¨æ€§ã€‚ &emsp;è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰å…¶æ„æ€å°±æ˜¯åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä¾‹å¦‚WebæœåŠ¡å™¨ã€FTPæœåŠ¡å™¨ã€ä¼ä¸šå…³é”®åº”ç”¨æœåŠ¡å™¨å’Œå…¶å®ƒå…³é”®ä»»åŠ¡æœåŠ¡å™¨ç­‰ï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚ ä¸ºä»€ä¹ˆè¦åšè´Ÿè½½å‡è¡¡ æœåŠ¡å™¨æ€»æ˜¯å´©æºƒæ€ä¹ˆåŠï¼Ÿ ä¸€å°æœåŠ¡å™¨æ‰›ä¸ä½å¤§é‡çš„å¹¶å‘æ€ä¹ˆåŠï¼Ÿ â€¦â€¦ &nbsp;æœ‰äº†è¿™äº›é—®é¢˜ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šä¼šç”¨å¾—åˆ°è¿™ä¸ªæŠ€æœ¯ã€‚æœ€è®©äººé«˜å…´çš„ä¸€ç‚¹æ˜¯ï¼šåªéœ€è¦ä½ æ‡‚ç‚¹nginxçš„é…ç½®å°±èƒ½å®Œç¾çš„é©¾é©­è´Ÿè½½å‡è¡¡çš„é…ç½®ï¼Œè‡³äºé…ç½®ä¹‹åå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå†æ…¢æ…¢å»ç ”ç©¶ä¹Ÿä¸è¿Ÿã€‚","text":"è´Ÿè½½å‡è¡¡æ˜¯ä»€ä¹ˆï¼Ÿ&emsp;è´Ÿè½½å‡è¡¡å»ºç«‹åœ¨ç°æœ‰ç½‘ç»œç»“æ„ä¹‹ä¸Šï¼Œå®ƒæä¾›äº†ä¸€ç§å»‰ä»·æœ‰æ•ˆé€æ˜çš„æ–¹æ³•æ‰©å±•ç½‘ç»œè®¾å¤‡å’ŒæœåŠ¡å™¨çš„å¸¦å®½ã€å¢åŠ ååé‡ã€åŠ å¼ºç½‘ç»œæ•°æ®å¤„ç†èƒ½åŠ›ã€æé«˜ç½‘ç»œçš„çµæ´»æ€§å’Œå¯ç”¨æ€§ã€‚ &emsp;è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰å…¶æ„æ€å°±æ˜¯åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä¾‹å¦‚WebæœåŠ¡å™¨ã€FTPæœåŠ¡å™¨ã€ä¼ä¸šå…³é”®åº”ç”¨æœåŠ¡å™¨å’Œå…¶å®ƒå…³é”®ä»»åŠ¡æœåŠ¡å™¨ç­‰ï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚ ä¸ºä»€ä¹ˆè¦åšè´Ÿè½½å‡è¡¡ æœåŠ¡å™¨æ€»æ˜¯å´©æºƒæ€ä¹ˆåŠï¼Ÿ ä¸€å°æœåŠ¡å™¨æ‰›ä¸ä½å¤§é‡çš„å¹¶å‘æ€ä¹ˆåŠï¼Ÿ â€¦â€¦ &nbsp;æœ‰äº†è¿™äº›é—®é¢˜ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šä¼šç”¨å¾—åˆ°è¿™ä¸ªæŠ€æœ¯ã€‚æœ€è®©äººé«˜å…´çš„ä¸€ç‚¹æ˜¯ï¼šåªéœ€è¦ä½ æ‡‚ç‚¹nginxçš„é…ç½®å°±èƒ½å®Œç¾çš„é©¾é©­è´Ÿè½½å‡è¡¡çš„é…ç½®ï¼Œè‡³äºé…ç½®ä¹‹åå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå†æ…¢æ…¢å»ç ”ç©¶ä¹Ÿä¸è¿Ÿã€‚ æ¶æ„å›¾ &emsp;ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åˆ©ç”¨è´Ÿè½½å‡è¡¡å¯ä»¥å¾ˆå¥½çš„åº”å¯¹å¹¶å‘è¯·æ±‚è¿‡é«˜çš„æƒ…å†µï¼Œä½¿æ¯ä¸€å°æœåŠ¡å™¨å‘æŒ¥æœ€å¤§çš„æ•ˆç”¨ã€‚ è´Ÿè½½å‡è¡¡çš„å®ç°æ–¹å¼ è½®è¯¢(rr) ï¼šæŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨(é»˜è®¤); æƒé‡(weight)ï¼šåŠ æƒè½®è¯¢(wrr)ã€‚weightå€¼è¶Šå¤§ï¼Œåˆ†é…åˆ°çš„è®¿é—®ç‡è¶Šé«˜; æºIPåœ°å€hashè°ƒåº¦æ–¹æ³•(ip_hash):å°†æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®IPçš„hashå€¼æ¥åˆ†é…ï¼Œæ¥è‡ªåŒä¸€ä¸ªIPå›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨; æœ€å°‘è¿æ¥æ•°(least_conn)ï¼šå½“serveræ‹¥æœ‰ä¸åŒçš„æƒé‡æ—¶ä¸ºwlcï¼Œå½“æ‰€æœ‰åç«¯ä¸»æœºï¼›è¿æ¥æ•°ç›¸åŒæ—¶ï¼Œåˆ™ä½¿ç”¨wrrï¼Œé€‚ç”¨äºé•¿è¿æ¥(keepalive_timeoutä¸ä¸º0); å®æˆ˜é…ç½®&emsp;å‡†å¤‡ä¸‰å°æœåŠ¡å™¨ï¼šï¼ˆ1ï¼‰192.168.133.128ï¼ˆè°ƒåº¦å™¨ï¼‰ï¼ˆ2ï¼‰192.168.133.129ï¼ˆæœåŠ¡å™¨1ï¼‰ï¼ˆ3ï¼‰192.168.133.130ï¼ˆæœåŠ¡å™¨2ï¼‰&emsp;åœ¨è°ƒåº¦æœåŠ¡å™¨ä¸­é…ç½®ï¼š123456789101112131415161718192021upstream 192.168.133.128&#123; server 192.168.133.129:80 weight=1; server 192.168.133.130:80 weight=1;&#125;server &#123; listen 80; server_name localhost; #charset koi8-r; #access_log /var/log/nginx/host.access.log main; client_max_body_size 50m; client_body_buffer_size 256k; location / &#123; proxy_pass http://192.168.133.128; proxy_set_header X-Forwarded-For $remote_addr; proxy_set_header Host $host; &#125; &emsp;å…¶ä»–æœåŠ¡å™¨server_nameéƒ½é…ç½®æˆè‡ªå·±çš„IPå°±è¡Œã€‚åœ¨å„è‡ªçš„æœåŠ¡Htmlé‡Œå‘½åï¼ŒåŠ ä»¥åŒºåˆ†ã€‚ æµ‹è¯•","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"http://www.daichongweb.com/tags/nginx/"}]},{"title":"ç”¨æœ€å°‘çš„Sqlå®ç°ä¸€ä¸ªç‰¹æ®Šæ’è¡Œæ¦œ","slug":"ç”¨æœ€å°‘çš„Sqlå®ç°ä¸€ä¸ªç‰¹æ®Šæ’è¡Œæ¦œ","date":"2020-01-21T00:24:28.000Z","updated":"2021-09-03T05:56:57.986Z","comments":true,"path":"ç”¨æœ€å°‘çš„Sqlå®ç°ä¸€ä¸ªç‰¹æ®Šæ’è¡Œæ¦œ/","link":"","permalink":"http://www.daichongweb.com/ç”¨æœ€å°‘çš„Sqlå®ç°ä¸€ä¸ªç‰¹æ®Šæ’è¡Œæ¦œ/","excerpt":"å¼•è¨€&emsp;è¯´èµ·æ’è¡Œæ¦œä¸Šä¸€ç¯‡å·²ç»ä»‹ç»è¿‡äº†ç”¨Rediså®ç°çš„æ–¹æ³•ï¼Œè€Œè¿™ç¯‡å®Œå…¨æ˜¯ç”¨Sqlæ¥å®ç°ï¼Œä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜ã€‚ éœ€æ±‚åŠŸèƒ½ï¼ˆ1ï¼‰&emsp;ç°æœ‰åä¸ªåŒå­¦ï¼Œå¹´é¾„åˆ†å¸ƒå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡è®¾ä½ æ˜¯æˆ´ä¸ƒï¼Œè¯·æ ¹æ®å¹´é¾„è·å¾—ä½ åœ¨è¿™åäººä¸­æ’ç¬¬å‡ ï¼ŸåŒæ—¶è¯·è·å¾—ä½ çš„å‰ä¸€åå’Œåä¸€åå„æ˜¯å“ªä¸€ä½åŒå­¦ï¼Ÿ &emsp;è¿™ä¸ªé¢˜æ˜¯æˆ‘å»å¹´åœ¨ä¸€å®¶å…¬å¸è¢«é—®åˆ°çš„é¢è¯•é¢˜ã€‚æ ¹æ®ä¸Šå›¾åˆ†æï¼Œè·å–åˆ°è‡ªå·±çš„æ’åå¹¶ä¸æ˜¯éš¾äº‹ï¼Œé‚£å‰ä¸€åå’Œåä¸€åä¹Ÿéå¸¸ç®€å•äº†ã€‚","text":"å¼•è¨€&emsp;è¯´èµ·æ’è¡Œæ¦œä¸Šä¸€ç¯‡å·²ç»ä»‹ç»è¿‡äº†ç”¨Rediså®ç°çš„æ–¹æ³•ï¼Œè€Œè¿™ç¯‡å®Œå…¨æ˜¯ç”¨Sqlæ¥å®ç°ï¼Œä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜ã€‚ éœ€æ±‚åŠŸèƒ½ï¼ˆ1ï¼‰&emsp;ç°æœ‰åä¸ªåŒå­¦ï¼Œå¹´é¾„åˆ†å¸ƒå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡è®¾ä½ æ˜¯æˆ´ä¸ƒï¼Œè¯·æ ¹æ®å¹´é¾„è·å¾—ä½ åœ¨è¿™åäººä¸­æ’ç¬¬å‡ ï¼ŸåŒæ—¶è¯·è·å¾—ä½ çš„å‰ä¸€åå’Œåä¸€åå„æ˜¯å“ªä¸€ä½åŒå­¦ï¼Ÿ &emsp;è¿™ä¸ªé¢˜æ˜¯æˆ‘å»å¹´åœ¨ä¸€å®¶å…¬å¸è¢«é—®åˆ°çš„é¢è¯•é¢˜ã€‚æ ¹æ®ä¸Šå›¾åˆ†æï¼Œè·å–åˆ°è‡ªå·±çš„æ’åå¹¶ä¸æ˜¯éš¾äº‹ï¼Œé‚£å‰ä¸€åå’Œåä¸€åä¹Ÿéå¸¸ç®€å•äº†ã€‚ è‡ªå·±çš„æ’å12// åŸç”Ÿå†™æ³•select count(*) from `rank` where `age` &gt; 22 or (`age` = 22 and `created_at` &gt; '2020-01-21 09:05:34'); 123456// Laravelæ¡†æ¶å†™æ³•$my = DB::table('rank')-&gt;where('name', 'æˆ´ä¸ƒ')-&gt;first();$rank = DB::table('rank')-&gt;where('age', '&gt;', $my-&gt;age)-&gt;orWhere(function ($query) use ($my) &#123; $query-&gt;where('age', '=', $my-&gt;age)-&gt;where('created_at', '&gt;', $my-&gt;created_at);&#125;)-&gt;count();$myRank = $rank + 1; &emsp;è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœä¸¤ä¸ªäººçš„å¹´é¾„ç›¸åŒï¼Œé‚£ä¹ˆå°±è¦æ¯”è¾ƒæ—¶é—´ã€‚æœ€ç»ˆå¾—åˆ°çš„æ˜¯å¹´é¾„å¤§äºè‡ªå·±äººæœ‰å¤šå°‘ä¸ªï¼Œ+1å°±æ˜¯è‡ªå·±çš„æ’åã€‚ å‰ä¸€å1234// é€šè¿‡ä¸Šé¢çš„Sqlå¾—çŸ¥å¹´é¾„å¤§äºè‡ªå·±çš„äººæ•°æ˜¯6äºº$rankNum = 6;$top = $rankNum - 1;select * from rank where age &gt; 22 order by age desc limit $top,1 åä¸€å1select * from `rank` where `age` &lt; 22 or (`age` = 22 and `created_at` &lt; '2020-01-21 09:05:34') order by age desc,created_at desc limit 1 &emsp;è¿™é‡Œå’ŒåŸå§‹Sqlä¸åŒçš„æ˜¯ï¼šå¹´é¾„æ˜¯&lt;22ï¼Œæ—¶é—´ä¹Ÿæ˜¯&lt;è‡ªå·±çš„å‡ºç”Ÿæ—¶é—´ã€‚ éœ€æ±‚åŠŸèƒ½ï¼ˆ2ï¼‰&emsp;è¿˜æ˜¯è¿™åååŒå­¦ï¼Œå‡è®¾æˆ´ä¸ƒåŒå­¦å°±æ˜¯æœ¬äººï¼Œç°éœ€è¦äº”ååŒå­¦çš„å¹´é¾„ä½œä¸ºå‚è€ƒï¼Œè¦æ±‚è¿™åˆ†åˆ«å¾—çŸ¥ä½ æœ¬äººçš„å‰ä¸¤ååŒå­¦å’Œåä¸¤ååŒå­¦éƒ½æ˜¯è°ï¼ˆäº”ååŒå­¦ä¸­å¿…é¡»åŒ…å«ä½ è‡ªå·±ï¼‰ï¼Ÿ ç‰¹æ®Šæƒ…å†µï¼š&emsp;ï¼ˆ1ï¼‰å¦‚æœä½ æ˜¯ç¬¬ä¸€åï¼Œé‚£ä¹ˆå°±è·å¾—ä½ åé¢çš„å››ä½åŒå­¦ã€‚&emsp;ï¼ˆ2ï¼‰å¦‚æœä½ æ˜¯ç¬¬äºŒåï¼Œé‚£ä¹ˆå°±è·å¾—ä½ å‰é¢çš„ä¸€å+åé¢çš„ä¸‰ååŒå­¦ã€‚&emsp;ï¼ˆ3ï¼‰å¦‚æœä½ æ˜¯å€’æ•°ç¬¬ä¸€åï¼Œé‚£ä¹ˆå°±è·å¾—ä½ å‰é¢çš„å››ä½åŒå­¦ã€‚&emsp;ï¼ˆ4ï¼‰å¦‚æœä½ æ˜¯å€’æ•°ç¬¬äºŒåï¼Œé‚£ä¹ˆå°±è·å¾—ä½ å‰é¢çš„ä¸‰å+åé¢çš„ä¸€ä½åŒå­¦ã€‚&emsp;ï¼ˆ5ï¼‰å¯ä½¿ç”¨å…¶ä»–è¯­è¨€è¾…åŠ©è§£å†³é—®é¢˜ï¼Œä½†å°½å¯èƒ½çš„ç®€å•æ¸…æ™°ã€‚ ç­”æ¡ˆ12345678910111213$myRank = $rank + 1;$total = Db::table('rank')-&gt;count();// å¦‚æœæ’åæ˜¯åœ¨å‰ä¸‰åif ($myRank &lt;= 3) &#123; select * from rank where 1 order by age desc,created_at desc limit 5;&#125; else if (($total - $myRank) &lt;= 2) &#123; // å€’æ•°ä¸¤å $unRank = $total - $myRank + 1; $offset = $myRank - 6 + $unRank; select * from rank where 1 order by age desc,created_at desc limit $offset,5;&#125; else &#123; $offset = $myRank - 3; select * from rank where 1 order by age desc,created_at desc limit $offset,5;&#125;","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"php+rediså®ç°å®æ—¶æ’è¡Œæ¦œ","slug":"php-rediså®ç°å®æ—¶æ’è¡Œæ¦œ","date":"2019-12-19T05:14:25.000Z","updated":"2021-09-03T05:56:57.941Z","comments":true,"path":"php-rediså®ç°å®æ—¶æ’è¡Œæ¦œ/","link":"","permalink":"http://www.daichongweb.com/php-rediså®ç°å®æ—¶æ’è¡Œæ¦œ/","excerpt":"ä»‹ç»&emsp;è¯´èµ·æ’è¡Œæ¦œå¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼Œåœ¨é¡¹ç›®å¼€å‘ä¸­æ’è¡Œæ¦œçš„è¿ç”¨éå¸¸çš„å¤šã€‚å¦‚ç‹è€…å†œè¯çš„å¤©æ¢¯æ’è¡Œæ¦œã€å•†åŸçš„é”€é‡æ’è¡Œæ¦œã€çƒ­å–æ¦œã€ç”¨æˆ·ç§¯åˆ†æ’è¡Œæ¦œç­‰ç­‰ã€‚ä¸ç®¡ä»–æ˜¯ä»€ä¹ˆç±»å‹çš„æ’è¡Œæ¦œï¼Œå…¶ä¸šåŠ¡é€»è¾‘ã€å®ç°æ–¹æ³•å‡ ä¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚&emsp;å¦‚è¿™æ ·çš„ä¸€ä¸ªæ‰‹æœºå’Œç¬”è®°æœ¬çš„é”€é‡æ’è¡Œæ¦œæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ","text":"ä»‹ç»&emsp;è¯´èµ·æ’è¡Œæ¦œå¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼Œåœ¨é¡¹ç›®å¼€å‘ä¸­æ’è¡Œæ¦œçš„è¿ç”¨éå¸¸çš„å¤šã€‚å¦‚ç‹è€…å†œè¯çš„å¤©æ¢¯æ’è¡Œæ¦œã€å•†åŸçš„é”€é‡æ’è¡Œæ¦œã€çƒ­å–æ¦œã€ç”¨æˆ·ç§¯åˆ†æ’è¡Œæ¦œç­‰ç­‰ã€‚ä¸ç®¡ä»–æ˜¯ä»€ä¹ˆç±»å‹çš„æ’è¡Œæ¦œï¼Œå…¶ä¸šåŠ¡é€»è¾‘ã€å®ç°æ–¹æ³•å‡ ä¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚&emsp;å¦‚è¿™æ ·çš„ä¸€ä¸ªæ‰‹æœºå’Œç¬”è®°æœ¬çš„é”€é‡æ’è¡Œæ¦œæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ ä¾‹å­ æ¦œå•å®ç°&emsp;å‡è®¾åšä¸€ä¸ªå¦‚ä¸Šå›¾ä¸€æ ·çš„æ’è¡Œæ¦œï¼Œè§„å®šæ¦œå•å¿…é¡»æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œä½ ä¼šä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ¥å®ç°å‘¢ï¼Ÿ æ–¹æ¡ˆä¸€&emsp;åœ¨æ•°æ®åº“æ–°å»ºä¸€å¼ æ•°æ®è¡¨ï¼Œé€šè¿‡ä¸‹å•äº‹ä»¶é’©å­æ¥æ›´æ–°è¿™å¼ è¡¨çš„æ•°æ®ï¼Œè®°å½•é”€é‡æƒ…å†µã€‚1select id,name,image from goods left join goods_top on goods.id=goods_top.goods_id where sales &gt; 0 order by sales desc limit 10; &emsp;æœ€å¸¸è§ã€æœ€ç®€å•çš„å†™æ³•è«è¿‡äºæ­¤ï¼Œä½†è¿™ä¸ªå†™æ³•æœ‰ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜ã€‚å‡è®¾goodsä¸­æ•°æ®è§„æ¨¡æå¤§ï¼Œè®°å½•è¡¨goods_topè¡¨ä¸­æ•°æ®è§„æ¨¡ä¹Ÿä¸å°ï¼Œåœ¨æ¯æ¬¡æŸ¥è¯¢çš„æ€§èƒ½æ¶ˆè€—æ— ç–‘æ˜¯å¾ˆå¤§çš„ï¼Œåœ¨æç«¯çš„æƒ…å†µä¸‹ç”šè‡³å¯èƒ½ä¼šå‡ºç°è¯·æ±‚è¶…æ—¶çš„æƒ…å†µã€‚ &emsp;è¿™ä¸ªæ–¹æ¡ˆåœ¨å®é™…çš„é¡¹ç›®è¿ç”¨ä¸­ä¹Ÿå¾ˆå°‘å‡ºç°ï¼Œé™¤éä½ èƒ½ç¡®å®šæ•°æ®è¡¨è§„æ¨¡ä¸€å®šä¼šéå¸¸çš„å°ï¼Œæˆ–è€…ä½ æ ¹æœ¬ä¸è€ƒè™‘ä»€ä¹ˆæ€§èƒ½çš„æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨ã€‚ æ–¹æ¡ˆäºŒ&emsp;ä½¿ç”¨redisçš„æœ‰åºé›†åˆ(zset)æ¥å®ç°å®æ—¶æ’è¡Œæ¦œã€‚å…³äºredisæœ‰åºé›†åˆçš„ç›¸å…³ä»‹ç»ã€åŸç†ä»€ä¹ˆçš„å¤§å®¶è‡ªè¡Œç™¾åº¦ &emsp;(1)Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚&emsp;(2)ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚&emsp;(3)æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚&emsp;(4)é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚ &emsp;ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹å•äº‹ä»¶é’©å­åˆ›å»ºä¸€ä¸ªzseté›†åˆï¼Œæˆ‘ä»¬é€šè¿‡valueæ¥åŒºåˆ†æ˜¯å“ªä¸ªå•†å“ï¼Œé€šè¿‡scoreæ¥æ’åã€‚ å…·ä½“ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?phpuse Illuminate\\Support\\Facades\\Redis;/** * å•†å“é”€é‡æ’è¡Œæ¦œ */class Rank&#123; // key private static function key() &#123; $activeActivityId = Main::info(); return \"goods_top\"; &#125; // å¢åŠ é”€é‡ public static function add($id, $number) &#123; return Redis::zIncrBy(self::key(), $number, $id); &#125; // è·å–é”€é‡ static function get($id) &#123; return Redis::zScore(self::key(), $id); &#125; // è·å–æˆå‘˜æ’å-æ­£åº static function getRank($id) &#123; return Redis::zrevrank(self::key(), $id); &#125; // é€šè¿‡æ’åè·å–æˆå‘˜ static function getRevRange($start, $stop): array &#123; return Redis::zRevRange(self::key(), $start, $stop); &#125;&#125; å¦‚ä½•ä½¿ç”¨1234Rank::add(1008,10); // å•†å“IDä¸º1008çš„é”€é‡å¢åŠ 10Rank::get(1008); // è·å–å•†å“IDä¸º1008çš„é”€é‡Rank::getRank(1008); // è·å–å•†å“IDä¸º1008çš„æ’åRank::getRevRange(0,9); // è·å–æ’åå‰åçš„å•†å“ID,è¿”å›æ•°ç»„ æ€»ç»“&emsp;å®ç°æ’è¡Œæ¦œçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¤§å®¶æ ¹æ®å…·ä½“éœ€æ±‚å’Œç°æœ‰æŠ€æœ¯æ¥ç¡®å®šå®ç°æ–¹æ¡ˆã€‚ä¸è¦è¿‡åˆ†çš„è¿½æ±‚æ€§èƒ½æˆ–è€…æ˜¯å¼€å‘é€Ÿåº¦ï¼Œæ¬²é€Ÿåˆ™ä¸è¾¾ã€‚","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"php7.4é¢„åŠ è½½ä¸swooleå¸¸é©»å†…å­˜æœ‰ä½•åŒºåˆ«ï¼Ÿ","slug":"php7-4é¢„åŠ è½½ä¸swooleå¸¸é©»å†…å­˜æœ‰ä½•åŒºåˆ«ï¼Ÿ","date":"2019-12-14T01:52:57.000Z","updated":"2021-09-03T05:56:57.942Z","comments":true,"path":"php7-4é¢„åŠ è½½ä¸swooleå¸¸é©»å†…å­˜æœ‰ä½•åŒºåˆ«ï¼Ÿ/","link":"","permalink":"http://www.daichongweb.com/php7-4é¢„åŠ è½½ä¸swooleå¸¸é©»å†…å­˜æœ‰ä½•åŒºåˆ«ï¼Ÿ/","excerpt":"é‡å¤§æ–°é—» php7.4åœ¨2019/11/28æ—¥å‘å¸ƒï¼","text":"é‡å¤§æ–°é—» php7.4åœ¨2019/11/28æ—¥å‘å¸ƒï¼å…¶ä¸­RFC: Preloadingï¼ˆé¢„åŠ è½½ï¼‰æœ€å¼•äººç©ç›®ã€‚è¿™ä¸€æ–°ç‰¹æ€§çš„è¯ç”Ÿæ ‡å¿—ç€phpä½œä¸ºè§£é‡Šå‹è¯­è¨€åœ¨æ€§èƒ½ç“¶é¢ˆä¸Šå†æ¬¡çªç ´ã€‚ æ ¹æ®å„å¤§ç½‘å‹çš„æµ‹è¯•ç»Ÿè®¡ï¼Œphp7.4ä¸php7.0ç›¸æ¯”æå‡å°†è¿‘10%ã€‚ ç‰¹æ€§ä»‹ç»phpç”Ÿå‘½å‘¨æœŸ æ¯æ¬¡è¯·æ±‚phpéƒ½ä¼šä»0åˆ°1é‡å¤ä¸Šå›¾æ‰€ç¤ºçš„æ“ä½œï¼Œæ¯æ¬¡å¸¦æ¥çš„å†…å­˜ã€IOæ–¹é¢çš„æ¶ˆè€—æ— ç–‘æ˜¯å¾ˆå¤§çš„ã€‚ é¢„åŠ è½½ åœ¨é¢„åŠ è½½çš„ç‰¹æ€§ä¸‹ï¼Œphpä¼šå½“é¢„åŠ è½½å®Œæˆåçš„è¯·æ±‚ç›´æ¥ä¼šå‘½ä¸­ç¼“å­˜ï¼Œçœä¸‹äº†ç¼–è¯‘ã€è¯­æ³•è§£æã€è¯­æ³•åˆ†æã€ç±»åº“å¼•å…¥ç­‰ç­‰æ“ä½œã€‚ è¿™é‡Œä½ ä¼šå‘ç°æ€ä¹ˆå’Œswooleçš„å¸¸é©»å†…å­˜æœ‰ç‚¹åƒï¼Ÿ ä¸è¿‡è¯´å®è¯ï¼Œåœ¨æ²¡æœ‰çœŸæ­£ä½¿ç”¨çš„æƒ…å†µä¸‹è¿˜çœŸæ²¡æ³•åˆ¤æ–­ä¸¤è€…çš„åŒºåˆ«ã€‚ å…³äºæ›´è¯¦ç»†çš„é¢„åŠ è½½ä½¿ç”¨å¤§å®¶å¯ä»¥çœ‹è¿™é‡Œï¼šphp7.4 preload(é¢„åŠ è½½) æ¬¢è¿å¤§å®¶æ¥è®¨è®ºæœ‰å…³äºé¢„åŠ è½½å’Œå¸¸é©»å†…å­˜çš„åŒºåˆ«åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"php+element+aliyunOsså®ç°å•å›¾webç›´ä¼ ","slug":"php-element-aliyunOsså®ç°å•å›¾webç›´ä¼ ","date":"2019-12-07T09:45:43.000Z","updated":"2021-09-03T05:56:57.937Z","comments":true,"path":"php-element-aliyunOsså®ç°å•å›¾webç›´ä¼ /","link":"","permalink":"http://www.daichongweb.com/php-element-aliyunOsså®ç°å•å›¾webç›´ä¼ /","excerpt":"ä¸šåŠ¡é€»è¾‘åŸæœ‰ä¸šåŠ¡","text":"ä¸šåŠ¡é€»è¾‘åŸæœ‰ä¸šåŠ¡ å’Œæ•°æ®ç›´ä¼ åˆ° OSS ç›¸æ¯”ï¼Œä»¥ä¸Šæ–¹æ³•æœ‰ä¸‰ä¸ªç¼ºç‚¹ï¼š ä¸Šä¼ æ…¢ï¼šç”¨æˆ·æ•°æ®éœ€å…ˆä¸Šä¼ åˆ°åº”ç”¨æœåŠ¡å™¨ï¼Œä¹‹åå†ä¸Šä¼ åˆ°OSSã€‚ç½‘ç»œä¼ è¾“æ—¶é—´æ¯”ç›´ä¼ åˆ°OSSå¤šä¸€å€ã€‚å¦‚æœç”¨æˆ·æ•°æ®ä¸é€šè¿‡åº”ç”¨æœåŠ¡å™¨ä¸­è½¬ï¼Œè€Œæ˜¯ç›´ä¼ åˆ°OSSï¼Œé€Ÿåº¦å°†å¤§å¤§æå‡ã€‚è€Œä¸”OSSé‡‡ç”¨BGPå¸¦å®½ï¼Œèƒ½ä¿è¯å„åœ°å„è¿è¥å•†ä¹‹é—´çš„ä¼ è¾“é€Ÿåº¦ã€‚ æ‰©å±•æ€§å·®ï¼šå¦‚æœåç»­ç”¨æˆ·å¤šäº†ï¼Œåº”ç”¨æœåŠ¡å™¨ä¼šæˆä¸ºç“¶é¢ˆã€‚ è´¹ç”¨é«˜ï¼šéœ€è¦å‡†å¤‡å¤šå°åº”ç”¨æœåŠ¡å™¨ã€‚ç”±äºOSSä¸Šä¼ æµé‡æ˜¯å…è´¹çš„ï¼Œå¦‚æœæ•°æ®ç›´ä¼ åˆ°OSSï¼Œä¸é€šè¿‡åº”ç”¨æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°†èƒ½çœä¸‹å‡ å°åº”ç”¨æœåŠ¡å™¨ã€‚ ä»£æ›¿ä¸šåŠ¡ ä½¿ç”¨Oss webç›´ä¼ ï¼Œèƒ½æœ‰æ•ˆçš„è§£å†³ä¸Šä¼ é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ã€‚ å®è·µphpåç«¯ç­¾åä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * é˜¿é‡ŒOssä¸Šä¼ éªŒç­¾ç±» */class OssPolicy&#123; private function gmtIso8601($time) &#123; $dtStr = date(\"c\", $time); $mydatetime = new DateTime($dtStr); $expiration = $mydatetime-&gt;format(DateTime::ISO8601); $pos = strpos($expiration, '+'); $expiration = substr($expiration, 0, $pos); return $expiration . \"Z\"; &#125; /** * è·å–ç­¾å */ public function policy() &#123; $id = Config('aliyun.webOss.accessKeyId'); // oss accessKeyId $key = Config('aliyun.webOss.accessKeySecret'); // oss accessKeySecret $host = Config('aliyun.webOss.host'); // oss ä¸Šä¼ åœ°å€ $callbackUrl = Config('aliyun.webOss.callbackUrl');// å›è°ƒåœ°å€ è¿™ä¸ªå¯ä»¥å¿½ç•¥ $dir = Config('aliyun.webOss.dir'); // å­˜æ”¾çš„æ–‡ä»¶å¤¹ $callback_param = array( 'callbackUrl' =&gt; $callbackUrl, 'callbackBody' =&gt; 'filename=$&#123;object&#125;&amp;size=$&#123;size&#125;&amp;mimeType=$&#123;mimeType&#125;&amp;height=$&#123;imageInfo.height&#125;&amp;width=$&#123;imageInfo.width&#125;', 'callbackBodyType' =&gt; \"application/x-www-form-urlencoded\" ); $callback_string = json_encode($callback_param); $base64_callback_body = base64_encode($callback_string); $now = time(); $expire = 30; $end = $now + $expire; $expiration = $this-&gt;gmtIso8601($end); $condition = array(0 =&gt; 'content-length-range', 1 =&gt; 0, 2 =&gt; 1048576000); $conditions[] = $condition; $start = array(0 =&gt; 'starts-with', 1 =&gt; '$key', 2 =&gt; $dir); $conditions[] = $start; $arr = array('expiration' =&gt; $expiration, 'conditions' =&gt; $conditions); $policy = json_encode($arr); $base64_policy = base64_encode($policy); $string_to_sign = $base64_policy; $signature = base64_encode(hash_hmac('sha1', $string_to_sign, $key, true)); $response = array(); $response['accessid'] = $id; $response['host'] = $host; $response['policy'] = $base64_policy; $response['signature'] = $signature; $response['expire'] = $end; $response['callback'] = $base64_callback_body; $response['dir'] = $dir; return $response; &#125;&#125; å°è£…ç»„ä»¶ ossSingleUpload.vue12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;template&gt; &lt;div&gt; &lt;el-upload list-type=\"picture-card\" class=\"avatar-uploader\" action=\"http://daichongwbe.oss-cn-beijing.aliyuncs.com\" // ä¸Šä¼ åœ°å€ :data=\"dataObj\" accept=\".jpeg, .png, .jpg\" // å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ :multiple=\"false\" // ç¦æ­¢å¤šå›¾ä¸Šä¼  :before-upload=\"beforeUpload\" // ä¸Šä¼ å‰å›è°ƒ :on-success=\"handleUploadSuccess\" // ä¸Šä¼ æˆåŠŸåå›è°ƒ :limit=\"limit\" // é™åˆ¶ä¸Šä¼ æ•°é‡ :show-file-list=\"false\" // ç¦æ­¢åˆ—è¡¨å±•ç¤º ref=\"upload\" &gt; &lt;img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" /&gt; &lt;i v-else class=\"el-icon-plus avatar-uploader-icon\"&gt;&lt;/i&gt; &lt;/el-upload&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; getPolicy &#125; from \"@/api/oss/token\"; // åç«¯éªŒç­¾æ¥å£export default &#123; name: \"ossSingleUpload\", //ç»„ä»¶å‘½å props: &#123; limit: Number, // å‚æ•° imgCover: String // å‚æ•° &#125;, data() &#123; return &#123; dataObj: &#123; policy: \"\", signature: \"\", key: \"\", ossaccessKeyId: \"\", dir: \"\", host: \"\", callback: \"\" &#125;, imageUrl: \"\" &#125;; &#125;, created() &#123; setTimeout(() =&gt; &#123; this.imageUrl = this.imgCover; &#125;, 500); &#125;, methods: &#123; emitInput(val) &#123; // ç»„ä»¶äº¤äº’ this.$emit(\"input\", val); &#125;, beforeUpload(file) &#123; // ä¸Šä¼ å‰é’©å­ let _self = this; return new Promise((resolve, reject) =&gt; &#123; getPolicy() .then(response =&gt; &#123; _self.dataObj.policy = response.data.policy; _self.dataObj.signature = response.data.signature; _self.dataObj.ossaccessKeyId = response.data.accessid; _self.dataObj.key = response.data.dir + \"$&#123;filename&#125;\"; _self.dataObj.dir = response.data.dir; _self.dataObj.host = response.data.host; _self.dataObj.callback = response.data.callback; resolve(true); &#125;) .catch(err =&gt; &#123; console.log(err); reject(false); &#125;); &#125;); &#125;, handleUploadSuccess(res, file) &#123; // ä¸Šä¼ æˆåŠŸå // æ¸…é™¤ä¸Šæ¬¡çš„ä¸Šä¼ è®°å½•ï¼Œè¿™é‡Œå¦‚æœä¸æ¸…é™¤ä¼šå¯¼è‡´ç¬¬äºŒæ¬¡ä¸Šä¼ æ— æ•ˆã€‚ this.$refs.upload.clearFiles(); // ç»„è£…å›¾ç‰‡è·¯å¾„ï¼Œè¿™é‡Œæ ¹æ®ä¸šåŠ¡éœ€è¦æ¥ã€‚ this.imageUrl = this.dataObj.host + \"/\" + this.dataObj.dir + file.name; // ç»„ä»¶äº¤äº’ï¼ŒæŠŠå›¾ç‰‡è·¯å¾„å‘é€ç»™é¡µé¢ this.$emit(\"getMessage\", this.imageUrl); &#125; &#125;&#125;;&lt;/script&gt; 1234567891011121314151617181920.avatar-uploader .el-upload &#123; border: 1px dashed #d9d9d9; border-radius: 6px; cursor: pointer; position: relative; overflow: hidden;&#125;.avatar-uploader .el-upload:hover &#123; border-color: #409eff;&#125;.avatar-uploader-icon &#123; width: 100%; font-size: 28px; color: #8c939d; text-align: center;&#125;.avatar &#123; width: 100%; display: block;&#125; é¡µé¢è°ƒç”¨12345678910111213141516171819202122&lt;template&gt; &lt;div class=\"app-container\"&gt; &lt;oss-single-upload @getMessage=\"coverImg\" :imgCover=\"imgCover\" :limit=\"1\"&gt;&lt;/oss-single-upload&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import ossSingleUpload from \"@/components/Upload/ossSingleUpload\"; // å¼•å…¥ç»„ä»¶export default &#123; components: &#123; ossSingleUpload &#125;, data() &#123; return &#123; imgCover:\"\" &#125;; &#125;, methods: &#123; coverImg(imgUrl) &#123; console.log(imgUrl); //å¾—åˆ°çš„ä¸Šä¼ å›¾ç‰‡è·¯å¾„ &#125; &#125;&#125;;&lt;/script&gt; è¯·æ±‚ç»“æœ åœ¨callbackurlä¸ºç©ºæˆ–è€…callbackurlæ–‡ä»¶å†…å®¹é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ã€‚ æ•ˆæœå±•ç¤º githubä»“åº“ç‚¹å‡»æŸ¥çœ‹æºä»£ç ","categories":[],"tags":[{"name":"vue","slug":"vue","permalink":"http://www.daichongweb.com/tags/vue/"}]},{"title":"Laravelæ¶ˆæ¯é˜Ÿåˆ—","slug":"Laravelæ¶ˆæ¯é˜Ÿåˆ—","date":"2019-12-05T02:56:23.000Z","updated":"2021-09-03T05:56:57.874Z","comments":true,"path":"Laravelæ¶ˆæ¯é˜Ÿåˆ—/","link":"","permalink":"http://www.daichongweb.com/Laravelæ¶ˆæ¯é˜Ÿåˆ—/","excerpt":"æ€ç»´å¯¼å›¾","text":"æ€ç»´å¯¼å›¾ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—(MQ)å…³äºæ¶ˆæ¯é˜Ÿåˆ—å¤§å®¶è‚¯å®šéƒ½ä¸é™Œç”Ÿï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªé¡¹ç›®ä¸­éƒ½ä¼šä½¿ç”¨åˆ°çš„æŠ€æœ¯ï¼Œåœ¨æˆ‘å‰å‡ æœŸçš„åšæ–‡ä¸­ä¹Ÿæœ‰ä»‹ç»ã€‚ &emsp;æ¶ˆæ¯é˜Ÿåˆ—æœ¬è´¨å°±æ˜¯é€»è¾‘æ‰§è¡Œé¡ºåºï¼Œé˜Ÿåˆ—å°±å¦‚åŒä¸€æ‘ç¢—å †æ”¾åœ¨ä¸€èµ·ï¼Œä½ æ¯æ”¾ä¸€ä¸ªç¢—éƒ½ä¼šæ”¾åœ¨è¿™èºç¢—çš„æœ€ä¸Šé¢ï¼Œå½“ä½ æ‹¿ç¢—çš„æ—¶å€™ä¹Ÿæ˜¯åªèƒ½ä»æœ€ä¸Šé¢æ‹¿ã€‚è¿™ä¸ªå¦‚åŒé˜Ÿåˆ—çš„æ¶ˆè´¹ç‰¹æ€§ï¼ˆé˜Ÿåˆ—çš„ç‰¹æ€§æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œå…ˆè¿›åå‡ºï¼Œé“ç†æ˜¯ä¸€æ ·çš„ï¼‰ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ æé«˜ç³»ç»Ÿæ€§èƒ½ï¼ˆå‰Šå³°ï¼Œå‡å°‘å“åº”æ—¶é—´ï¼‰ã€‚1234567# å‡è®¾ä½ æœ‰ä¸€ä¸ªè¿™æ ·çš„æ¥å£# æ–°ç”¨æˆ·æ³¨å†Œå‘é€é‚®ä»¶éªŒè¯ç public function SendMailCode(Request $request)&#123; $mail = $request-&gt;input(&apos;mail); SendReminderEmail::dispatch($mail); // æŠŠé‚®ç®±åŠ å…¥é˜Ÿåˆ— return &apos;éªŒè¯ç å‘é€æˆåŠŸï¼Œè¯·æ³¨æ„æŸ¥æ”¶ï¼&apos;;&#125; &emsp;å‡è®¾æ³¨å†Œæ¥å£çš„å¹¶å‘åœ¨1ç§’100ï¼Œåœ¨ä½¿ç”¨é˜Ÿåˆ—çš„æƒ…å†µä¸‹å‘é€é‚®ä»¶è¿™ä¸ªæ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç¬¬100åç”¨æˆ·ç‚¹å‡»è·å–éªŒè¯ç åç«‹åˆ»å°±èƒ½è·å¾—å“åº”ï¼Œæ— éœ€ç­‰å¾…å‰99åæ‰€æœ‰é‚®ä»¶å‘é€æˆåŠŸåæ‰èƒ½å¾—åˆ°ç›¸åº”ï¼Œè¿™å°±æ˜¯ä¸é˜»å¡ã€‚å½“SendReminderEmail::dispatch($mail)æ‰§è¡Œä¹‹åç«‹åˆ»å°±ä¼šæ‰§è¡Œ return &#39;éªŒè¯ç å‘é€æˆåŠŸï¼Œè¯·æ³¨æ„æŸ¥æ”¶ï¼&#39;ï¼Œæ§åˆ¶å™¨ä¸éœ€è¦çŸ¥é“é‚®ä»¶æ˜¯å¦å‘é€æˆåŠŸï¼Œå‡å°‘äº†é˜»å¡çš„ç­‰å¾…æ—¶é—´ã€‚ é™ä½ç³»ç»Ÿçš„è€¦åˆæ€§ã€‚ä¼ ç»Ÿå†™æ³• æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰å†™æ³• æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šä¸Šè¾¹å·²ç»è®²è¿‡äº†ã€‚ ç¼ºç‚¹ï¼š&emsp; (1)ç³»ç»Ÿå¯ç”¨æ€§é™ä½:å¯ä»¥çœ‹å‡ºå¼•å…¥äº†MQä¹‹åï¼Œå¦‚æœMQæŒ‚äº†ç›¸å½“äºæ•´ä¸ªæ—¥å¿—ç³»ç»Ÿä¹Ÿéšä¹‹å´©æºƒã€‚&emsp; (2)ç³»ç»Ÿå¤æ‚æ€§æé«˜:å¼•å…¥MQå¢åŠ äº†ç»´æŠ¤ç³»ç»Ÿçš„å·¥ä½œé‡ï¼Œå‡ºç°é—®é¢˜çš„å¯èƒ½æ€§ä¼šæ›´é«˜ã€‚&emsp; (3)ä¸€è‡´æ€§é—®é¢˜ã€‚ é˜Ÿåˆ—çš„åº”ç”¨&emsp;Laravelä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—å°±éå¸¸ç®€å•äº†ï¼Œä»–å¯ä»¥è®¾ç½®é©±åŠ¨å’Œæ‰§è¡Œæ–¹å¼ã€‚ å®‰è£…æ‰©å±• aws/aws-sdk-php ~3.0 pda/pheanstalk ~3.0 predis/predis ~1.0 ç”Ÿæˆä»»åŠ¡ç±»1php artisan make:job SendReminderEmail ä»»åŠ¡ç±»ç»“æ„123456789101112131415161718192021222324252627282930313233343536&lt;?phpnamespace App\\Jobs;use Illuminate\\Bus\\Queueable;use Illuminate\\Contracts\\Queue\\ShouldQueue;use Illuminate\\Foundation\\Bus\\Dispatchable;use Illuminate\\Queue\\InteractsWithQueue;use Illuminate\\Queue\\SerializesModels;class SendReminderEmail implements ShouldQueue&#123; use Dispatchable, InteractsWithQueue, Queueable, SerializesModels; protected $id; // æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å‚æ•° /** * Create a new job instance. * * @return void */ public function __construct($id) &#123; $this-&gt;id = $id; // æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å‚æ•° &#125; /** * Execute the job. * * @return void */ public function handle() &#123; echo 'jobsss' . $this-&gt;id; &#125;&#125; åŠ å…¥é˜Ÿåˆ—123use SendReminderEmail;SendReminderEmail::dispatch($id); // åŠ å…¥é˜Ÿåˆ—ehco 1; æµ‹è¯•ç»“æœ&emsp;ï¼ˆ1ï¼‰å½“æˆ‘æœªå¼€å¯æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è¯·æ±‚æ¥å£ï¼Œä¼šè¿”å›1ã€‚&emsp;ï¼ˆ2ï¼‰å¼€å¯æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯é˜Ÿåˆ—çš„é€‰æ‹©&emsp;ä¸€èˆ¬æƒ…å†µä¸‹å¤§éƒ¨åˆ†ä¸šåŠ¡éƒ½ä½¿ç”¨çš„æ˜¯redisçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚åŠ å…¥ä½ ä»¬å…¬å¸ä¸šåŠ¡é‡éå¸¸å¤§ï¼Œå‡ åƒä¸‡ç”šè‡³å‡ äº¿å°±å¿…é¡»è€ƒè™‘ä½¿ç”¨å…¶ä»–çš„MQå·¥å…·ã€‚å¦‚ActiveMQã€RabbitMQã€RocketMQã€Kafkaã€‚ æ€»ç»“&emsp;Laravelçš„æ¶ˆæ¯é˜Ÿåˆ—åº”ç”¨æ¯”è¾ƒç®€å•ä¸”éå¸¸çš„å¥½ç”¨ï¼Œå»ºè®®å¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚å…·ä½“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚","categories":[],"tags":[{"name":"laravel","slug":"laravel","permalink":"http://www.daichongweb.com/tags/laravel/"}]},{"title":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶é…ç½®ç¯‡","slug":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶é…ç½®ç¯‡","date":"2019-11-12T05:09:52.000Z","updated":"2021-09-03T05:56:57.981Z","comments":true,"path":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶é…ç½®ç¯‡/","link":"","permalink":"http://www.daichongweb.com/æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶é…ç½®ç¯‡/","excerpt":"å‰ç¯‡å›å¿†ä¸Šä¸€ç¯‡ä»‹ç»äº†ä¸»ä»å¤åˆ¶çš„æ­å»ºçš„åŸºç¡€æµç¨‹ï¼Œä¸ºè¿™ç¯‡çš„é…ç½®åšäº†é“ºå«ã€‚ä¾¿äºç†è§£æ˜¯è¿™ç¯‡æœ€å¤§çš„äº®ç‚¹ï¼Œè¯´å®è¯ç»è¿‡äº²æ‰‹å°è¯•äº†ä¸»ä»å¤åˆ¶ä¹‹åï¼Œæ„Ÿè§‰è¿™ä¸ªä¸œè¥¿ç¡®å®ä¸éš¾ï¼Œå°±ç®€å•çš„æ”¹å‡ ä¸ªé…ç½®å°±å¯ä»¥æå®šï¼Œä½†æ˜¯ä½œä¸ºé«˜çº§ç¨‹åºä¼˜åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œå­¦ä¹ è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚","text":"å‰ç¯‡å›å¿†ä¸Šä¸€ç¯‡ä»‹ç»äº†ä¸»ä»å¤åˆ¶çš„æ­å»ºçš„åŸºç¡€æµç¨‹ï¼Œä¸ºè¿™ç¯‡çš„é…ç½®åšäº†é“ºå«ã€‚ä¾¿äºç†è§£æ˜¯è¿™ç¯‡æœ€å¤§çš„äº®ç‚¹ï¼Œè¯´å®è¯ç»è¿‡äº²æ‰‹å°è¯•äº†ä¸»ä»å¤åˆ¶ä¹‹åï¼Œæ„Ÿè§‰è¿™ä¸ªä¸œè¥¿ç¡®å®ä¸éš¾ï¼Œå°±ç®€å•çš„æ”¹å‡ ä¸ªé…ç½®å°±å¯ä»¥æå®šï¼Œä½†æ˜¯ä½œä¸ºé«˜çº§ç¨‹åºä¼˜åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œå­¦ä¹ è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ é…ç½®ä»‹ç»ç¡®è®¤ç¯å¢ƒ1.æœåŠ¡å™¨1å·ï¼š192.168.22.130ï¼ˆä¸»åº“æœåŠ¡å™¨ï¼‰2.æœåŠ¡å™¨2å·ï¼š192.168.22.128ï¼ˆä»åº“æœåŠ¡å™¨ï¼‰ ä¸»åº“é…ç½®1234567vi /etc/my.cnf# é…ç½®ä¸»åº“æ ‡è¯†ï¼ˆè¿™é‡Œæ•°å­—éšæ„ï¼Œä½†æ˜¯ä¸€å®šè¦æ¯”ä»åº“é…ç½®çš„æ•°å­—å¤§ï¼Œå¿…é¡»æ˜¯æ•°å­—ï¼‰server_id=1# å¼€å¯æ—¥å¿—åŠŸèƒ½&amp;é…ç½®æ—¥å¿—æ–‡ä»¶log_bin=master_log# ä¿å­˜é€€å‡º&amp;é‡å¯mysqlæœåŠ¡systemctl restart mysqld é…ç½®ä»åº“è¿æ¥ç”¨æˆ·12345678910# ç™»é™†mysqlmysql -uroot -p# è¿›å…¥mysqlåº“use mysql# æ–°å¢ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”ç»‘å®šè¿™ä¸ªç”¨æˆ·åªèƒ½ä»192.168.22.128è¿™ä¸ªIPè®¿é—®grant all privileges on *.* to 'slave'@'192.168.22.128' identified by 'slave123' with grant option;# åˆ·æ–°æƒé™flush privileges;# è¿™é‡Œè¦æ³¨æ„ï¼ŒçœŸå®çš„æ­£å¼ç¯å¢ƒé…ç½®éœ€è¦è§„å®šä»åº“çš„è¿æ¥IPï¼Œä¸èƒ½è®¾ç½®ä¸º*ã€‚# å¯†ç ä¸èƒ½è®¾ç½®è¿‡äºç®€å•ï¼Œæœ€å°‘æ˜¯å­—æ¯å’Œæ•°å­—ç»„åˆçš„6ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ æŸ¥çœ‹ä¸»åº“çŠ¶æ€show master statusè¿™é‡Œçš„Fileå°±æ˜¯ä¸»åº“çš„binlogæ–‡ä»¶ã€‚ ä»åº“é…ç½®1234567891011121314151617181920vi /etc/my.cnf# è¿™é‡Œåªéœ€è¦é…ç½®ä¸€ä¸ªæ ‡è¯†å°±è¡Œ(ä¸€å®šè¦æ¯”ä¸»åº“çš„æ ‡è¯†æ•°å­—å°)server_id=2# é‡å¯mysqlæœåŠ¡systemctl restart mysqld# å…³é—­slavestop slave# ç»™ä»åº“é…ç½®ä¸»åº“å‚æ•°mysql&gt; change master to-&gt; master_host=\"ipåœ°å€\"ï¼Œ-&gt; master_user=\"æˆæƒæ—¶æŒ‡å®šçš„ç”¨æˆ·å\"ï¼Œ-&gt; master_password=\"ç”¨æˆ·å¯†ç \"ï¼Œ-&gt; master_log_file=\"binlogæ—¥å¿—\"ï¼Œ-&gt; master_log_pos=åç§»é‡ï¼›# é‡å¯ä»åº“æœåŠ¡start slave# æµ‹è¯•æ˜¯å¦æ­£å¸¸è¿æ¥show slave status \\G;# å¦‚æœæŠ¥é”™error connecting to master 'repluse@192.168.22.130:3306' - retry-time: 60 retries:1# è¯·æ£€æŸ¥å¯†ç æ˜¯ä¸æ˜¯é…ç½®é”™äº† æœ€åæµ‹è¯•åŒæ­¥å†ä¸»åº“åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨ï¼Œç„¶ååˆ·æ–°ä»åº“çœ‹çœ‹æ˜¯å¦åŒæ­¥æˆåŠŸã€‚ æ€»ç»“æ€»ä½“æµç¨‹ä¸‹æ¥å¾ˆç®€å•ã€æµç¨‹ä¹Ÿä¸å¤æ‚ã€å‡ºç°å¥‡æ€ªé—®é¢˜çš„å‡ ç‡å°ã€‚å¦‚æœåœ¨é…ç½®ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯åœ¨è¯„è®ºåŒºæé—®ï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´å›å¤ã€‚é¢„å‘Šï¼šä¸‹ä¸€ç¯‡æ˜¯è¯»å†™åˆ†ç¦»çš„é…ç½®","categories":[],"tags":[{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"http://www.daichongweb.com/tags/æ¶æ„/"}]},{"title":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶åŸºç¡€æ­å»ºç¯‡","slug":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶åŸºç¡€æ­å»ºç¯‡","date":"2019-11-12T02:18:09.000Z","updated":"2021-09-03T05:56:57.978Z","comments":true,"path":"æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶åŸºç¡€æ­å»ºç¯‡/","link":"","permalink":"http://www.daichongweb.com/æ¶æ„ä¹‹è·¯-mysqlä¸»ä»å¤åˆ¶åŸºç¡€æ­å»ºç¯‡/","excerpt":"å¼•è¨€æœ¬æ–‡ä»‹ç»çš„æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šæ­å»ºï¼Œå®é™…æƒ…å†µå…¶å®å’ŒçœŸæ­£çš„çº¿ä¸Šç¯å¢ƒä¸€æ¯›ä¸€æ ·ï¼Œä½¿ç”¨çš„ç³»ç»Ÿæ˜¯Centos 7ã€‚ ä»€ä¹ˆæ˜¯ä¸»ä»å¤åˆ¶ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿç­”ï¼šç®€å•ç‚¹ç†è§£ï¼Œä¸»ä»å¤åˆ¶å…¶å®å°±æ˜¯ä¸¤ä¸ªæ•°æ®åº“æ•°æ®çš„é¡¹ç›®å¤‡ä»½è¿‡ç¨‹ã€‚å…¶åŸç†å°±æ˜¯ä¸»åº“äº§ç”Ÿçš„æ“ä½œéƒ½ä¼šç”Ÿæˆbinlogä¼ å…¥ä»åº“ï¼Œä»åº“é€šè¿‡I/Oçº¿ç¨‹æŠŠbinlogå†™å…¥relaylogï¼Œç„¶åä»åº“åˆ›å»ºI/Oçº¿ç¨‹æ‰§è¡Œrelaylogè¿›è¡Œæ•°æ®å¤‡ä»½ã€‚","text":"å¼•è¨€æœ¬æ–‡ä»‹ç»çš„æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šæ­å»ºï¼Œå®é™…æƒ…å†µå…¶å®å’ŒçœŸæ­£çš„çº¿ä¸Šç¯å¢ƒä¸€æ¯›ä¸€æ ·ï¼Œä½¿ç”¨çš„ç³»ç»Ÿæ˜¯Centos 7ã€‚ ä»€ä¹ˆæ˜¯ä¸»ä»å¤åˆ¶ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿç­”ï¼šç®€å•ç‚¹ç†è§£ï¼Œä¸»ä»å¤åˆ¶å…¶å®å°±æ˜¯ä¸¤ä¸ªæ•°æ®åº“æ•°æ®çš„é¡¹ç›®å¤‡ä»½è¿‡ç¨‹ã€‚å…¶åŸç†å°±æ˜¯ä¸»åº“äº§ç”Ÿçš„æ“ä½œéƒ½ä¼šç”Ÿæˆbinlogä¼ å…¥ä»åº“ï¼Œä»åº“é€šè¿‡I/Oçº¿ç¨‹æŠŠbinlogå†™å…¥relaylogï¼Œç„¶åä»åº“åˆ›å»ºI/Oçº¿ç¨‹æ‰§è¡Œrelaylogè¿›è¡Œæ•°æ®å¤‡ä»½ã€‚ æµç¨‹å›¾ ä¸ºä»€ä¹ˆè¦åšä¸»ä»å¤åˆ¶ï¼Ÿç­”ï¼šä¸€æ–¹é¢æ˜¯ä¸ºäº†å¤‡ä»½æ•°æ®ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±å’Œç ´åï¼Œå¦ä¸€æ–¹é¢æ˜¯ä¸ºè¯»å†™åˆ†ç¦»åšé“ºå«ã€‚ æ­å»ºæ­¥éª¤æ–°å»ºè™šæ‹Ÿæœºé¦–å…ˆåœ¨æœ¬åœ°å®‰è£…è™šæ‹Ÿæœºï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæ¨è VMware Workstation Proï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨å…¶ä»–çš„ã€‚è™šæ‹Ÿæœºçš„å®‰è£…å°±ä¸åšä»‹ç»äº†ï¼Œæ— ééƒ½æ˜¯ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ã€‚å®‰è£…å¥½ä¹‹ååœ¨éœ€è¦ä¸‹è½½å¯¹ç”¨çš„ç³»ç»Ÿé•œåƒï¼Œå› ä¸ºæœ¬æ–‡ä¸»è¦æ˜¯åœ¨Centosä¸Šåšæ¼”ç¤ºï¼Œæ‰€ä»¥æˆ‘å°±ä¸‹è½½äº†Centosçš„é•œåƒï¼Œä½†æ˜¯æ— æ³•åˆ†äº«ç»™å¤§å®¶ï¼Œå› ä¸ºå¤ªå¤§äº†ï¼Œè¶³è¶³4Gã€‚ å®‰è£…å¥½ä¹‹åæ–°å»ºä¸¤ä¸ªè™šæ‹Ÿæœº(æ€ä¹ˆæ–°å»ºè™šæ‹Ÿæœºå°±ä¸åšä»‹ç»äº†): å®‰è£…mysqlæ³¨æ„ï¼šå°½é‡ä¸¤ä¸ªè™šæ‹Ÿæœºä¸Šçš„mysqlç‰ˆæœ¬ä¿æŒä¸€ç›´ï¼Œé¿å…å‡ºç°ä¸å¯é¢„çŸ¥çš„é”™è¯¯ã€‚æˆ‘å®‰è£…çš„ç‰ˆæœ¬æ˜¯5.7.1234567891011121314# è¿›å…¥cd /usr/local/src# ä¸‹è½½rpmåŒ…wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm# å®‰è£…rpmrpm -ivh mysql57-community-release-el7-11.noarch.rpm# å®‰è£… mysql-serveryum install -y mysql-server# å¯åŠ¨ systemctl start mysqld# è®¾ç½®å¼€æœºè‡ªå¯systemctl enable mysqld# ç™»é™†mysqlmysql -uroot -p å› ä¸º5.7ä¹‹åçš„ç‰ˆæœ¬éƒ½æ˜¯ç¦æ­¢åŒ¿åç™»é™†çš„ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹å¯†ç å¹¶ç™»é™†ï¼Œç„¶åä¿®æ”¹å¯†ç ï¼Œæˆ–è€…ç›´æ¥ä¿®æ”¹my.cnfæ¥ç¦æ­¢ç™»é™†éªŒè¯ã€‚1cat /var/log/mysqld.log|grep 'A temporary password' å› ä¸ºç³»ç»Ÿç»™æˆ‘çš„é»˜è®¤å¯†ç å«æœ‰ä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œæˆ‘æ²¡æ³•è¾“å…¥ï¼Œæˆ‘åªèƒ½ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼š12345678910vi \\etc\\my.cnf# åœ¨æœ€åå¢åŠ ä¸€è¡Œskip-grant-tables=1# ç™»é™†mysqlï¼Œåˆ·æ–°æƒé™flush privileges;# ä¿®æ”¹å¯†ç use mysql;update user set password='password' where user='root'ï¼›# ä¿®æ”¹æˆåŠŸåå†æ¬¡åˆ·æ–°æƒé™# æœ€åé‡å¯ä¸€ä¸‹mysqlæœåŠ¡ æœ¬åœ°è¿æ¥è™šæ‹Ÿæœºä¸Šçš„mysql123# æŸ¥çœ‹IPifconfig# åœ¨æœ¬åœ°Cmdä¸­pingè¿™ä¸ªIP ä½¿ç”¨telnetæµ‹è¯•mysqlè¿æ¥çŠ¶æ€1telnet 192.168.22.130 3360 é”™è¯¯çš„æƒ…å†µï¼ˆå› æˆ‘è¿™é‡Œæ˜¯å¥½çš„ï¼Œæ‰€ä»¥æˆ‘æŠŠ3306å¡«æˆäº†3360ï¼‰ æ£€æŸ¥è™šæ‹Ÿæœºæ˜¯å¦å®‰è£…äº†iptables123456789# å…³é—­é˜²ç«å¢™systemctl stop firewalld# ç¦æ­¢é˜²ç«å¢™systemctl mask firewalld# ç¦æ­¢å¼€æœºå¯åŠ¨systemctl disable firewalld# å¦‚æœå®åœ¨ä¸è¡Œï¼Œè¿˜è¦æŠŠselinuxå…³é—­vi /etc/selinux/configSELINUX=disabled å†æ¬¡ä½¿ç”¨telnet 192.168.22.130 3306è¿˜æ˜¯æŠ¥é”™ä¸Šè¾¹å›¾ç‰‡æ‰€ç¤ºæ—¶ã€‚ é…ç½®æƒé™12345# åˆ›å»ºä¸€ä¸ªç”¨æˆ·GRANT ALL PRIVILEGES ON *.* TO 'daichong'@'%' IDENTIFIED BY 'daichong' WITH GRANT OPTION;# åˆ·æ–°æƒé™FLUSH PRIVILEGES;# è¿™é‡Œæ³¨æ„çœŸå®çº¿ä¸Šæƒ…å†µæƒé™ä¸èƒ½è¿™ä¹ˆå¼€ å‡ºç°è¿™ä¸ªè¯´æ˜å·²ç»æˆåŠŸäº† ä½¿ç”¨navicatè¿æ¥ åˆ°è¿™é‡ŒåŸºç¡€çš„å®‰è£…å·²ç»å®Œæˆäº†ï¼Œå¦‚æœé‡åˆ°é—®é¢˜å¯åœ¨è¯„è®ºä¸­æé—®ï¼Œä¸‹ä¸€ç¯‡ä»‹ç»ä¸»ä»å¤åˆ¶å¦‚ä½•é…ç½®ã€‚","categories":[],"tags":[{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"http://www.daichongweb.com/tags/æ¶æ„/"}]},{"title":"laravelæ¨¡å‹å…³è”æŸ¥è¯¢ä¸JOINå“ªä¸ªæ€§èƒ½å¥½","slug":"laravelæ¨¡å‹å…³è”æŸ¥è¯¢ä¸JOINå“ªä¸ªæ€§èƒ½å¥½","date":"2019-11-08T08:34:03.000Z","updated":"2021-09-03T05:56:57.930Z","comments":true,"path":"laravelæ¨¡å‹å…³è”æŸ¥è¯¢ä¸JOINå“ªä¸ªæ€§èƒ½å¥½/","link":"","permalink":"http://www.daichongweb.com/laravelæ¨¡å‹å…³è”æŸ¥è¯¢ä¸JOINå“ªä¸ªæ€§èƒ½å¥½/","excerpt":"åˆå­¦Laravel æœ€è¿‘æ¥æ‰‹ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œæ•´ä¸ªé¡¹ç›®å®Œå…¨çœ‹ä¸åˆ°left joinè¿™æ ·çš„å†™æ³•ï¼Œæˆ‘æ‰“å°äº†æ¨¡å‹å…³è”æŸ¥è¯¢åçš„sqlåå‘ç°è·Ÿå¸¸æœ‰çš„æŸ¥è¯¢å†™æ³•å®Œå…¨ä¸åŒã€‚åŸè°…æˆ‘ä¸€ç›´æ˜¯ä¸ªç å†œï¼Œå‡ ä¹æ²¡è§è¿‡è¿™æ ·çš„å†™æ³•ï¼Œä¸€ç›´æƒ³å¯¹æ¯”ä¸€ä¸‹è¿™æ ·çš„å†™æ³•å’Œå¸¸ç”¨çš„å†™æ³•æ€§èƒ½æ–¹é¢åˆ°åº•æœ‰ä»€ä¹ˆå·®åˆ«ã€‚","text":"åˆå­¦Laravel æœ€è¿‘æ¥æ‰‹ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œæ•´ä¸ªé¡¹ç›®å®Œå…¨çœ‹ä¸åˆ°left joinè¿™æ ·çš„å†™æ³•ï¼Œæˆ‘æ‰“å°äº†æ¨¡å‹å…³è”æŸ¥è¯¢åçš„sqlåå‘ç°è·Ÿå¸¸æœ‰çš„æŸ¥è¯¢å†™æ³•å®Œå…¨ä¸åŒã€‚åŸè°…æˆ‘ä¸€ç›´æ˜¯ä¸ªç å†œï¼Œå‡ ä¹æ²¡è§è¿‡è¿™æ ·çš„å†™æ³•ï¼Œä¸€ç›´æƒ³å¯¹æ¯”ä¸€ä¸‹è¿™æ ·çš„å†™æ³•å’Œå¸¸ç”¨çš„å†™æ³•æ€§èƒ½æ–¹é¢åˆ°åº•æœ‰ä»€ä¹ˆå·®åˆ«ã€‚ä¸€ä¸ªå°æ —å­ æ¨¡å‹å…³è”ç”Ÿæˆçš„sql1select * from `comment` where exists (select * from `post_comment` where `comment`.`id` = `post_comment`.`comment_id` and `post_id` = ?) å¸¸ç”¨æŸ¥è¯¢1SELECT `comment`.id,`comment`.info,`comment`.user_id from `comment` left join post_comment on `comment`.id = `post_comment`.comment_id where post_comment.post_id = ? å•ä»sqlä¸Šçœ‹åŒºåˆ«è¿˜æ˜¯æŒºå¤§çš„ï¼Œå†åšç å†œçš„æœŸé—´ï¼Œæœ€å¸¸å¬åˆ°çš„å°±æ˜¯é“¾è¡¨æŸ¥è¯¢æ€§èƒ½ä¸å¥½ã€‚ä½†æ˜¯è¿˜çœŸä¸èƒ½ç¡®å®šè¿™ä¸¤ä¸ªsqlåˆ°åº•å“ªä¸ªæ€§èƒ½å¥½ä¸€ç‚¹ï¼Œæ²¡åŠæ³•åªèƒ½æµ‹è¯•ä¸€ä¸‹ã€‚ posts Tables id title time 1 æ¨¡å‹å…³è”æŸ¥è¯¢ 2019-11-08 2 left join æŸ¥è¯¢ 2019-11-08 comment Tables id info time 1 æ¨¡å‹å…³è”æŸ¥è¯¢çš„æ€§èƒ½å¥½ 2019-11-08 2 left join æŸ¥è¯¢çš„æ€§èƒ½å¥½ 2019-11-08 3 ä¸¤ä¸ªéƒ½æŒºå¥½ 2019-11-08 post_comment Tables id post_id comment_id 1 1 1 2 2 2 3 3 2 ä¸ºäº†é¿å…äº‰è®®ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›æ¯”è¾ƒåˆç†çš„æ•°æ®ã€‚ æ•°æ®é‡ posts comment post_comment 29999æ¡ 29999æ¡ 29999æ¡ ä¸‹é¢ä½¿ç”¨EXPLAINè¿›è¡Œåˆ†æ1EXPLAIN select * from `comment` where exists (select * from `post_comment` where `comment`.`id` = `post_comment`.`comment_id` and `post_id` = 2) select_type table partitions type PRIMARY comment NULL ALL DEPENDENT SUBQUERY post_comment NULL ref possible_keys key key_len ref NULL NULL NULL NULL post_id,comment_id post_id 5 const rows filtered Extra 29999 100.00 Using where 1 10.00 Using where 1EXPLAIN SELECT `comment`.id,`comment`.info,`comment`.user_id from `comment` left join post_comment on `comment`.id = `post_comment`.comment_id where post_comment.post_id = 2 select_type table partitions SIMPLE post_comment NULL SIMPLE comment NULL type possible_keys key key_len ref post_id,comment_id post_id 5 eq_ref PRIMARY PRIMARY 4 ref rows filtered Extra const 1 100.00 Using where test.post_comment.comment_id 1 100.00 NULL ä»ä¸Šè¾¹çš„EXPLAINç»“æœæ¥çœ‹ï¼Œleft joinæ¯”æ¨¡å‹å…³è”çš„å†™æ³•æ•ˆç‡é«˜å¤ªå¤šäº†ï¼Œä¹‹åæˆ‘åœ¨laravelç¤¾åŒºä¹Ÿå‘å¸ƒäº†ç›¸å…³çš„æé—®ï¼Œå¾—åˆ°çš„ç»“è®ºæ˜¯æ•°æ®é‡å¤§çš„æ—¶å€™ç”¨JOINï¼Œæ•°æ®é‡å°çš„æ—¶å€™ç”¨æ¨¡å‹ã€‚ ä»å¾—çš„çš„ç»“è®ºæ¥çœ‹ï¼Œæ¨¡å‹å¹¶é€‚åˆå¤§æ•°æ®æŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹ä¸€äº›æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œæä¾›äº†å¾ˆå¥½çš„æ•ˆæœï¼","categories":[],"tags":[{"name":"laravel","slug":"laravel","permalink":"http://www.daichongweb.com/tags/laravel/"}]},{"title":"laravelæ¨¡å‹å…³è”","slug":"laravelæ¨¡å‹å…³è”","date":"2019-11-06T09:30:11.000Z","updated":"2021-09-03T05:56:57.929Z","comments":true,"path":"laravelæ¨¡å‹å…³è”/","link":"","permalink":"http://www.daichongweb.com/laravelæ¨¡å‹å…³è”/","excerpt":"ä¸€å¯¹ä¸€ &emsp;ä»€ä¹ˆæ˜¯ä¸€å¯¹å¤šï¼Ÿ &emsp;åœ¨ç¨‹åºè§’åº¦è®²ï¼šä¸€å¯¹å¤šåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨æ¥æè¿°ä¸¤ä¸ªæ•°æ®è¡¨ä¹‹é—´çš„å…³ç³»ã€‚ &emsp;å‡è®¾ç°æœ‰ä¸¤ä¸ªæ•°æ®è¡¨ï¼šï¼ˆ1ï¼‰æ–‡ç« è¡¨posts ï¼ˆ2ï¼‰è¯„è®ºè¡¨commentã€‚ä¸€ä¸ªæ–‡ç« å¯ä»¥æœ‰å¤šä¸ªè¯„è®ºï¼Œä½†ä¸€ä¸ªè¯„è®ºåªèƒ½å±äºä¸€ä¸ªæ–‡ç« ï¼Œç›¸å¯¹äºè¯„è®ºæ¥è¯´å®ƒä¸æ–‡ç« çš„å…³ç³»æ˜¯å¤šå¯¹ä¸€ï¼Œç›¸å¯¹ä¸æ–‡ç« æ¥è¯´å®ƒä¸è¯„è®ºçš„å…³ç³»æ˜¯ä¸€å¯¹å¤šï¼Œè¿™ä¹Ÿå°±æ˜¯laravelé‡Œåå‘å…³è”çš„åŸºç¡€ã€‚ æ–‡ç« è¡¨posts idtitletime1ä»€ä¹ˆæ˜¯ä¸€å¯¹ä¸€ï¼Ÿ2019-11-072ä»€ä¹ˆæ˜¯ä¸€å¯¹å¤šï¼Ÿ2019-11-083ä»€ä¹ˆæ˜¯å¤šå¯¹å¤šï¼Ÿ2019-11-06","text":"ä¸€å¯¹ä¸€ &emsp;ä»€ä¹ˆæ˜¯ä¸€å¯¹å¤šï¼Ÿ &emsp;åœ¨ç¨‹åºè§’åº¦è®²ï¼šä¸€å¯¹å¤šåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨æ¥æè¿°ä¸¤ä¸ªæ•°æ®è¡¨ä¹‹é—´çš„å…³ç³»ã€‚ &emsp;å‡è®¾ç°æœ‰ä¸¤ä¸ªæ•°æ®è¡¨ï¼šï¼ˆ1ï¼‰æ–‡ç« è¡¨posts ï¼ˆ2ï¼‰è¯„è®ºè¡¨commentã€‚ä¸€ä¸ªæ–‡ç« å¯ä»¥æœ‰å¤šä¸ªè¯„è®ºï¼Œä½†ä¸€ä¸ªè¯„è®ºåªèƒ½å±äºä¸€ä¸ªæ–‡ç« ï¼Œç›¸å¯¹äºè¯„è®ºæ¥è¯´å®ƒä¸æ–‡ç« çš„å…³ç³»æ˜¯å¤šå¯¹ä¸€ï¼Œç›¸å¯¹ä¸æ–‡ç« æ¥è¯´å®ƒä¸è¯„è®ºçš„å…³ç³»æ˜¯ä¸€å¯¹å¤šï¼Œè¿™ä¹Ÿå°±æ˜¯laravelé‡Œåå‘å…³è”çš„åŸºç¡€ã€‚ æ–‡ç« è¡¨posts idtitletime1ä»€ä¹ˆæ˜¯ä¸€å¯¹ä¸€ï¼Ÿ2019-11-072ä»€ä¹ˆæ˜¯ä¸€å¯¹å¤šï¼Ÿ2019-11-083ä»€ä¹ˆæ˜¯å¤šå¯¹å¤šï¼Ÿ2019-11-06è¯„è®ºè¡¨commentidinfouser_id1æˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯ä¸€å¯¹ä¸€ã€‚100862æˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯ä¸€å¯¹å¤šã€‚100853æˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯å¤šå¯¹å¤šã€‚100844è¿™è°ä¸çŸ¥é“å•Šï¼10084 ä¸­é—´è¡¨posts_commentï¼ˆä¹Ÿå¯ä»¥å«åšå…³ç³»è¡¨ï¼‰ idpost_idcomment_id111222333434 &emsp;ä»è¡¨çš„ç»“æ„å¯ä»¥çœ‹å‡ºæ¥ï¼ŒID=1ã€2çš„æ–‡ç« åªæœ‰ä¸€æ¡è¯„è®ºï¼ŒID=3çš„æ–‡ç« æœ‰ä¸¤æ¡è¯„è®ºã€‚ &emsp;é‚£ä¹ˆè¿™æ˜¯è¦æœ‰ä¸ªä¸šåŠ¡ï¼Œå·²çŸ¥æ–‡ç« çš„ID=3ï¼Œè¯·ä½¿ç”¨laravelçš„æ¨¡å‹å…³è”æ‰¾å‡ºè¯¥æ–‡ç« ä¸‹çš„æ‰€æœ‰è¯„è®ºã€‚ &emsp;é¦–å…ˆç¡®è®¤ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä¸€ä¸ªè¯„è®ºåœ¨ä¸­é—´è¡¨åªæœ‰ä¸€æ¡æ•°æ®ï¼Œä¸­é—´è¡¨é‡Œçš„comment_idè‚¯å®šæ˜¯å”¯ä¸€çš„ï¼Œä¸å¯èƒ½å‡ºç°ä¸€ä¸ªè¯„è®ºåŒæ—¶å±äºä¸¤ä¸ªæ–‡ç« ï¼Œæ‰€ä»¥å®ƒä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€ã€‚ä½†æ˜¯ï¼Œä½ ä¼šå‘ç°ä½¿ç”¨hasMany(å¤šå¯¹å¤š)å…³è”æ–¹æ³•è·å–çš„æ•°æ®å±…ç„¶æ˜¯ä¸€æ ·çš„ã€‚ æ¨¡å‹å…³è”12345678910# ä¸€å¯¹å¤šå†™æ³•public function comments()&#123; return $this-&gt;hasMany(&apos;App\\Models\\PostComment&apos;, &apos;comment_id&apos;, &apos;id&apos;);&#125;# ä¸€å¯¹ä¸€å†™æ³•public function comment()&#123; return $this-&gt;hasOne(&apos;App\\Models\\PostComment&apos;, &apos;comment_id&apos;, &apos;id&apos;);&#125; æŸ¥è¯¢å†™æ³•ä½¿ç”¨ï¼ˆwithï¼‰12345678public function list()&#123; $postId = 3; $data = \\App\\Models\\Comment::with(&apos;comments&apos;)-&gt;whereHas(&quot;comments&quot;, function ($query) use ($postId) &#123; return $query-&gt;where(&quot;post_id&quot;, $postId); &#125;)-&gt;get(); dump($data-&gt;toArray());&#125; è·å–çš„æ•°æ®ç»“æœï¼ˆä½¿ç”¨withï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# with(&apos;comments);array:2 [â–¼ 0 =&gt; array:4 [â–¼ &quot;id&quot; =&gt; 3 &quot;info&quot; =&gt; &quot;\\tæˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯å¤šå¯¹å¤š&quot; &quot;user_id&quot; =&gt; 10084 &quot;comments&quot; =&gt; array:1 [â–¼ 0 =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 3 &quot;post_id&quot; =&gt; 3 &quot;comment_id&quot; =&gt; 3 ] ] ] 1 =&gt; array:4 [â–¼ &quot;id&quot; =&gt; 4 &quot;info&quot; =&gt; &quot;è¿™è°ä¸çŸ¥é“å•Šï¼&quot; &quot;user_id&quot; =&gt; 10084 &quot;comments&quot; =&gt; array:1 [â–¼ 0 =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 4 &quot;post_id&quot; =&gt; 3 &quot;comment_id&quot; =&gt; 4 ] ] ]]# with(&apos;comment);array:2 [â–¼ 0 =&gt; array:4 [â–¼ &quot;id&quot; =&gt; 3 &quot;info&quot; =&gt; &quot;\\tæˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯å¤šå¯¹å¤š&quot; &quot;user_id&quot; =&gt; 10084 &quot;comment&quot; =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 3 &quot;post_id&quot; =&gt; 3 &quot;comment_id&quot; =&gt; 3 ] ] 1 =&gt; array:4 [â–¼ &quot;id&quot; =&gt; 4 &quot;info&quot; =&gt; &quot;è¿™è°ä¸çŸ¥é“å•Šï¼&quot; &quot;user_id&quot; =&gt; 10084 &quot;comment&quot; =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 4 &quot;post_id&quot; =&gt; 3 &quot;comment_id&quot; =&gt; 4 ] ]] æ‰§è¡Œçš„SQLï¼ˆä½¿ç”¨withï¼‰12345678910111213# ä¸¤æ¬¡sqlæ˜¯ä¸€æ ·çš„array:2 [â–¼ 0 =&gt; array:3 [â–¼ &quot;query&quot; =&gt; &quot;select * from `comment` where exists (select * from `post_comment` where `comment`.`id` = `post_comment`.`comment_id` and `post_id` = ?)&quot; &quot;bindings&quot; =&gt; array:1 [â–¶] &quot;time&quot; =&gt; 12.67 ] 1 =&gt; array:3 [â–¼ &quot;query&quot; =&gt; &quot;select * from `post_comment` where `post_comment`.`comment_id` in (3, 4)&quot; &quot;bindings&quot; =&gt; [] &quot;time&quot; =&gt; 0.21 ]] &emsp;æˆ‘ä»¬åˆ†æä¸€ä¸‹laravelåº•å±‚çš„å¤„ç†é€»è¾‘ï¼Œä»ä¸Šè¾¹çš„sqlå¯ä»¥çœ‹å‡ºä½¿ç”¨æ¨¡å‹å…³è”ç¬¬ä¸€æ­¥ä¼šä½¿ç”¨ä¸€ä¸ªåµŒå¥—æŸ¥è¯¢æ‰¾å‡ºcommentåœ¨post_commenté‡Œå­˜åœ¨çš„ç»“æœé›†ï¼Œæœ€ç»ˆçš„å¾—åˆ°çš„ç»“æœæ˜¯3ã€4ã€‚éšåä¼šåšä¸€ä¸ªINæŸ¥è¯¢å¾—åˆ°æœ€ç»ˆcomment.id=3ã€4çš„æ•°æ®æœ€ååˆå¹¶æˆç»“æœé›†è¿”å›ã€‚ æŸ¥è¯¢å†™æ³•ä½¿ç”¨ï¼ˆä¸ä½¿ç”¨withï¼‰123456789public function list()&#123; $postId = 3; $data = \\App\\Models\\Comment::whereHas(&quot;comment&quot;, function ($query) use ($postId) &#123; return $query-&gt;where(&quot;post_id&quot;, $postId); &#125;)-&gt;get(); dump($data-&gt;toArray());&#125; æ‰§è¡Œçš„SQLï¼ˆä¸ä½¿ç”¨withï¼‰12345678# ä¸¤æ¬¡æ‰§è¡Œsqlä¹Ÿæ˜¯ä¸€æ ·çš„array:1 [â–¼ 0 =&gt; array:3 [â–¼ &quot;query&quot; =&gt; &quot;select * from `comment` where exists (select * from `post_comment` where `comment`.`id` = `post_comment`.`comment_id` and `post_id` = ?)&quot; &quot;bindings&quot; =&gt; array:1 [â–¶] &quot;time&quot; =&gt; 2.82 ]] æŸ¥è¯¢çš„ç»“æœï¼ˆä¸ä½¿ç”¨withï¼‰12345678910111213# å¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„array:2 [â–¼ 0 =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 3 &quot;info&quot; =&gt; &quot;\\tæˆ‘çŸ¥é“ä»€ä¹ˆæ˜¯å¤šå¯¹å¤š&quot; &quot;user_id&quot; =&gt; 10084 ] 1 =&gt; array:3 [â–¼ &quot;id&quot; =&gt; 4 &quot;info&quot; =&gt; &quot;è¿™è°ä¸çŸ¥é“å•Šï¼&quot; &quot;user_id&quot; =&gt; 10084 ]] &emsp;ä¸¤ç§å†™æ³•çš„ç«¯å¼‚æƒ³å¿…å¤§å®¶éƒ½èƒ½çœ‹å¾—å‡ºæ¥ï¼Œå°±ä¸å†ä»‹ç»äº†ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å‹å…³è”å‘¢ï¼Ÿ &emsp;å‡è®¾æŸä¸€ä¸ªæ–‡ç« è¢«è¯„è®ºäº†ï¼Œåœ¨ä¸ä½¿ç”¨æ¨¡å‹å…³è”çš„æƒ…å†µä¸‹éœ€è¦è¿™æ ·å†™ï¼š æ™®é€šå†™æ³•123456789$mode = new \\App\\Models\\Comment();$mode-&gt;info = &apos;æµ‹è¯•&apos;;$mode-&gt;user_id = 11;$mode-&gt;save();\\App\\Models\\PostComment::create([ &apos;post_id&apos; =&gt; 3, &apos;comment_id&apos; =&gt; $mode-&gt;id]); æ¨¡å‹å…³è”å†™æ³•12345678$mode = new \\App\\Models\\Comment();$mode-&gt;info = &apos;æµ‹è¯•&apos;;$mode-&gt;user_id = 11;$mode-&gt;save();$mode-&gt;comment()-&gt;create([ &apos;post_id&apos; =&gt; 3,]); &emsp;è€Œä¸”æˆ‘çš„å…¬å¸æœ‰è§„å®šä¸èƒ½ä½¿ç”¨left joinå†™æ³•ï¼Œè€Œä¸”æ¨¡å‹ä¸­ä¸å…è®¸å†™æœ‰å…³ä¸šåŠ¡çš„ä»£ç ï¼Œè¿™æ ·å¤§å¤§é™åˆ¶äº†éšå¿ƒæ‰€æ¬²å¼€å‘ï¼Œé™ä½äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚å¹¶ä¸”åœ¨ä½¿ç”¨æ¨¡å‹å…³è”åï¼Œä¸€åˆ‡çš„ä»£ç å˜å¾—ç®€å•äº†ï¼Œå¯è¯»æ€§æé«˜ï¼Œå€’æ˜¯æ€§èƒ½è¿™å—æˆ‘æ²¡æœ‰çœŸæ­£çš„æµ‹è¯•è¿‡ï¼Œä¹‹åè‚¯å®šä¼šç ”ç©¶ä¸€ä¸‹ã€‚","categories":[],"tags":[{"name":"laravel","slug":"laravel","permalink":"http://www.daichongweb.com/tags/laravel/"}]},{"title":"vue+elementå®æˆ˜ï¼ˆå…¥é—¨ç¯‡ ä¸€ï¼‰","slug":"vue-elementå®æˆ˜ï¼ˆå…¥é—¨ç¯‡ï¼‰","date":"2019-11-03T05:12:51.000Z","updated":"2021-09-03T05:56:57.966Z","comments":true,"path":"vue-elementå®æˆ˜ï¼ˆå…¥é—¨ç¯‡ï¼‰/","link":"","permalink":"http://www.daichongweb.com/vue-elementå®æˆ˜ï¼ˆå…¥é—¨ç¯‡ï¼‰/","excerpt":"æˆ‘ä¸ºä»€ä¹ˆä¼šå­¦vueï¼Ÿ &emsp;å­¦Vueä¹‹å‰ä¸€ç›´è§‰å¾—å®ƒå¥½éš¾ï¼Œé¦–å…ˆæºä»£ç çœ‹ä¸æ‡‚ï¼Œå¯¹äºæˆ‘ä¸€ä¸ªä¸»è¦æ˜¯åšPHPåç«¯æ¥è¯´ï¼Œçœ‹è§é‚£äº›importè¿˜æœ‰å“ªäº›èŠ±é‡Œèƒ¡å“¨çš„è¯­æ³•ï¼ŒçœŸçš„æ˜¯å¤ªéš¾çœ‹æ‡‚äº†ã€‚&emsp;åæ¥åœ¨æœºç¼˜å·§åˆçš„è¿›äº†ä¸€å®¶åå°æ˜¯ç”¨vue+elementæ­å»ºçš„å…¬å¸ï¼Œå› ä¸ºå…¬å¸çš„å‰ç«¯å°±ä¸€ä¸ªï¼Œå…³é”®è¿˜æ˜¯ä¸ªå¦¹å­ï¼Œä¹Ÿä¸å¥½æ„ç»™å¥¹å¢åŠ å·¥ä½œé‡ï¼ŒåŸºæœ¬ä¸Šç®¡ç†åå°çš„åç«¯ä»£ç å’Œå‰ç«¯ä»£ç éƒ½éœ€è¦æˆ‘æ¥å†™ã€‚ &emsp;å¥½åœ¨æ¡†æ¶å·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘åªéœ€è¦å†™ä¸€äº›æ•°æ®äº¤äº’å’Œæ•°æ®æ¸²æŸ“ã€‚ &emsp;æ›´æ·±å…¥çš„äº†è§£Vueçš„è®¾è®¡æ€æƒ³ç‚¹å‡»è¿™é‡Œï¼š Vueå®˜ç½‘ã€Vueè®¾è®¡æ€æƒ³ã€‚","text":"æˆ‘ä¸ºä»€ä¹ˆä¼šå­¦vueï¼Ÿ &emsp;å­¦Vueä¹‹å‰ä¸€ç›´è§‰å¾—å®ƒå¥½éš¾ï¼Œé¦–å…ˆæºä»£ç çœ‹ä¸æ‡‚ï¼Œå¯¹äºæˆ‘ä¸€ä¸ªä¸»è¦æ˜¯åšPHPåç«¯æ¥è¯´ï¼Œçœ‹è§é‚£äº›importè¿˜æœ‰å“ªäº›èŠ±é‡Œèƒ¡å“¨çš„è¯­æ³•ï¼ŒçœŸçš„æ˜¯å¤ªéš¾çœ‹æ‡‚äº†ã€‚&emsp;åæ¥åœ¨æœºç¼˜å·§åˆçš„è¿›äº†ä¸€å®¶åå°æ˜¯ç”¨vue+elementæ­å»ºçš„å…¬å¸ï¼Œå› ä¸ºå…¬å¸çš„å‰ç«¯å°±ä¸€ä¸ªï¼Œå…³é”®è¿˜æ˜¯ä¸ªå¦¹å­ï¼Œä¹Ÿä¸å¥½æ„ç»™å¥¹å¢åŠ å·¥ä½œé‡ï¼ŒåŸºæœ¬ä¸Šç®¡ç†åå°çš„åç«¯ä»£ç å’Œå‰ç«¯ä»£ç éƒ½éœ€è¦æˆ‘æ¥å†™ã€‚ &emsp;å¥½åœ¨æ¡†æ¶å·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘åªéœ€è¦å†™ä¸€äº›æ•°æ®äº¤äº’å’Œæ•°æ®æ¸²æŸ“ã€‚ &emsp;æ›´æ·±å…¥çš„äº†è§£Vueçš„è®¾è®¡æ€æƒ³ç‚¹å‡»è¿™é‡Œï¼š Vueå®˜ç½‘ã€Vueè®¾è®¡æ€æƒ³ã€‚ vueåˆ°åº•éš¾ä¸éš¾ï¼Ÿ &emsp;ä»æˆ‘çœŸæ­£æ¥è§¦vueæ¥è¯´ï¼Œæƒ³çœŸæ­£æŠŠvueæ‘¸é€ç¡®å®å¾ˆéš¾ï¼Œä½†æ˜¯åªæƒ³å­¦ä¼šæ€ä¹ˆç”¨vueæ­å»ºåå°ç®¡ç†ç³»ç»Ÿè¿™å€’ä¸éš¾ã€‚ &emsp;å½“ç„¶è¿™éœ€è¦ä½ æœ‰ç‚¹å‰ç«¯çš„åŸºç¡€ï¼ˆhtml\\css\\jsï¼‰ï¼Œåœ¨æ²¡æœ‰å‰ç«¯çš„åŸºç¡€æƒ…å†µä¸‹ï¼Œå…¥é—¨vueç¡®å®æœ‰ç‚¹éš¾ã€‚ æœ‰ä¸€å®šå‰ç«¯çš„åŸºç¡€çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆå¿«é€Ÿçš„å…¥é—¨vueï¼Ÿ &emsp;é¦–å…ˆä½ è¦çŸ¥é“vue+elementUiæˆ–è€…å…¶ä»–uiå¼€å‘çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ &emsp;ç®€å•çš„ä¸¾ä¸ªæ —å­ï¼š å°æ —å­1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;el-table :data=\"tableData\"&gt; &lt;el-table-column prop=\"date\" label=\"æ—¥æœŸ\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"name\" label=\"å§“å\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"address\" label=\"åœ°å€\"&gt;&lt;/el-table-column&gt; &lt;/el-table&gt; &lt;/template&gt; &lt;script&gt; export default &#123; data() &#123; return &#123; tableData: [&#123; date: '2016-05-02', name: 'ç‹å°è™', address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„' &#125;, &#123; date: '2016-05-04', name: 'ç‹å°è™', address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1517 å¼„' &#125;, &#123; date: '2016-05-01', name: 'ç‹å°è™', address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1519 å¼„' &#125;, &#123; date: '2016-05-03', name: 'ç‹å°è™', address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1516 å¼„' &#125;] &#125; &#125; &#125; &lt;/script&gt; &emsp;ä»ä»£ç å¯ä»¥çœ‹å‡ºTableçš„æ•°æ®æ¥æºæ˜¯Jsé‡ŒtableDataæ•°ç»„ï¼Œå®ƒä»¬æ˜¯é€šè¿‡Vueçš„ç‰¹æ€§åŒå‘ç»‘å®šæ¥å®ç°çš„:data=â€tableDataâ€ï¼Œå­—æ®µé€šè¿‡:prop=â€å­—æ®µåâ€ã€‚ &emsp;é‚£ä¹ˆåœ¨çœŸå®æ•°æ®äº¤äº’çš„æƒ…å†µä¸‹å°±è¿™ä¹ˆå†™ï¼š å°æ —å­12345678910111213141516171819202122232425&lt;script&gt; export default &#123; data() &#123; return &#123; tableData: [] &#125; &#125;, created() &#123; // é¡µé¢åˆ›å»ºåæ‰§è¡Œ this.getList(); // æŸ¥è¯¢æ•°æ® &#125;, methods: &#123; // æ–¹æ³•é›†åˆ getList()&#123; axios(&#123; // é¦–é€‰ä½ è¦å®‰è£… axios method:'get', url:'è¯·æ±‚åœ°å€' &#125;).then(function(resp)&#123; // è¯·æ±‚æˆåŠŸï¼ŒæŠŠæ•°æ®èµ‹å€¼ç»™tableData this.tableData = resp.data &#125;).catch(resp =&gt; &#123; // è¯·æ±‚å¤±è´¥ &#125;); &#125; &#125; &#125; &lt;/script&gt; &emsp;å°±è¿™ä¹ˆç®€å•ï¼Œvue+element+axiosæ•°æ®äº¤äº’å’Œæ¸²æŸ“å·²ç»å®Œæˆäº†ï¼","categories":[],"tags":[{"name":"vue","slug":"vue","permalink":"http://www.daichongweb.com/tags/vue/"}]},{"title":"Navicat Premium 12.1å®‰è£…ä¸æ¿€æ´»","slug":"Navicat-Premium-12-1å®‰è£…ä¸æ¿€æ´»","date":"2019-09-28T09:45:15.000Z","updated":"2021-09-03T05:56:57.877Z","comments":true,"path":"Navicat-Premium-12-1å®‰è£…ä¸æ¿€æ´»/","link":"","permalink":"http://www.daichongweb.com/Navicat-Premium-12-1å®‰è£…ä¸æ¿€æ´»/","excerpt":"å‰è¨€ &emsp;ï¼ˆ1ï¼‰å³å°†å›½åº†ï¼Œåœ¨æˆ‘å›è€å®¶ä¹‹å‰ç»™å¤§å®¶åˆ†äº«ä¸€æ³¢ç¦åˆ©ï¼ &emsp;ï¼ˆ2ï¼‰åç«¯å¼€å‘ç¦»ä¸å¼€æ•°æ®åº“çš„ç®¡ç†ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„ç®¡ç†æ•°æ®ï¼Œç»å¸¸ä¼šä½¿ç”¨ä¸€äº›æ•°æ®åº“ç®¡ç†å·¥ã€‚å¦‚phpMyAdminã€SQLyogã€Workbenchã€ Navicatç­‰ç­‰ã€‚ &emsp;ï¼ˆ3ï¼‰ä½†æˆ‘ä¸ªäººè§‰å¾—ä»UIã€åŠŸèƒ½ä¸Šæ¥è¯´æœ€ä¼˜çš„æ˜¯Navicatã€‚ &emsp;ï¼ˆ4ï¼‰å…·ä½“çš„åŠŸèƒ½å°±ä¸åšä»‹ç»äº†ï¼Œæœ¬ç¯‡å°±æ•™å¤§å®¶æ€ä¹ˆç ´è§£ä½¿ç”¨æœ€æ–°ç‰ˆçš„Navicatï¼Œè€Œä¸”æ˜¯ç ´è§£å®˜æ–¹ç‰ˆçš„å“¦ï¼Œç»å¯¹ä¸æ˜¯é‚£ç§ä»ä¹±ä¸ƒå…«ç³Ÿçš„ç½‘ç«™ä¸Šä¸‹è½½æ¥çš„ã€‚ &emsp;ï¼ˆ5ï¼‰å®‰å…¨å¯é ï¼Œå¥½ç”¨ï¼Œå®˜æ–¹æ”¶è´¹3ä¸ªæœˆ1699äººæ°‘å¸ï¼Œé©¬ä¸Šèƒ½å…è´¹ç”¨åˆ°ä»–ï¼Œæƒ³æƒ³å°±è§‰å¾—å…´å¥‹ã€‚","text":"å‰è¨€ &emsp;ï¼ˆ1ï¼‰å³å°†å›½åº†ï¼Œåœ¨æˆ‘å›è€å®¶ä¹‹å‰ç»™å¤§å®¶åˆ†äº«ä¸€æ³¢ç¦åˆ©ï¼ &emsp;ï¼ˆ2ï¼‰åç«¯å¼€å‘ç¦»ä¸å¼€æ•°æ®åº“çš„ç®¡ç†ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„ç®¡ç†æ•°æ®ï¼Œç»å¸¸ä¼šä½¿ç”¨ä¸€äº›æ•°æ®åº“ç®¡ç†å·¥ã€‚å¦‚phpMyAdminã€SQLyogã€Workbenchã€ Navicatç­‰ç­‰ã€‚ &emsp;ï¼ˆ3ï¼‰ä½†æˆ‘ä¸ªäººè§‰å¾—ä»UIã€åŠŸèƒ½ä¸Šæ¥è¯´æœ€ä¼˜çš„æ˜¯Navicatã€‚ &emsp;ï¼ˆ4ï¼‰å…·ä½“çš„åŠŸèƒ½å°±ä¸åšä»‹ç»äº†ï¼Œæœ¬ç¯‡å°±æ•™å¤§å®¶æ€ä¹ˆç ´è§£ä½¿ç”¨æœ€æ–°ç‰ˆçš„Navicatï¼Œè€Œä¸”æ˜¯ç ´è§£å®˜æ–¹ç‰ˆçš„å“¦ï¼Œç»å¯¹ä¸æ˜¯é‚£ç§ä»ä¹±ä¸ƒå…«ç³Ÿçš„ç½‘ç«™ä¸Šä¸‹è½½æ¥çš„ã€‚ &emsp;ï¼ˆ5ï¼‰å®‰å…¨å¯é ï¼Œå¥½ç”¨ï¼Œå®˜æ–¹æ”¶è´¹3ä¸ªæœˆ1699äººæ°‘å¸ï¼Œé©¬ä¸Šèƒ½å…è´¹ç”¨åˆ°ä»–ï¼Œæƒ³æƒ³å°±è§‰å¾—å…´å¥‹ã€‚ ä¸‹è½½&amp;å®‰è£… &emsp;ï¼ˆ1ï¼‰å®˜æ–¹æœ€æ–°ç‰ˆä¸‹è½½åœ°å€:Navicat Premium 12.1ã€‚ &emsp;ï¼ˆ2ï¼‰æ³¨å†Œæœºä¸‹è½½åœ°å€ï¼š Navicatæ³¨å†Œæœºã€‚ ç ´è§£ &emsp;ï¼ˆ2ï¼‰Navicat Premium 12.1å®‰è£…æ­¥éª¤å°±ä¸ä»‹ç»äº†ï¼Œç›´æ¥éƒ½nextå°±å¥½äº†ã€‚ &emsp;ï¼ˆ3ï¼‰å®‰è£…æ³¨å†Œæœºï¼ˆæŠŠæ€æ¯’è½¯ä»¶å…¨éƒ¨é€€å‡ºï¼‰ã€‚ &emsp;ï¼ˆ4ï¼‰é€‰æ‹©ä½ å¯¹åº”çš„ç‰ˆæœ¬ä¿¡æ¯å’Œè¯­è¨€ã€‚ &emsp;ï¼ˆ5ï¼‰ç‚¹å‡»Patché€‰æ‹©Navicatå®‰è£…ç›®å½•ä¸‹çš„navicat.exeã€‚ &emsp;ï¼ˆ6ï¼‰ç‚¹å‡»Generateç”Ÿæˆæ³¨å†Œç ã€‚ &emsp;ï¼ˆ7ï¼‰æŠŠæ³¨å†Œç å¤åˆ¶åˆ°è½¯ä»¶ä¸­ï¼Œç‚¹å‡»æ¿€æ´»ï¼Œè¿™é‡Œä¼šæç¤ºæ¿€æ´»å¤±è´¥ï¼Œç„¶åå’±ä»¬ç‚¹å‡»æ‰‹åŠ¨æ¿€æ´»ã€‚ &emsp;ï¼ˆ8ï¼‰æŠŠè¯·æ±‚ç å¤åˆ¶åˆ°æ³¨å†Œæœºä¸­ï¼Œå¦‚ä¸‹é¢çš„ä½ç½®ï¼Œç„¶åç‚¹å‡»Generateï¼ŒæŠŠè¿”å›çš„æ¿€æ´»ç å†å¤åˆ¶å›è½¯ä»¶ä¸­ï¼Œç‚¹å‡»æ¿€æ´»ã€‚ &emsp;ï¼ˆ9ï¼‰æ¿€æ´»æˆåŠŸã€‚ æœ€å &emsp;ç„¶åå°±å°½æƒ…çš„ä½¿ç”¨å§ï¼ï¼ï¼ï¼å“ˆå“ˆå“ˆã€‚","categories":[],"tags":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/tags/å¼€å‘å·¥å…·/"}]},{"title":"swoole+websocketå®ç°èŠå¤©å®¤åŠŸèƒ½","slug":"swoole+websocketå®ç°èŠå¤©å®¤åŠŸèƒ½","date":"2019-09-25T02:43:15.000Z","updated":"2021-09-03T05:56:57.965Z","comments":true,"path":"swoole+websocketå®ç°èŠå¤©å®¤åŠŸèƒ½/","link":"","permalink":"http://www.daichongweb.com/swoole+websocketå®ç°èŠå¤©å®¤åŠŸèƒ½/","excerpt":"åŸºç¡€ä»‹ç» &emsp;ï¼ˆ1ï¼‰Swooleæ˜¯ä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒçš„ PHP å¼‚æ­¥ç½‘ç»œé€šä¿¡å¼•æ“ï¼Œä½¿ PHP å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™é«˜æ€§èƒ½çš„å¼‚æ­¥å¹¶å‘ TCPã€UDPã€Unix Socketã€HTTPï¼ŒWebSocket æœåŠ¡ã€‚Swoole å¯ä»¥å¹¿æ³›åº”ç”¨äºäº’è”ç½‘ã€ç§»åŠ¨é€šä¿¡ã€ä¼ä¸šè½¯ä»¶ã€äº‘è®¡ç®—ã€ç½‘ç»œæ¸¸æˆã€ç‰©è”ç½‘ï¼ˆIOTï¼‰ã€è½¦è”ç½‘ã€æ™ºèƒ½å®¶å±…ç­‰é¢†åŸŸã€‚ ä½¿ç”¨ PHP + Swoole ä½œä¸ºç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå¯ä»¥ä½¿ä¼ä¸š IT ç ”å‘å›¢é˜Ÿçš„æ•ˆç‡å¤§å¤§æå‡ã€‚â€”ç™¾åº¦ç™¾ç§‘ &emsp;ï¼ˆ2ï¼‰WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼Œå¹¶ç”±RFC7936è¡¥å……è§„èŒƒã€‚WebSocket APIä¹Ÿè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚WebSocketä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ï¼Œå…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚ â€”ç™¾åº¦ç™¾ç§‘","text":"åŸºç¡€ä»‹ç» &emsp;ï¼ˆ1ï¼‰Swooleæ˜¯ä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒçš„ PHP å¼‚æ­¥ç½‘ç»œé€šä¿¡å¼•æ“ï¼Œä½¿ PHP å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™é«˜æ€§èƒ½çš„å¼‚æ­¥å¹¶å‘ TCPã€UDPã€Unix Socketã€HTTPï¼ŒWebSocket æœåŠ¡ã€‚Swoole å¯ä»¥å¹¿æ³›åº”ç”¨äºäº’è”ç½‘ã€ç§»åŠ¨é€šä¿¡ã€ä¼ä¸šè½¯ä»¶ã€äº‘è®¡ç®—ã€ç½‘ç»œæ¸¸æˆã€ç‰©è”ç½‘ï¼ˆIOTï¼‰ã€è½¦è”ç½‘ã€æ™ºèƒ½å®¶å±…ç­‰é¢†åŸŸã€‚ ä½¿ç”¨ PHP + Swoole ä½œä¸ºç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå¯ä»¥ä½¿ä¼ä¸š IT ç ”å‘å›¢é˜Ÿçš„æ•ˆç‡å¤§å¤§æå‡ã€‚â€”ç™¾åº¦ç™¾ç§‘ &emsp;ï¼ˆ2ï¼‰WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼Œå¹¶ç”±RFC7936è¡¥å……è§„èŒƒã€‚WebSocket APIä¹Ÿè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚WebSocketä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ï¼Œå…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚ â€”ç™¾åº¦ç™¾ç§‘ &emsp;ï¼ˆ3ï¼‰é‚£è¿™ç¯‡çš„ä¸»é¢˜å°±æ˜¯å¦‚ä½•ä½¿ç”¨Swoole+WebSocketå®ç°ä¸€ä¸ªç®€æ˜“çš„èŠå¤©å®¤ã€‚ &emsp;&emsp;ç†Ÿæ‚‰ç½‘ç»œé€šä¿¡åè®®çš„åŒå­¦è‚¯å®šä¸ä¼šé™Œç”Ÿã€‚ åŠŸèƒ½éœ€æ±‚åŠé—®é¢˜å¤„ç† &emsp;webç«¯ï¼š&emsp;&emsp;ï¼ˆ1ï¼‰æ¯æ¬¡åˆ·æ–°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ID(idå€¼ä»1å¼€å§‹).&emsp;&emsp;ï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è¿›å…¥ç½‘ç«™æ—¶ä¼šè¦æ±‚ç”¨æˆ·è®¾ç½®æ˜µç§°å¹¶ä¼šä¸IDè¿›è¡Œç»‘å®šã€‚&emsp;é—®é¢˜ç‚¹ï¼š&emsp;&emsp;ï¼ˆ1ï¼‰åˆ·æ–°é¡µé¢åç”¨æˆ·æ ‡è¯†ï¼ˆIDï¼‰ä¼šé‡æ–°ç”Ÿæˆï¼Œä¹‹å‰ç”ŸæˆIDè¢«å¼ƒç”¨ã€‚&emsp;&emsp;ï¼ˆ2ï¼‰websocketç”Ÿæˆäº†æ–°çš„ç”¨æˆ·ID,ä½†æ˜¯è·Ÿç°åœ¨çš„æ— æ³•å½¢æˆå…³è”å…³ç³»ã€‚ &emsp;serverç«¯ï¼š&emsp;ï¼ˆ1ï¼‰å½“ç”¨æˆ·è¿›å…¥èŠå¤©å®¤åï¼Œå‘é€å¹¿æ’­ç»™æ‰€æœ‰äººå¹¶åŠ å…¥èŠå¤©ç¾¤ç»„ï¼ˆä½¿ç”¨rediså­˜å‚¨ï¼‰ã€‚&emsp;ï¼ˆ2ï¼‰å½“ç”¨æˆ·é€€å‡ºç›´æ’­é—´åï¼Œå‘é€å¹¿æ’­ç»™æ‰€æœ‰äººå¹¶æ¸…é™¤è¯¥ç”¨æˆ·çš„è®°å½•ã€‚&emsp;ï¼ˆ3ï¼‰ç”¨æˆ·æ¯å‘é€ä¸€æ¬¡æ¶ˆæ¯éƒ½è¦å½¢æˆæ–°çš„è®°å½•å¹¿æ’­ç»™æ‰€æœ‰äººã€‚&emsp;ï¼ˆ4ï¼‰ç”¨æˆ·ç”Ÿæˆæ–°çš„æ˜µç§°åæŠŠæ˜µç§°æ¨é€ç»™ä»–ã€‚ &emsp;webç«¯é—®é¢˜å¤„ç†æ–¹æ³•ï¼š&emsp;ï¼ˆ1ï¼‰æµè§ˆå™¨åˆ·æ–°æ—¶æé†’ç”¨æˆ·åˆ·æ–°å³å°†é‡æ–°è·å¾—æ–°çš„èº«ä»½ã€‚&emsp;ï¼ˆ2ï¼‰ç”¨æˆ·è¿æ¥æˆåŠŸåè®°å½•ç”¨æˆ·name,æ¯æ¬¡è¿æ¥æŠŠè¿™ä¸ªnameå¸¦ä¸Šï¼Œæ¸…é™¤ä¹‹å‰è¯¥nameçš„ç»‘å®šå…³ç³»ï¼Œå½¢æˆæ–°çš„å…³ç³»ã€‚ æ¼”ç¤ºåœ°å€ &emsp;èŠå¤©å®¤æ¼”ç¤º ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687&lt;?phpinclude &quot;RedisManager.php&quot;;$server = new Swoole\\WebSocket\\Server(&quot;0.0.0.0&quot;, 8877);// å®¢æˆ·ç«¯è¿æ¥$server-&gt;on(&apos;open&apos;, function (Swoole\\WebSocket\\Server $server, $request) &#123; //è¿æ¥æˆåŠŸæŠŠå½“å‰åœ¨çº¿çš„ç”¨æˆ·è¿”å› $user_list = RedisConnect::getRedis()-&gt;hGetAll(&apos;message:user&apos;); alone($server, $request-&gt;fd, [ &apos;type&apos; =&gt; &apos;first&apos;, &apos;data&apos; =&gt; $user_list ]);&#125;);// æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯$server-&gt;on(&apos;message&apos;, function (Swoole\\WebSocket\\Server $server, $frame) &#123; $message_data = json_decode($frame-&gt;data, true); $type = $message_data[&apos;type&apos;]; $data = $message_data[&apos;user_name&apos;]; if (isset($message_data[&apos;send_message&apos;])) &#123; $user_message = $message_data[&apos;send_message&apos;]; &#125; switch ($type) &#123; case &apos;save_user&apos;: $new_name = &apos;å¤§å¦å•å­&apos; . $frame-&gt;fd . &apos;å·&apos;; // ä¿®æ”¹ç”¨æˆ·æ˜µç§° RedisConnect::getRedis()-&gt;hset(&apos;message:user&apos;, $frame-&gt;fd, $new_name); // æŠŠç”Ÿæˆçš„ç”¨æˆ·æ˜µç§°è¿”å›ç»™ä»– alone($server, $frame-&gt;fd, [ &apos;type&apos; =&gt; &apos;new_name&apos;, &apos;name&apos; =&gt; $new_name, &apos;id&apos; =&gt; $frame-&gt;fd ]); // å¹¿æ’­æ¶ˆæ¯ç»™å…¶ä»–ç”¨æˆ· groupSending($server, [ &apos;type&apos; =&gt; &apos;open&apos;, &apos;name&apos; =&gt; $new_name, &apos;id&apos; =&gt; $frame-&gt;fd ]); break; case &apos;send_message&apos;: $msg = [ &apos;id&apos; =&gt; $frame-&gt;fd, &apos;user_name&apos; =&gt; $data, &apos;message&apos; =&gt; $user_message, &apos;type&apos; =&gt; &apos;message&apos; ]; // æ¥å—ç”¨æˆ·å‘é€çš„æ¶ˆæ¯ RedisConnect::getRedis()-&gt;lpush(&apos;message:user:say&apos;, $msg); groupSending($server, $msg); break; &#125;&#125;);// é€€å‡ºèŠå¤©å®¤$server-&gt;on(&apos;close&apos;, function ($ser, $fd) &#123; $user = RedisConnect::getRedis()-&gt;hget(&apos;message:user&apos;, $fd); RedisConnect::getRedis()-&gt;hdel(&apos;message:user&apos;, $fd); $msg = [ &apos;id&apos; =&gt; $fd, &apos;user_name&apos; =&gt; $user, &apos;message&apos; =&gt; &apos;é€€å‡ºèŠå¤©å®¤&apos;, &apos;type&apos; =&gt; &apos;close&apos; ]; groupSending($ser, $msg, $fd);&#125;);// å¼€å¯æœåŠ¡$server-&gt;start();// ç¾¤å‘æ¶ˆæ¯function groupSending($server, $msg, $self = null)&#123; foreach ($server-&gt;connections as $conn) &#123; if ($conn == $self) break; //ä¸å†æ¨é€ç»™å½“å‰é€€å‡ºçš„ç”¨æˆ· $server-&gt;push($conn, json_encode($msg)); &#125;&#125;// å•ç‹¬å‘æ¶ˆæ¯function alone($server, $fd, $msg)&#123; $server-&gt;push($fd, json_encode($msg));&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;èŠå¤©å®¤&lt;/title&gt; &lt;style&gt; *&#123;margin:0;padding:0&#125;.box&#123;width:602px;height:500px;margin:20px auto&#125;.body&#123;width:500px;height:500px;border:1px solid #333;padding:20px;box-sizing:border-box;float:right&#125;.title&#123;text-align:center;margin-top:10px&#125;.msg&#123;margin-top:20px;width:100%;text-align:left&#125;.message_box&#123;width:100%;height:90%;margin-top:10px;font-size:12px;overflow:hidden;overflow-y:auto&#125;.name&#123;font-weight:bold&#125;.right&#123;text-align:right&#125;.prompt&#123;width:600px;margin:0 auto&#125;.live&#123;width:100px;height:500px;float:left;border:1px solid #333;font-size:12px;text-align:center&#125;.live-box&#123;height:100%;overflow:hidden;overflow-y:auto&#125;.live-box p&#123;margin-top:10px&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;box&quot;&gt; &lt;div class=&quot;body&quot;&gt; &lt;div class=&quot;title&quot;&gt;+++++++++++èŠå¤©å®¤++++++++++++&lt;/div&gt; &lt;div class=&quot;message_box&quot; id=&quot;test&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;live&quot;&gt; &lt;div class=&quot;live-title&quot;&gt;åœ¨çº¿äººæ•°&lt;/div&gt; &lt;div class=&quot;live-box&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;prompt&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;say&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;å‘é€&quot; id=&quot;send&quot;&gt; &lt;!-- &lt;input type=&quot;button&quot; value=&quot;å¢åŠ æ¶ˆæ¯&quot; id=&quot;add&quot;&gt; --&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt; window.onbeforeunload = function (event) &#123; window.localStorage.clear(); &#125;; $(function () &#123; window.user_name = &apos;&apos;; // è·å–åœ¨çº¿ç”¨æˆ· if (!(&quot;WebSocket&quot; in window)) &#123; alert(&quot;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ WebSocket!&quot;); return false; &#125; // è¿æ¥ let ws = new WebSocket(&quot;ws://49.235.172.110:8877&quot;); //è¿æ¥æˆåŠŸ ws.onopen = function (event) &#123; // ä¿®æ”¹æ˜µç§° let user_info = &#123; &apos;type&apos;: &apos;save_user&apos;, &apos;user_name&apos;: &apos;&apos;, &#125;; ws.send(JSON.stringify(user_info)); console.log(&apos;è¿æ¥æˆåŠŸ&apos;, &apos;ä¿®æ”¹æ˜µç§°æˆåŠŸ&apos;); &#125;; ws.onmessage = function (evt) &#123; let received_msg = JSON.parse(evt.data); let type = received_msg[&apos;type&apos;]; switch (type) &#123; case &apos;message&apos;: add_msg(received_msg); break; case &apos;close&apos;: $(&quot;.live-box&quot;).find(&apos;p[user=&apos; + received_msg[&apos;id&apos;] + &apos;]&apos;).remove(); break; case &apos;connect&apos;: console.log(received_msg); break; case &apos;new_name&apos;: user_name = received_msg[&apos;name&apos;]; break; case &apos;open&apos;: $(&apos;.live-box&apos;).append(&apos;&lt;p user=&quot;&apos; + received_msg[&apos;id&apos;] + &apos;&quot;&gt;&apos; + received_msg[&apos;name&apos;] + &apos;&lt;/p&gt;&apos;); break; case &apos;first&apos;: let data = received_msg[&apos;data&apos;]; let str = &apos;&apos;; $.each(data, function (k, v) &#123; if (isNaN(v)) &#123; str += &apos;&lt;p user=&quot;&apos; + k + &apos;&quot;&gt;&apos; + v + &apos;&lt;/p&gt;&apos;; &#125; &#125;) $(&apos;.live-box&apos;).append(str); break; &#125; &#125; // å‘é€æ¶ˆæ¯ $(&quot;#send&quot;).click(function () &#123; send_msg(); &#125;) $(&quot;input[name=say]&quot;).bind(&quot;keydown&quot;, function (e) &#123; var theEvent = e || window.event; var code = theEvent.keyCode || theEvent.which || theEvent.charCode; if (code == 13) &#123; send_msg(); &#125; &#125;); // å‘é€æ¶ˆæ¯ function send_msg() &#123; var message = $(&apos;input[name=say]&apos;).val(); if (message !== &apos; &apos;) &#123; var arr = &#123; &apos;type&apos;: &apos;send_message&apos;, &apos;user_name&apos;: user_name, &apos;send_message&apos;: message &#125;; ws.send(JSON.stringify(arr)); &#125; $(&apos;input[name=say]&apos;).val(&apos; &apos;); var ele = document.getElementById(&quot;test&quot;); if (ele.scrollHeight &gt; ele.clientHeight) &#123; ele.scrollTop = ele.scrollHeight + 100; &#125; &#125; // å¢åŠ æ¶ˆæ¯ function add_msg(data) &#123; let str = &apos;&lt;div class=&quot;msg&quot;&gt;&apos;; str += &apos;&lt;span class=&quot;name&quot;&gt;&apos; + data[&apos;user_name&apos;] + &apos;&lt;/span&gt;:&apos;; str += &apos;&lt;span class=&quot;text&quot;&gt;&apos; + data[&apos;message&apos;] + &apos;&lt;/span&gt;&lt;/div&gt;&apos;; $(&apos;.message_box&apos;).append(str); &#125; &#125;);&lt;/script&gt;&lt;/html&gt; æ€»ç»“ &emsp;è¿™ç¯‡æ–‡ç« åªæ˜¯ç®€å•çš„ä»‹ç»å‰åç«¯å¦‚ä½•å®ç°é€šä¿¡ï¼Œå¾ˆå¤šçš„ç»†èŠ‚é—®é¢˜æ²¡æœ‰è¿›è¡Œå¤„ç†ã€‚&emsp;UIæ¯”è¾ƒlowï¼Œè¿™é‡Œå¤§å®¶åªçœ‹ä»£ç å°±å¥½äº†â€¦&emsp;æ›´å¤šå…³äºSwooleçš„åŠŸèƒ½è¿˜å¾…æ¢ç´¢â€¦æ•¬è¯·æœŸå¾…â€¦","categories":[],"tags":[{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/tags/phpæ‰©å±•ç±»/"}]},{"title":"WEBæ€§èƒ½æµ‹è¯•-å¹¶å‘æµ‹è¯•","slug":"WEBæ€§èƒ½æµ‹è¯•-å¹¶å‘æµ‹è¯•","date":"2019-09-18T07:07:45.000Z","updated":"2021-09-03T05:56:57.894Z","comments":true,"path":"WEBæ€§èƒ½æµ‹è¯•-å¹¶å‘æµ‹è¯•/","link":"","permalink":"http://www.daichongweb.com/WEBæ€§èƒ½æµ‹è¯•-å¹¶å‘æµ‹è¯•/","excerpt":"å‰ç¯‡å›å¿†ï¼š &emsp;å‰ä¸¤ç¯‡ä»‹ç»äº†redisé˜Ÿåˆ—å¦‚ä½•å¤„ç†è®¢å•å’ŒJMeterçš„ç¯å¢ƒé…ç½®åŠå®‰è£…æ–¹æ³•ï¼Œè¿™ç¯‡æ ¹æ®ç¨‹åºå¼€å‘çš„é€»è¾‘å’Œä¹ æƒ¯æ¥è§£å†³å‡ ä¸ªé—®é¢˜ï¼š &emsp;&emsp;ï¼ˆ1ï¼‰JMeterå¹¶å‘æµ‹è¯•çš„åŸºæœ¬ä½¿ç”¨ã€‚&emsp;&emsp;ï¼ˆ2ï¼‰rediså’Œmysqlç›¸æ¯”çš„æ€§èƒ½å·®è·å¦‚ä½•ï¼Ÿ&emsp;&emsp;ï¼ˆ3ï¼‰å¤§é‡çš„å¹¶å‘å’Œè¯·æ±‚ä¸‹redisã€mysqlã€nginxå„è‡ªä¼šå‡ºç°çš„é—®é¢˜ï¼Ÿ&emsp;&emsp;ï¼ˆ4ï¼‰é‡åˆ°å¹¶å‘å¸¦æ¥å„ç§å„æ ·çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ","text":"å‰ç¯‡å›å¿†ï¼š &emsp;å‰ä¸¤ç¯‡ä»‹ç»äº†redisé˜Ÿåˆ—å¦‚ä½•å¤„ç†è®¢å•å’ŒJMeterçš„ç¯å¢ƒé…ç½®åŠå®‰è£…æ–¹æ³•ï¼Œè¿™ç¯‡æ ¹æ®ç¨‹åºå¼€å‘çš„é€»è¾‘å’Œä¹ æƒ¯æ¥è§£å†³å‡ ä¸ªé—®é¢˜ï¼š &emsp;&emsp;ï¼ˆ1ï¼‰JMeterå¹¶å‘æµ‹è¯•çš„åŸºæœ¬ä½¿ç”¨ã€‚&emsp;&emsp;ï¼ˆ2ï¼‰rediså’Œmysqlç›¸æ¯”çš„æ€§èƒ½å·®è·å¦‚ä½•ï¼Ÿ&emsp;&emsp;ï¼ˆ3ï¼‰å¤§é‡çš„å¹¶å‘å’Œè¯·æ±‚ä¸‹redisã€mysqlã€nginxå„è‡ªä¼šå‡ºç°çš„é—®é¢˜ï¼Ÿ&emsp;&emsp;ï¼ˆ4ï¼‰é‡åˆ°å¹¶å‘å¸¦æ¥å„ç§å„æ ·çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ é—®é¢˜ä¸€ï¼šJMeterå¹¶å‘æµ‹è¯•çš„åŸºæœ¬ä½¿ç”¨ &emsp;ï¼ˆ1ï¼‰è®¾ç½®ç³»ç»Ÿè¯­è¨€ï¼šOptions-&gt;Choose Lanuage é‡Œé€‰æ‹©é€‚åˆä½ çš„è¯­è¨€ã€‚&emsp;ï¼ˆ2ï¼‰æ·»åŠ çº¿ç¨‹ç»„ï¼š&emsp;ï¼ˆ3ï¼‰è®¾ç½®çº¿ç¨‹å±æ€§ï¼š&emsp;&emsp;çº¿ç¨‹æ•°ï¼šä¹Ÿå°±æ˜¯å¹¶å‘æ•°ã€‚&emsp;&emsp;Ramp-Upæ—¶é—´ï¼ˆç§’ï¼‰ï¼šå¹¶å‘æ—¶é—´ï¼Œ0ä¸ºåŒæ—¶å¹¶å‘ã€‚&emsp;&emsp;å¾ªç¯æ¬¡æ•°ï¼šé‡å¤æ¬¡æ•°ã€‚&emsp;ï¼ˆ4ï¼‰æ·»åŠ HTTPè¯·æ±‚ï¼š&emsp;&emsp;åè®®ï¼šhttpæˆ–httpsã€‚&emsp;&emsp;æœåŠ¡å™¨åç§°æˆ–IPï¼šè¯·æ±‚åœ°å€ã€‚&emsp;&emsp;è·¯å¾„ï¼šè¦è¯·æ±‚çš„è·¯ç”±æˆ–æ–‡ä»¶è·¯å¾„ã€‚&emsp;&emsp;å‚æ•°ï¼šæ·»åŠ è¯·æ±‚å‚æ•°ã€‚&emsp;ï¼ˆ5ï¼‰æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘ï¼šå¯æŸ¥çœ‹å‘é€çš„æ•°æ®ï¼Œè¿”å›çš„ç»“æœç­‰ã€‚&emsp;ï¼ˆ6ï¼‰æ·»åŠ æ±‡æ€»æŠ¥å‘Šï¼šå¯æŸ¥çœ‹é”™è¯¯ç‡ï¼Œååé‡ç­‰ã€‚ é—®é¢˜äºŒï¼šå¤§é‡çš„å¹¶å‘å’Œè¯·æ±‚ä¸‹redisã€mysqlã€nginxå„è‡ªä¼šå‡ºç°çš„é—®é¢˜ï¼Ÿ &emsp;åœ¨åŒæ—¶å¹¶å‘2000çš„æƒ…å†µä¸‹ï¼ˆå› ä¸ºredisé˜Ÿåˆ—ä¸ºå¼‚æ­¥ï¼Œæ‰€ä»¥è¿™é‡Œä¸è€ƒè™‘rediså‡ºåˆ—çš„æ€§èƒ½é—®é¢˜ï¼‰ï¼š&emsp;mysqlï¼šé”™è¯¯ç‡87.9%ï¼ŒæˆåŠŸæ¡æ•°241ã€‚&emsp;redisï¼šé”™è¯¯ç‡0.35%ï¼ŒæˆåŠŸæ¡æ•°1993ã€‚&emsp;æ€»ç»“ï¼šä»ä»¥ä¸Šç»“æœå¯ä»¥çœ‹å‡ºåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹msyqlæ‰›ä¸ä½å‹åŠ›é”™è¯¯ç‡é«˜ã€‚&emsp;ç»“è®ºï¼šredisåœ¨å¤„ç†å¹¶å‘æ€§èƒ½ä¼˜äºmysqlã€‚ é—®é¢˜ä¸‰ï¼šå¤§é‡çš„å¹¶å‘å’Œè¯·æ±‚ä¸‹redisã€mysqlã€nginxå„è‡ªä¼šå‡ºç°çš„é—®é¢˜ï¼Ÿ &emsp;3000å¹¶å‘å¾ªç¯è¯·æ±‚3æ¬¡ç›¸å½“äº9000çš„æ¬¡è¯·æ±‚çš„æƒ…å†µä¸‹ï¼š&emsp;&emsp;ï¼ˆ1ï¼‰nginxæŠ¥é”™ï¼šToo many open filesï¼ˆæ‰“å¼€çš„æ–‡ä»¶æ•°è¶…è¿‡é™åˆ¶nginxé»˜è®¤ä¸º1024ï¼‰ã€‚&emsp;&emsp;ï¼ˆ2ï¼‰redisæŠ¥é”™ï¼šRDB: 2 MB of memory used by copy-on-writeã€‚&emsp;&emsp;ï¼ˆ3ï¼‰mysqlç›´æ¥å†™å…¥å¤±è´¥ã€‚ é—®é¢˜å››ï¼šé‡åˆ°å¹¶å‘å¸¦æ¥å„ç§å„æ ·çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ &emsp;ï¼ˆ1ï¼‰nginxé”™è¯¯åˆ†æï¼šæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°è¶…è¿‡é™åˆ¶12345678# æŸ¥çœ‹ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶å€¼ Max open filescat /proc/`ps -ef | grep nginx|grep -v grep|head -1|awk &apos;&#123;print $2&#125;&apos;`/limits# ä¿®æ”¹vi /etc/systemd/ststem.conf# ä¿®æ”¹ä¸¤ä¸ªå€¼DefaultLimitNOFILE = 102400DefaultLimitNPROC = 102400# éšåé‡å¯ç³»ç»Ÿ&emsp;ï¼ˆ2ï¼‰redisé”™è¯¯åˆ†æï¼šä¿å­˜é¢‘ç¹å¯¼è‡´å†…å­˜ä¸å¤Ÿäº†ã€‚ï¼ˆæš‚æœªæ‰¾åˆ°æœ€åˆé€‚çš„æ–¹æ¡ˆï¼‰&emsp;ç‚¹å‡»æŸ¥çœ‹æ›´è¯¦ç»†çš„é”™è¯¯åˆ†æ:Redis-rediså¼‚å¸¸è§£å†³ä»¥åŠæ—¥å¸¸å‘½ä»¤ &emsp;ï¼ˆ3ï¼‰mysqlæš‚æ²¡æ‰¾åˆ°æ–¹æ¡ˆã€‚ æ€»ç»“ï¼š &emsp;ç›¸åŒçš„é…ç½®&amp;é«˜å¹¶å‘åœºæ™¯ä¸‹redisæ¯”mysqlè¦å¯é å¾ˆå¤šï¼Œä¼´éšç€å¹¶å‘è¶Šæ¥è¶Šé«˜æœåŠ¡å™¨ã€ç¨‹åºã€æ•°æ®åº“å„æ–¹é¢çš„é—®é¢˜æ‰‘é¢è€Œæ¥ï¼Œä¸è¦æ…Œï¼Œè¿™æ‰æ˜¯ä½ çœŸæ­£éœ€è¦å­¦ä¹ çš„ä¸œè¥¿ï¼ç”Ÿäºå¿§æ‚£æ­»äºå®‰ä¹ï¼Œåªæœ‰ä¸æ–­çš„å¤„ç†é—®é¢˜ï¼Œæ‰èƒ½çœŸæ­£çš„é©¾é©­ç¨‹åºï¼ç¥ä½ æ—©æ—¥æˆåŠŸï¼ï¼ï¼ &emsp;æœ¬æ–‡æœ€é«˜æµ‹è¯•å¹¶å‘åœ¨3000å¾ªç¯æ¬¡æ•°ä¸º3æ¬¡ï¼ŒæœåŠ¡å™¨ç¯å¢ƒä¸ºlnmrp,ç³»ç»Ÿé…ç½®ä¸º2æ ¸4G6M,å› ä¸ºredisçš„é—®é¢˜æ²¡æœ‰è§£å†³ä¸èƒ½åšæ›´é«˜çš„å¹¶å‘æµ‹è¯•ã€‚å¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªredisçš„é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå¾…æˆ‘ç ”ç©¶å‡ æ—¥è¯´ã€‚","categories":[],"tags":[{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://www.daichongweb.com/tags/æµ‹è¯•/"}]},{"title":"WEBæ€§èƒ½æµ‹è¯•-JMeterå®‰è£…","slug":"WEBæ€§èƒ½æµ‹è¯•-JMeterå®‰è£…","date":"2019-09-17T01:55:10.000Z","updated":"2021-09-03T05:56:57.888Z","comments":true,"path":"WEBæ€§èƒ½æµ‹è¯•-JMeterå®‰è£…/","link":"","permalink":"http://www.daichongweb.com/WEBæ€§èƒ½æµ‹è¯•-JMeterå®‰è£…/","excerpt":"ä¸€ã€äº†è§£JMeterå·¥å…· &emsp;Apache JMeteræ˜¯ Apacheç»„ç»‡çš„å¼€æ”¾æºä»£ç é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ª100%çº¯Javaæ¡Œé¢åº”ç”¨ï¼Œç”¨äºå‹åŠ›æµ‹è¯•å’Œæ€§èƒ½æµ‹é‡ã€‚å®ƒæœ€åˆè¢«è®¾è®¡ç”¨äºWebåº”ç”¨æµ‹è¯•ä½†åæ¥æ‰©å±•åˆ°å…¶å®ƒæµ‹è¯•é¢†åŸŸã€‚Apache JMeterå¯ä»¥ç”¨äºå¯¹é™æ€çš„å’ŒåŠ¨æ€çš„èµ„æºï¼ˆæ–‡ä»¶ï¼ŒServletï¼ŒPerlè„šæœ¬ï¼ŒJavaå¯¹è±¡ï¼Œæ•°æ®åº“å’ŒæŸ¥è¯¢ï¼ŒFTPæœåŠ¡å™¨æˆ–æ˜¯å…¶å®ƒèµ„æºï¼‰çš„æ€§èƒ½è¿›è¡Œæµ‹è¯•ã€‚JMeterå¯ä»¥ç”¨äºåœ¨æœåŠ¡å™¨ï¼Œç½‘ç»œæˆ–å¯¹è±¡æ¨¡æ‹Ÿç¹é‡çš„è´Ÿè½½æ¥æµ‹è¯•å®ƒä»¬æä¾›æœåŠ¡çš„å—å‹èƒ½åŠ›æˆ–è€…åˆ†æä¸åŒå‹åŠ›æ¡ä»¶ä¸‹çš„æ€»ä½“æ€§èƒ½æƒ…å†µã€‚ä½ å¯ä»¥ä½¿ç”¨JMeteræä¾›çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œåˆ†ææ€§èƒ½æŒ‡æ ‡æˆ–è€…åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹æµ‹è¯•ä½ çš„æœåŠ¡å™¨/è„šæœ¬/å¯¹è±¡ã€‚","text":"ä¸€ã€äº†è§£JMeterå·¥å…· &emsp;Apache JMeteræ˜¯ Apacheç»„ç»‡çš„å¼€æ”¾æºä»£ç é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ª100%çº¯Javaæ¡Œé¢åº”ç”¨ï¼Œç”¨äºå‹åŠ›æµ‹è¯•å’Œæ€§èƒ½æµ‹é‡ã€‚å®ƒæœ€åˆè¢«è®¾è®¡ç”¨äºWebåº”ç”¨æµ‹è¯•ä½†åæ¥æ‰©å±•åˆ°å…¶å®ƒæµ‹è¯•é¢†åŸŸã€‚Apache JMeterå¯ä»¥ç”¨äºå¯¹é™æ€çš„å’ŒåŠ¨æ€çš„èµ„æºï¼ˆæ–‡ä»¶ï¼ŒServletï¼ŒPerlè„šæœ¬ï¼ŒJavaå¯¹è±¡ï¼Œæ•°æ®åº“å’ŒæŸ¥è¯¢ï¼ŒFTPæœåŠ¡å™¨æˆ–æ˜¯å…¶å®ƒèµ„æºï¼‰çš„æ€§èƒ½è¿›è¡Œæµ‹è¯•ã€‚JMeterå¯ä»¥ç”¨äºåœ¨æœåŠ¡å™¨ï¼Œç½‘ç»œæˆ–å¯¹è±¡æ¨¡æ‹Ÿç¹é‡çš„è´Ÿè½½æ¥æµ‹è¯•å®ƒä»¬æä¾›æœåŠ¡çš„å—å‹èƒ½åŠ›æˆ–è€…åˆ†æä¸åŒå‹åŠ›æ¡ä»¶ä¸‹çš„æ€»ä½“æ€§èƒ½æƒ…å†µã€‚ä½ å¯ä»¥ä½¿ç”¨JMeteræä¾›çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œåˆ†ææ€§èƒ½æŒ‡æ ‡æˆ–è€…åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹æµ‹è¯•ä½ çš„æœåŠ¡å™¨/è„šæœ¬/å¯¹è±¡ã€‚äºŒã€JMeterçš„ä½œç”¨ &emsp;ï¼ˆ1ï¼‰èƒ½å¤Ÿå¯¹HTTPå’ŒFTPæœåŠ¡å™¨è¿›è¡Œå‹åŠ›å’Œæ€§èƒ½æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥å¯¹ä»»ä½•çš„æ•°æ®åº“è¿›è¡ŒåŒæ ·çš„æµ‹è¯•ï¼ˆé€šè¿‡JDBCï¼‰ã€‚ &emsp;ï¼ˆ2ï¼‰å®Œå…¨å¤šçº¿ç¨‹ æ¡†æ¶å…è®¸é€šè¿‡å¤šä¸ªçº¿ç¨‹å¹¶å‘å–æ ·å’Œ é€šè¿‡å•ç‹¬çš„çº¿ç¨‹ç»„å¯¹ä¸åŒçš„åŠŸèƒ½åŒæ—¶å–æ ·ã€‚ &emsp;ï¼ˆ3ï¼‰åœ¨è®¾è®¡é˜¶æ®µï¼ŒJMeterèƒ½å¤Ÿå……å½“HTTP PROXYï¼ˆä»£ç†ï¼‰æ¥è®°å½•IE/NETSCAPEçš„HTTPè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è®°å½•apacheç­‰WebServerçš„logæ–‡ä»¶æ¥é‡ç°HTTPæµé‡ã€‚å½“è¿™äº›HTTPå®¢æˆ·ç«¯è¯·æ±‚è¢«è®°å½•ä»¥åï¼Œæµ‹è¯•è¿è¡Œæ—¶å¯ä»¥æ–¹ä¾¿çš„è®¾ç½®é‡å¤æ¬¡æ•°å’Œå¹¶å‘åº¦ï¼ˆçº¿ç¨‹æ•°ï¼‰æ¥äº§ç”Ÿå·¨å¤§çš„æµé‡ã€‚JMeterè¿˜æä¾›å¯è§†åŒ–ç»„ä»¶ä»¥åŠæŠ¥è¡¨å·¥å…·æŠŠé‡æœåŠ¡å™¨åœ¨ä¸åŒå‹åŠ›ä¸‹çš„æ€§èƒ½å±•ç°å‡ºæ¥ã€‚ ä¸‰ã€å®‰è£… &emsp;ï¼ˆ1ï¼‰JMeteræ˜¯å®Œå…¨åŸºäºJAVAå¼€å‘ï¼Œé¦–å…ˆè¦å®‰è£… JAVA JDKã€‚ &emsp;ï¼ˆ2ï¼‰å®‰è£…JMeterå®¢æˆ·ç«¯ã€‚ å››ã€é…ç½®JAVAç¯å¢ƒå˜é‡ &emsp;ï¼ˆ1ï¼‰å³é”® â€œæˆ‘çš„ç”µè„‘\\å±æ€§â€(ç¬¬ä¸€æ­¥) æˆ– â€œæ§åˆ¶é¢æ¿\\æ‰€æœ‰æ§åˆ¶é¢æ¿é¡¹\\ç³»ç»Ÿâ€(ç¬¬ä¸€æ­¥) æ‰¾åˆ° â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€(ç¬¬äºŒæ­¥) ç‚¹å‡» â€œç¯å¢ƒå˜é‡â€(ç¬¬ä¸‰æ­¥)ã€‚ &emsp;ï¼ˆ2ï¼‰æ–°å»ºç¯å¢ƒå˜é‡JAVA_HOMEï¼Œå€¼ä¸ºJAVAå®‰è£…çš„æ ¹ç›®å½•ã€‚ &emsp;ï¼ˆ3ï¼‰æ–°å»ºç¯å¢ƒå˜é‡CLASSPATHï¼Œå€¼ä¸ºJAVAå®‰è£…ç›®å½•ä¸‹çš„lib/tools.jarå’Œlib/dt.jarã€‚ &emsp;ï¼ˆ4ï¼‰ä¿®æ”¹ç³»ç»Ÿå˜é‡çš„PATHå€¼ï¼Œå¢åŠ ä¸ºJAVAå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•ã€‚ äº”ã€é…ç½®JMeterç¯å¢ƒå˜é‡ &emsp;ï¼ˆ1ï¼‰æ–°å»ºç¯å¢ƒå˜é‡JMETER_HOMEï¼Œå€¼ä¸ºJMeterçš„æ ¹ç›®å½•ã€‚ &emsp;ï¼ˆ2ï¼‰ä¿®æ”¹CLASSPATHï¼Œå¢åŠ JMeter/lib/ApacheJMeter_core.jarå’Œlogkit-2.0.jarã€‚ &emsp;ï¼ˆ3ï¼‰æ‰¾åˆ°JMeter/bin/JMeter.batåŒå‡»æ‰“å¼€ï¼Œå¦‚å‡ºç°é”™è¯¯ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰JMeter/lib/ApacheJMeter_core.jarè¿™ä¸ªæ–‡ä»¶ï¼Œæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å°±æ˜¯å®‰è£…é”™è¯¯äº†ï¼Œé‡æ–°æ¢ä¸ªåŒ…å®‰è£…ã€‚ å…­ã€æ‰“å¼€æˆåŠŸæ¼”ç¤º &emsp;éšåä¼šè‡ªåŠ¨æ‰“å¼€JMeterå®¢æˆ·ç«¯ã€‚ ä¸ƒã€æ€»ç»“ &emsp;æ€»ä½“çš„å®‰è£…è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°±æ˜¯æ­¥éª¤ç¹å¤šï¼Œæ¯ä¸€ä¸ªæ­¥éª¤éƒ½ä¸èƒ½æ¼ï¼Œå¦åˆ™å°±ä¼šæ— æ³•ä½¿ç”¨ã€‚ &emsp;ä¸‹ä¸€ç¯‡å°†ä¼šä»‹ç»JMeterçš„åŸºæœ¬ä½¿ç”¨ã€‚","categories":[],"tags":[{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://www.daichongweb.com/tags/æµ‹è¯•/"}]},{"title":"æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆredisï¼‰-è®¢å•å¤„ç†","slug":"æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆredisï¼‰-è®¢å•å¤„ç†","date":"2019-09-16T03:20:32.000Z","updated":"2021-09-03T05:56:57.985Z","comments":true,"path":"æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆredisï¼‰-è®¢å•å¤„ç†/","link":"","permalink":"http://www.daichongweb.com/æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆredisï¼‰-è®¢å•å¤„ç†/","excerpt":"ä¸€ã€ç®€å•çš„ä»‹ç» &emsp;Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚&emsp;MySQLiæ˜¯ä¸€ä¸ªå¼€æºä½¿ç”¨çš„ MySQLè¿æ¥æ‰©å±•ï¼Œç”¨äºå¯¹æ•°æ®åº“çš„æ“ä½œå’Œç®¡ç†ã€‚&emsp;php-redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„phpæ‰©å±•ï¼Œç”¨äºphpè¿æ¥ã€ç®¡ç†redisã€‚","text":"ä¸€ã€ç®€å•çš„ä»‹ç» &emsp;Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚&emsp;MySQLiæ˜¯ä¸€ä¸ªå¼€æºä½¿ç”¨çš„ MySQLè¿æ¥æ‰©å±•ï¼Œç”¨äºå¯¹æ•°æ®åº“çš„æ“ä½œå’Œç®¡ç†ã€‚&emsp;php-redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„phpæ‰©å±•ï¼Œç”¨äºphpè¿æ¥ã€ç®¡ç†redisã€‚äºŒã€ä¸šåŠ¡ä»‹ç» &emsp;æŸå•†åŸæä¿ƒé”€æ´»åŠ¨ï¼Œä¼šæœ‰å¤§é‡çš„è®¢å•æ¶Œå…¥æ•°æ®åº“ï¼Œæ¯ä¸ªè®¢å•15åˆ†é’Ÿæœªæ”¯ä»˜å³ä¸ºè¿‡æœŸè®¢å•å¹¶ä¸”ä¸èƒ½ç»§ç»­æ”¯ä»˜ã€‚ äºŒã€éœ€æ±‚åˆ†æ &emsp;å¾ˆæ˜¾ç„¶æ­¤ä¸šåŠ¡éœ€æ±‚åœ¨ä¸ä½¿ç”¨redisé˜Ÿåˆ—çš„æƒ…å†µä¸‹ï¼Œå¤§é‡çš„è®¢å•å¹¶å‘ä¼šé€ æˆé˜»å¡ï¼Œç”šè‡³æœ‰å¯èƒ½è¶…æ—¶ï¼ˆphpé»˜è®¤çš„è¶…æ—¶æ—¶é—´ä¸º30sï¼‰ã€‚ &emsp;é‚£ä¹ˆå°±ä¼šæœ‰ä»¥ä¸‹æ­¥éª¤ï¼š&emsp;&emsp;ï¼ˆ1ï¼‰ç”¨æˆ·ä¸‹å•åæŠŠæ•°æ®ç›´æ¥å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆlistï¼‰è€Œä¸æ˜¯æ•°æ®åº“ï¼Œå†™å…¥é˜Ÿåˆ—æˆåŠŸå³è¿”å›ç”¨æˆ·æˆåŠŸæ¶ˆæ¯ã€‚&emsp;&emsp;ï¼ˆ2ï¼‰åˆ›å»ºè®¢å•é˜Ÿåˆ—ï¼šå¯åŠ¨è„šæœ¬æ¥å¤„ç†è®¢å•é˜Ÿåˆ—ï¼Œé€ä¸€å†™å…¥æ•°æ®åº“ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªkeyä¸ºè®¢å•å·çš„hashè¿‡æœŸæ—¶é—´ä¸º15åˆ†é’Ÿã€‚&emsp;&emsp;ï¼ˆ3ï¼‰ç”¨æˆ·æ”¯ä»˜æ—¶é¦–å…ˆæ‹¿è¿™ä¸ªè®¢å•å·å»redisé‡ŒæŸ¥æ˜¯å­˜åœ¨ï¼Œå¦‚å­˜åœ¨è®¢å•çŠ¶æ€ä¸ºæ­£å¸¸çŠ¶æ€ï¼Œå¦åˆ™ä¸ºè¿‡æœŸçŠ¶æ€ã€‚&emsp;&emsp;ï¼ˆ4ï¼‰è®¢å•æ”¯ä»˜æˆåŠŸé˜Ÿåˆ—ï¼šæ”¯ä»˜æˆåŠŸåï¼ŒæŠŠè®¢å•æ•°æ®å†™å…¥å¦ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¹¶å¯åŠ¨è„šæœ¬å¤„ç†è®¢å•çŠ¶æ€éƒ½ä¸ºâ€˜æ”¯ä»˜æˆåŠŸâ€™çš„é˜Ÿåˆ—ï¼ˆå¦‚å‘é€æ¶ˆæ¯ï¼Œä¿®æ”¹è®¢å•çŠ¶æ€ç­‰æ“ä½œï¼‰ã€‚ &emsp;æ³¨æ„ï¼šè¿™æœŸé—´å¯èƒ½ä¼šå‡ºç°æ•°æ®é‡è¿‡å¤§ï¼Œè®¢å•åˆ›å»ºçš„é˜Ÿåˆ—å°šæœªæ‰§è¡Œå®Œæ¯•ï¼Œè®¢å•æ”¯ä»˜æˆåŠŸåæŸ¥æ‰¾è¯¥è®¢å•å´æœªæ‰¾åˆ°(lpop)ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠè¿™ä¸ªæœªæ‰¾åˆ°çš„è®¢å•é‡æ–°æ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ€åï¼ˆrpushï¼‰ã€‚ ä¸‰ã€ä»£ç å®ç°&emsp;ï¼ˆ1ï¼‰åˆ›å»ºè®¢å•ï¼šcreate_order.php1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?phpinclude &quot;./RedisManager.php&quot;;/** * æ¨¡æ‹Ÿä¸‹å• */$post = $_POST;if (!empty($post)) &#123; // å£°æ˜çŠ¶æ€ $status = 0; $msg = &apos;error&apos;; $order = [ &apos;order_id&apos; =&gt; &apos;HD&apos; . time(), &apos;name&apos; =&gt; $post[&apos;name&apos;] . &apos;_&apos; . $post[&apos;id&apos;], &apos;price&apos; =&gt; $post[&apos;price&apos;], &apos;date&apos; =&gt; date(&apos;Y-m-d H:i:s&apos;) ]; // ç”¨æˆ·ä¸‹å•ä½†æœªæ”¯ä»˜åŠ å…¥é˜Ÿåˆ—ç­‰å¾…æ”¯ä»˜ return createOrder($order);&#125;/** * åˆ›å»ºè®¢å• createOrder * * @return void */function createOrder($order)&#123; try &#123; $orderList = &apos;order:temp:list&apos;; // ä¸´æ—¶è®¢å•åˆ—è¡¨ // æŠŠè®¢å•å†™å…¥é˜Ÿåˆ— å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ä¸€ä¸ª watch_order.php æ¥å¤„ç†è®¢å•æ¶ˆæ¯ $result = RedisConnect::getRedis()-&gt;lpush($orderList, json_encode($order)); // è®°å½•æ—¥å¿— if (!$result) &#123; createLog(&apos;è®¢å•å†™å…¥é˜Ÿåˆ—å¤±è´¥&apos;, $order); returnMsg(&apos;è®¢å•å†™å…¥é˜Ÿåˆ—å¤±è´¥&apos;); &#125; returnMsg(&apos;ä¸‹å•æˆåŠŸ&apos;, $order); &#125; catch (Exception $e) &#123; createLog($e-&gt;getMessage(), $order); returnMsg($e-&gt;getMessage()); &#125;&#125;/** * å†™å…¥æ—¥å¿— createLog * * @param string $msg * @param array $data * @return void */function createLog(string $msg, array $data = [])&#123; $orderMsg = &apos;order:msg&apos;; // è®¢å•æ¶ˆæ¯ $data[&apos;errorMsg&apos;] = $msg; $data[&apos;errorTime&apos;] = date(&apos;Y-m-d H:i:s&apos;); RedisConnect::getRedis()-&gt;select(1); RedisConnect::getRedis()-&gt;lPush($orderMsg, json_encode($data));&#125;/** * è¾“å‡ºæ¶ˆæ¯ returnMsg * * @param string $msg * @param array $data * @return void */function returnMsg(string $msg, array $data = [])&#123; echo json_encode([ &apos;status&apos; =&gt; 200, &apos;message&apos; =&gt; $msg, &apos;data&apos; =&gt; $data ]); exit;&#125; &emsp;ï¼ˆ2ï¼‰è®¢å•å…¥åº“insert_db.phpï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼‰1234567891011121314151617181920212223242526272829303132333435&lt;?phpini_set(&apos;default_socket_timeout&apos;, -1);include &apos;./RedisManager.php&apos;;include &apos;./MysqlManager.php&apos;;$orderExpire = &apos;order:temp:list&apos;;while (true) &#123; try &#123; $orderList = &apos;order:temp:list&apos;; // ä¸´æ—¶è®¢å•åˆ—è¡¨ if (RedisConnect::getRedis()-&gt;lSize($orderList) &lt; 1) &#123; var_dump(&apos;è®¢å•å·²å¤„ç†å®Œæ¯•&apos;) . &apos;\\n&apos;; sleep(1); &#125; // å¤„ç†æ¶ˆæ¯ $order = RedisConnect::getRedis()-&gt;lPop($orderList); if ($order) &#123; $order = json_decode($order, true); $order_id = $order[&apos;order_id&apos;]; $name = $order[&apos;name&apos;]; $price = $order[&apos;price&apos;]; $sql = &quot;INSERT INTO `order`(`order_id`,`name`,`price`) VALUES(&apos;&#123;$order_id&#125;&apos;,&apos;&#123;$name&#125;&apos;,&#123;$price&#125;)&quot;; $result = MysqlConnect::getMysql()-&gt;query($sql); //ç»™æ¯ä¸€ä¸ªè®¢å•è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ $expireResult = RedisConnect::getRedis()-&gt;hMset($orderExpire . &apos;:&apos; . $order[&apos;order_id&apos;], $order); RedisConnect::getRedis()-&gt;expire($orderExpire . &apos;:&apos; . $order[&apos;order_id&apos;], 900); var_dump($result) . &apos;\\n&apos;; &#125; else &#123; sleep(1); &#125; &#125; catch (Exception $e) &#123; echo $e-&gt;getMessage(); &#125;&#125;&emsp;ï¼ˆ3ï¼‰ç›‘å¬è¿‡æœŸçš„è®¢å•watch_order.phpï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼‰123456789101112131415161718192021222324252627&lt;?phpini_set(&apos;default_socket_timeout&apos;, -1);include &apos;./RedisManager.php&apos;;include &apos;./MysqlManager.php&apos;;RedisConnect::getRedis()-&gt;psubscribe(array(&apos;__keyevent@0__:expired&apos;), &apos;keyCallback&apos;);function keyCallback($redis, $pattern, $channel, $message)&#123; // æŠŠè¿‡æœŸçš„è®¢å•å†™å…¥é˜Ÿåˆ—è¿›è¡Œå¤„ç†ï¼ˆè¿™é‡Œå¯ä»¥å¤„ç†ä¸ºä¸åŒçš„è®¢å•å†™å…¥ä¸åŒçš„é˜Ÿåˆ—ï¼‰ $msgType = [ &apos;HD&apos; =&gt; &apos;home:order&apos;, // ä½æˆ¿è®¢å• &apos;DD&apos; =&gt; &apos;ding:order&apos; // é¤é¥®è®¢å• ]; $keyArr = explode(&apos;:&apos;, $message); $key = array_pop($keyArr); $id = substr($key, 0, 2); switch($id)&#123; case &apos;HD&apos;: $sql = &quot;UPDATE `order` SET `status` = 1 WHERE `order_id` = &apos;&#123;$key&#125;&apos;&quot;; break; &#125; $result = MysqlConnect::getMysql()-&gt;query($sql); var_dump($result);&#125;&emsp;ï¼ˆ4ï¼‰æ”¯ä»˜æˆåŠŸåçš„è®¢å•å¤„ç†success_order.phpï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼‰&emsp;&emsp;ä»£ç ä¸Šè¾¹ä»£ç ä¸€æ ·ä¸åšå±•ç¤ºã€‚ &emsp;ï¼ˆ5ï¼‰å¦å¤–å¯å¢åŠ æ—¥å¿—é˜Ÿåˆ—å¤„ç†æ¥å‘é€é”™è¯¯é‚®ä»¶ç»™ç®¡ç†å‘˜send_error_mail.phpï¼ˆä»¥å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼‰&emsp;&emsp;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ å››ã€æ€»ç»“ &emsp;æœ¬æ–‡åªæ˜¯åšä¸šåŠ¡åˆ†æï¼Œæœªåœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­è¿›è¡Œå®ç°ï¼Œå¦‚æœ‰é”™è¯¯è¿˜è¯·å¤šå¤šæŒ‡æ­£ã€‚&emsp;ä¸‹ä¸€ç¯‡å¯èƒ½ä¼šå†™åˆ©ç”¨Jmeteræ¥åˆ†æè¯¥ä¸šåŠ¡ä»£ç çš„æ•ˆç‡æ€§èƒ½ç­‰é—®é¢˜ã€‚","categories":[],"tags":[{"name":"redis","slug":"redis","permalink":"http://www.daichongweb.com/tags/redis/"}]},{"title":"è§£å†³nginxå¾ªç¯é‡å®šå‘é—®é¢˜","slug":"è§£å†³nginxå¾ªç¯é‡å®šå‘é—®é¢˜","date":"2019-09-09T03:12:07.000Z","updated":"2021-09-03T05:56:57.987Z","comments":true,"path":"è§£å†³nginxå¾ªç¯é‡å®šå‘é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/è§£å†³nginxå¾ªç¯é‡å®šå‘é—®é¢˜/","excerpt":"ä¸€ã€ä»€ä¹ˆæ˜¯é‡å®šå‘ã€å¾ªç¯é‡å®šå‘ &emsp;ï¼ˆ1ï¼‰é‡å®šå‘æ˜¯æŒ‡æµè§ˆå™¨å…ˆè®¿é—®äº†æœåŠ¡å™¨Aï¼Œç„¶åæœåŠ¡å™¨Aå¸¦ç€è¯·æ±‚çš„å‚æ•°ï¼ˆheaderã€çŠ¶æ€ç 3xxï¼‰è¿”å›åˆ°åœ°å€ä¸ºBçš„æœåŠ¡å™¨ä¸Šã€‚&emsp;ï¼ˆ2ï¼‰å¾ªç¯é‡å®šå‘æ˜¯æŒ‡æœåŠ¡å™¨Aé‡å®šå‘åˆ°äº†æœåŠ¡å™¨Bï¼ŒæœåŠ¡å™¨Bç”±äºæŸç§åŸå› åˆé‡å®šå‘åˆ°äº†Aï¼Œè¿™æ ·å°±æ„æˆäº†é‡å®šå‘å¾ªç¯ã€‚ äºŒã€3xxé‡å®šå‘çŠ¶æ€ç  &emsp;ï¼ˆ1ï¼‰301(Move Permanently)ï¼šæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«åˆ†é…äº†æ–°çš„URIï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªï¼ˆgetï¼‰ã€‚&emsp;ï¼ˆ2ï¼‰302(Found)ï¼šä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«åˆ†é…äº†æ–°çš„URIï¼Œæœ¬æ¬¡ä½¿ç”¨è¿™ä¸ªï¼ˆgetï¼Œå…è®¸ç¼“å­˜ï¼‰ã€‚&emsp;ï¼ˆ3ï¼‰303(See Other)ï¼šè¯·æ±‚èµ„æºå­˜åœ¨å¦ä¸€ä¸ªURIï¼Œåº”ä½¿ç”¨getæ–¹æ³•è·å–è¯·æ±‚èµ„æºã€‚&emsp;ï¼ˆ4ï¼‰307(Temporary Redirect)ï¼šç±»ä¼¼äº302ï¼Œåªæ˜¯302çš„POSTæ–¹æ³•ä¼šå˜ä¸ºGETï¼Œè€Œ307çš„ä¸ä¼šã€‚","text":"ä¸€ã€ä»€ä¹ˆæ˜¯é‡å®šå‘ã€å¾ªç¯é‡å®šå‘ &emsp;ï¼ˆ1ï¼‰é‡å®šå‘æ˜¯æŒ‡æµè§ˆå™¨å…ˆè®¿é—®äº†æœåŠ¡å™¨Aï¼Œç„¶åæœåŠ¡å™¨Aå¸¦ç€è¯·æ±‚çš„å‚æ•°ï¼ˆheaderã€çŠ¶æ€ç 3xxï¼‰è¿”å›åˆ°åœ°å€ä¸ºBçš„æœåŠ¡å™¨ä¸Šã€‚&emsp;ï¼ˆ2ï¼‰å¾ªç¯é‡å®šå‘æ˜¯æŒ‡æœåŠ¡å™¨Aé‡å®šå‘åˆ°äº†æœåŠ¡å™¨Bï¼ŒæœåŠ¡å™¨Bç”±äºæŸç§åŸå› åˆé‡å®šå‘åˆ°äº†Aï¼Œè¿™æ ·å°±æ„æˆäº†é‡å®šå‘å¾ªç¯ã€‚ äºŒã€3xxé‡å®šå‘çŠ¶æ€ç  &emsp;ï¼ˆ1ï¼‰301(Move Permanently)ï¼šæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«åˆ†é…äº†æ–°çš„URIï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªï¼ˆgetï¼‰ã€‚&emsp;ï¼ˆ2ï¼‰302(Found)ï¼šä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«åˆ†é…äº†æ–°çš„URIï¼Œæœ¬æ¬¡ä½¿ç”¨è¿™ä¸ªï¼ˆgetï¼Œå…è®¸ç¼“å­˜ï¼‰ã€‚&emsp;ï¼ˆ3ï¼‰303(See Other)ï¼šè¯·æ±‚èµ„æºå­˜åœ¨å¦ä¸€ä¸ªURIï¼Œåº”ä½¿ç”¨getæ–¹æ³•è·å–è¯·æ±‚èµ„æºã€‚&emsp;ï¼ˆ4ï¼‰307(Temporary Redirect)ï¼šç±»ä¼¼äº302ï¼Œåªæ˜¯302çš„POSTæ–¹æ³•ä¼šå˜ä¸ºGETï¼Œè€Œ307çš„ä¸ä¼šã€‚ä¸‰ã€æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ123456789101112server &#123; listen 80; server_name www.daichongweb.cn; root /site/hexo/public; index index.html; # è¿™æ®µæ˜¯äº§ç”Ÿå¾ªç¯é‡å®šå‘çš„åŸå›  # å½“æµè§ˆå™¨è®¿é—® www.daichongweb.cn æ—¶å‘ç°ä¸æ˜¯httpså°±ä¼šè¿›è¡Œé‡å®šå‘ï¼Œ # ä½†é‡å®šå‘åˆ°httpsä¹‹ååˆæ²¡æœ‰åˆ¤æ–­æ˜¯å¦æ˜¯httpsï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç¦æ­¢è·³è½¬ï¼Œæœ€ç»ˆé€ æˆäº†å¾ªç¯ return 301 https://$host$request_uri;&#125; å››ã€æ€ä¹ˆè§£å†³ï¼Ÿ12345678910111213server &#123; listen 80; server_name www.daichongweb.cn; root /site/hexo/public; index index.html; # é€šè¿‡ä¸Šé¢çš„è§£é‡Šé€»è¾‘å°±å˜å¾—ç›¸å¯¹ç®€å•äº†ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªåˆ¤æ–­å°±å¯ä»¥è§£å†³ if ($scheme = http) &#123; return 301 https://$host$request_uri; &#125;&#125; å››ã€æ€»ç»“ &emsp;åœ¨é¡¹ç›®å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°é‡å®šå‘ï¼Œè®¤è¯†æ¯”è¾ƒå¸¸è§çš„çŠ¶æ€ç å¯¹ç½‘ç»œè¯·æ±‚çš„åˆ¤æ–­åˆå¾ˆå¤§å¸®åŠ©ã€‚","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://www.daichongweb.com/tags/linux/"}]},{"title":"Centos7.6æ­å»ºlnmpç¯å¢ƒ","slug":"Centos7.6æ­å»ºlnmpç¯å¢ƒ","date":"2019-09-07T09:39:48.000Z","updated":"2021-09-03T05:56:57.858Z","comments":true,"path":"Centos7.6æ­å»ºlnmpç¯å¢ƒ/","link":"","permalink":"http://www.daichongweb.com/Centos7.6æ­å»ºlnmpç¯å¢ƒ/","excerpt":"ä¸€ã€å‰è¨€ &emsp;æ­å»ºç¨‹åºè¿è¡Œç¯å¢ƒæ˜¯ç¨‹åºå‘˜å¿…ä¸å¯å°‘çš„æŠ€èƒ½ï¼&emsp;ä»Šå¤©ä¹°äº†ä¸ªæ–°çš„äº‘æœåŠ¡å™¨ï¼Œéœ€è¦æ­å»ºç¯å¢ƒï¼Œå€Ÿæ­¤æœºä¼šè‡ªå·±ä¹Ÿç†Ÿæ‚‰äº†ä¸€ç•ªæ­å»ºçš„æµç¨‹ï¼Œåšä¸ªæ—¥è®°ä¾›ä»¥åå‚è€ƒã€‚&emsp;æœ¬ç¯‡å¤§éƒ¨åˆ†å‘½ä»¤ä»…é€‚åˆCentos7.xçš„ç³»ç»Ÿä½¿ç”¨ã€‚&emsp;lnmpæ˜¯æŒ‡Liunxã€Nginxã€Mysqlå’ŒPhpã€‚ &emsp;ç›®å½•ï¼š&emsp;ï¼ˆ1ï¼‰å®‰è£…Nginx1.4ã€‚&emsp;ï¼ˆ2ï¼‰å®‰è£…php7.2ã€‚&emsp;ï¼ˆ3ï¼‰å®‰è£…Mariadb10.2ã€‚&emsp;ï¼ˆ4ï¼‰æ€»ç»“ã€‚","text":"ä¸€ã€å‰è¨€ &emsp;æ­å»ºç¨‹åºè¿è¡Œç¯å¢ƒæ˜¯ç¨‹åºå‘˜å¿…ä¸å¯å°‘çš„æŠ€èƒ½ï¼&emsp;ä»Šå¤©ä¹°äº†ä¸ªæ–°çš„äº‘æœåŠ¡å™¨ï¼Œéœ€è¦æ­å»ºç¯å¢ƒï¼Œå€Ÿæ­¤æœºä¼šè‡ªå·±ä¹Ÿç†Ÿæ‚‰äº†ä¸€ç•ªæ­å»ºçš„æµç¨‹ï¼Œåšä¸ªæ—¥è®°ä¾›ä»¥åå‚è€ƒã€‚&emsp;æœ¬ç¯‡å¤§éƒ¨åˆ†å‘½ä»¤ä»…é€‚åˆCentos7.xçš„ç³»ç»Ÿä½¿ç”¨ã€‚&emsp;lnmpæ˜¯æŒ‡Liunxã€Nginxã€Mysqlå’ŒPhpã€‚ &emsp;ç›®å½•ï¼š&emsp;ï¼ˆ1ï¼‰å®‰è£…Nginx1.4ã€‚&emsp;ï¼ˆ2ï¼‰å®‰è£…php7.2ã€‚&emsp;ï¼ˆ3ï¼‰å®‰è£…Mariadb10.2ã€‚&emsp;ï¼ˆ4ï¼‰æ€»ç»“ã€‚ äºŒã€å®‰è£…Nginx &emsp;ï¼ˆ1ï¼‰é˜²ç«å¢™è®¾ç½®ï¼Œå…è®¸httpã€httpsé€šä¿¡ã€å¼€å¯80ã€443ã€8080ç­‰ç«¯å£ï¼ˆå·²å¼€å¯çš„å¿½ç•¥æ­¤æ­¥éª¤ï¼‰ã€‚123456789101112// å…è®¸httpé€šä¿¡firewall-cmd --zone=public --add-service=http --permanent// å…è®¸httpsé€šä¿¡firewall-cmd --zone=public --add-service=https --permanent// æ‰“å¼€80ç«¯å£firewall-cmd --zone-public â€“add-port=80/tcp --permanent // æ‰“å¼€443ç«¯å£firewall-cmd --zone-public â€“add-port=443/tcp --permanent // æ‰“å¼€8080ç«¯å£firewall-cmd --zone-public â€“add-port=8080/tcp --permanent // é‡æ–°åŠ è½½é…ç½®firewall-cmd --reload &emsp;ï¼ˆ2ï¼‰ä¸‹è½½ä¾èµ–1yum intall pcre pcre-devel yum install pcre pcre-devel yum install zlib zlib-devel yum install openssl; openssl-devel yum install openssl;openssl-devel yum install openssl openssl-devel&emsp;ï¼ˆ3ï¼‰é…ç½®å®˜æ–¹yumæº&amp;å®‰è£…Nginx123456789101112rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpmyum install nginx# é»˜è®¤ä¸»é…ç½®æ–‡ä»¶ï¼š/etc/nginx/conf.d# å¯åŠ¨&amp;åœæ­¢systemctl start/stop nginx.service# æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¯åŠ¨ps aux|grep nginx# è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯systemctl enable nginx æ³¨æ„ï¼šå®‰è£…æˆåŠŸåæ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œæˆ–åœ¨æœåŠ¡å•†åå°é…ç½®å®‰å…¨ç»„ç­–ç•¥ç­‰ã€‚ äºŒã€å®‰è£…php &emsp;ï¼ˆ1ï¼‰é…ç½®yumæº12rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpmrpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm&emsp;ï¼ˆ2ï¼‰å®‰è£…php7.2åŠå¸¸ç”¨çš„æ‰©å±•1yum install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72w-pdo php72w-xml&emsp;ï¼ˆ3ï¼‰å¯åŠ¨php-fpm123systemctl stop/start php-fpm# è®¾ç½®å¼€æœºå¯åŠ¨systemctl enable php-fpm&emsp;ï¼ˆ4ï¼‰é…ç½®nginxæ”¯æŒphpbash123456789101112131415vim /etc/nginx/conf.d/default.conflocation / &#123; root /usr/share/nginx/html; //è¿™æ˜¯é‡Œåº”ç”¨ç›®å½•å’Œä¸‹é¢çš„rootå¯¹åº”ï¼Œå¯è‡ªå®šä¹‰ index index.html index.htm index.php;&#125;location ~ \\.php$ &#123; root /usr/share/nginx/html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params;&#125; ä¸‰ã€å®‰è£…mariadb10.2 &emsp;ï¼ˆ1ï¼‰é…ç½®yumæº123456789101112# è¿›å…¥cd /usr/local/src# ä¸‹è½½rpmåŒ…wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm# å®‰è£…rpmrpm -ivh mysql57-community-release-el7-11.noarch.rpm# å®‰è£… mysql-serveryum install -y mysql-server# å¯åŠ¨ systemctl start mysqld# è®¾ç½®å¼€æœºè‡ªå¯systemctl enable mysqld &emsp;ï¼ˆ2ï¼‰ç™»å…¥12345678910111213# ç”±äºMySQLä»5.7å¼€å§‹ä¸å…è®¸é¦–æ¬¡å®‰è£…åï¼Œä½¿ç”¨ç©ºå¯†ç è¿›è¡Œç™»å½•ï¼Œç³»ç»Ÿä¼šéšæœºç”Ÿæˆä¸€ä¸ªå¯†ç ä»¥ä¾›ç®¡ç†å‘˜é¦–æ¬¡ç™»å½•ä½¿ç”¨ï¼Œè¿™ä¸ªå¯†ç è®°å½•åœ¨/var/log/mysqld.logæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ­¤å¯†ç ï¼šcat /var/log/mysqld.log|grep &apos;A temporary password&apos;# ç™»å½•mysql -u root -p# å¦‚æŠ¥é”™ You must reset your password using ALTER USER statement before executing this statementä¿®æ”¹å¯†ç use mysql;SET PASSWORD = PASSWORD(&apos;daichongweb&apos;); æˆ– ALTER USER USER() IDENTIFIED BY &apos;daichongweb&apos;;# å¦‚æŠ¥é”™Your password does not satisfy the current policy requirementsset global validate_password_policy=0; //ä¿®æ”¹å¯†ç éªŒè¯ä¸ºé•¿åº¦éªŒè¯ å››ã€æ€»ç»“ &emsp;æ€»ä½“æ¥è¯´ä½¿ç”¨yumå®‰è£…æ¯”æºç ç¼–è¯‘å®‰è£…ç®€å•å¤šäº†ã€‚&emsp;å†å¤šçš„ç†è®ºä¸å¦‚çœŸæ­£çš„å®è·µã€‚&emsp;ä»å‡ºç°é—®é¢˜ï¼Œåˆ°åˆ†æé—®é¢˜ï¼Œå†åˆ°è§£å†³é—®é¢˜ï¼Œä½ ä¼šä»ä¸­å­¦ä¹ åˆ°å¾ˆå¤šçš„çŸ¥è¯†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å°±ç®—èŠ±é’±ä¹Ÿè¦ä¹°äº‘æœåŠ¡å™¨çš„åŸå› ã€‚","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://www.daichongweb.com/tags/linux/"}]},{"title":"phpæ€§èƒ½ä¼˜åŒ–-å¾ªç¯ä¼˜åŒ–","slug":"phpæ€§èƒ½ä¼˜åŒ–-å¾ªç¯ä¼˜åŒ–","date":"2019-08-31T02:22:30.000Z","updated":"2021-09-03T05:56:57.960Z","comments":true,"path":"phpæ€§èƒ½ä¼˜åŒ–-å¾ªç¯ä¼˜åŒ–/","link":"","permalink":"http://www.daichongweb.com/phpæ€§èƒ½ä¼˜åŒ–-å¾ªç¯ä¼˜åŒ–/","excerpt":"ä¸€ã€å‰è¨€ &emsp;å¯¹äºä»»ä½•è®¡ç®—æœºç¨‹åºï¼Œç¨‹åºçš„è¿è¡Œæ€§èƒ½å†³å®šäº†ä¸€ä¸ªç¨‹åºçš„å¥½åï¼Œå¤¸å¼ ä¸€ç‚¹è¯´ç¨‹åºæ€§èƒ½çš„å¥½åç›´æ¥å½±å“äº†ä¸€ä¸ªäº’è”ç½‘å…¬å¸çš„ç”Ÿå­˜ä¸å‘å±•çš„é—®é¢˜ã€‚æ‰€ä»¥å¯¹äºç¨‹åºå‘˜ï¼Œä¼˜åŒ–æ€§èƒ½çš„æŠ€èƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå°±å› ä¸ºä¸ä¼šä¼˜åŒ–æ€§èƒ½ï¼Œå¯èƒ½å°±ä¼šæ¯”å…¶ä»–äººå·®å¥½å‡ ä¸ªç­‰çº§ã€‚ &emsp;åœ¨PHPç•Œï¼Œå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸çš„å·¥ä½œå†…å®¹å°±æ˜¯æœ€å¸¸è§çš„CURDã€‚ä½ ä¼šå‘ç°è‡ªå·±å’Œä¸€äº›åº”å±Šæ¯•ä¸šç”Ÿç›¸æ¯”å®Œå…¨æ²¡æœ‰ç«äº‰ä¼˜åŠ¿ï¼Œç”šè‡³ä¸€äº›å…¬å¸çš„å²—ä½è¦æ±‚ä¹Ÿåªæ˜¯ä¼šCURDå°±è¡Œäº†ã€‚å°±åƒæˆ‘æœ€è¿‘æ‰¾å·¥ä½œï¼Œä¸æ­¢ä¸€æ¬¡çš„é‡åˆ°é¢è¯•å®˜é—®ï¼šâ€œæˆ‘ä½ è§‰å¾—ä½ çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼Œæˆ‘æ¯æ¬¡éƒ½æ˜¯å“‘å£æ— è¨€ã€‚","text":"ä¸€ã€å‰è¨€ &emsp;å¯¹äºä»»ä½•è®¡ç®—æœºç¨‹åºï¼Œç¨‹åºçš„è¿è¡Œæ€§èƒ½å†³å®šäº†ä¸€ä¸ªç¨‹åºçš„å¥½åï¼Œå¤¸å¼ ä¸€ç‚¹è¯´ç¨‹åºæ€§èƒ½çš„å¥½åç›´æ¥å½±å“äº†ä¸€ä¸ªäº’è”ç½‘å…¬å¸çš„ç”Ÿå­˜ä¸å‘å±•çš„é—®é¢˜ã€‚æ‰€ä»¥å¯¹äºç¨‹åºå‘˜ï¼Œä¼˜åŒ–æ€§èƒ½çš„æŠ€èƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå°±å› ä¸ºä¸ä¼šä¼˜åŒ–æ€§èƒ½ï¼Œå¯èƒ½å°±ä¼šæ¯”å…¶ä»–äººå·®å¥½å‡ ä¸ªç­‰çº§ã€‚ &emsp;åœ¨PHPç•Œï¼Œå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸çš„å·¥ä½œå†…å®¹å°±æ˜¯æœ€å¸¸è§çš„CURDã€‚ä½ ä¼šå‘ç°è‡ªå·±å’Œä¸€äº›åº”å±Šæ¯•ä¸šç”Ÿç›¸æ¯”å®Œå…¨æ²¡æœ‰ç«äº‰ä¼˜åŠ¿ï¼Œç”šè‡³ä¸€äº›å…¬å¸çš„å²—ä½è¦æ±‚ä¹Ÿåªæ˜¯ä¼šCURDå°±è¡Œäº†ã€‚å°±åƒæˆ‘æœ€è¿‘æ‰¾å·¥ä½œï¼Œä¸æ­¢ä¸€æ¬¡çš„é‡åˆ°é¢è¯•å®˜é—®ï¼šâ€œæˆ‘ä½ è§‰å¾—ä½ çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼Œæˆ‘æ¯æ¬¡éƒ½æ˜¯å“‘å£æ— è¨€ã€‚&emsp;å¤§å®¶éƒ½æ‡‚ä¸ºäº†é¿å…è¿™æ ·çš„å‡ºç°ï¼Œå­¦äº†å¾ˆå¤šç§è¯­è¨€ã€‚é€ æˆç°åœ¨PHPå²—ä½çš„è¦æ±‚ä»åªä¼šPHPè¯­è¨€åˆ°PHP+MYSQL+LIUNX+HTNL+CSS+JS,ç”šè‡³æˆ‘å¯¹é¢è¯•å®˜è¯´ï¼šâ€œæˆ‘çš„ä¼˜åŠ¿æ˜¯æ¯”å…¶ä»–äººä¼šçš„è¯­è¨€å¤šï¼â€çš„æ—¶å€™ï¼Œä»–ä¼šå›ä½ ä¸€å¥ï¼šâ€œè¿™ä¸æ˜¯å¤§å®¶éƒ½ä¼šçš„å—ï¼Ÿâ€ã€‚ &emsp;æ›´ææ€–çš„æ˜¯ï¼Œç°åœ¨çš„PHæ‹›è˜è¦æ±‚ä¸Šéƒ½TMå¼€å§‹å†™è¦æ±‚ç†Ÿæ‚‰JAVAã€Pythonã€Goã€Golangï¼Œä½ TMèƒ½å†è¿‡åˆ†ç‚¹å—ï¼Ÿ äºŒã€è¨€å½’æ­£ä¼  &emsp;åœ¨PHPä¸­æœ€å¸¸è§çš„å°±æ˜¯foreachï¼Œå¤„ç†æ•°æ®äº¤é™…çš„æ—¶å€™ä¸€èˆ¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„éƒ½æ˜¯åµŒå¥—ã€‚ &emsp;åœ¨è¿™æˆ‘åªèƒ½è¯´å°½é‡å°‘ç”¨æˆ–è€…ä¸ä½¿ç”¨è¿™æ ·çš„å†™æ³•ã€‚ &emsp;ä¸‹é¢ä»‹ç»3ç§å¯ä»¥ä»£æ›¿å¾ªç¯åµŒå¥—å†™æ³•ä¾‹å­ï¼Œå¹¶åˆ†ææ‰§è¡Œçš„æ•ˆç‡å’Œæ€§èƒ½é—®é¢˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104&lt;?phpini_set(&apos;memory_limit&apos;,&apos;3072M&apos;);$arr = [];$arr1 = [];for($i=1;$i&lt;=1000000;$i++)&#123; $arr[$i] = [ &apos;id&apos; =&gt; ($i+1)*2, &apos;name&apos; =&gt; &apos;æˆ´å´‡_&apos;.$i ];&#125;for($j=1;$j&lt;=1000000;$j++)&#123; $arr1[$j] = [ &apos;uid&apos; =&gt;($j+1)*2, &apos;age&apos; =&gt; $j ];&#125;$t1 = microtime(true);$mode = mode1($arr,$arr1);echo &apos;&lt;br /&gt;&apos;;$t2 = microtime(true);echo $mode . &apos;è€—æ—¶: &apos;.round($t2-$t1,3).&apos; ç§’&lt;br /&gt;&apos;;echo &apos;å†…å­˜æ¶ˆè€—: &apos; . memory_get_usage() / 1024 / 1024 . &apos; MB&lt;br /&gt;&apos;;// å¾ªç¯åµŒå¥—function mode($arr,$arr1)&#123; foreach ($arr as $k =&gt; $v) &#123; foreach ($arr1 as $key =&gt; $value) &#123; if($v[&apos;id&apos;] == $value[&apos;uid&apos;])&#123; $arr[$k][&apos;age&apos;] = $value[&apos;age&apos;]; &#125; &#125; &#125; return &apos;æ–¹æ³•ä¸€-&gt;å¾ªç¯åµŒå¥—æ³•-&gt;&apos;;&#125;// å¾ªç¯æ‹†åˆ†function mode1($arr,$arr1)&#123; $arr1 = array_index($arr1,&apos;uid&apos;); foreach ($arr as &amp;$value) &#123; if(isset($arr1[$value[&apos;id&apos;]]))&#123; $value[&apos;age&apos;] = $arr1[$value[&apos;id&apos;]][&apos;age&apos;]; &#125; &#125; return &apos;æ–¹æ³•äºŒ-&gt;å¾ªç¯æ‹†åˆ†-&gt;&apos;;&#125;// array_walk é—­åŒ…function mode2($arr,$arr1)&#123; $arr1 = array_index($arr1,&apos;uid&apos;); array_walk($arr, function(&amp;$value,$key) use ($arr1) &#123; if(isset($arr1[$value[&apos;id&apos;]]))&#123; $value[&apos;age&apos;] = $arr1[$value[&apos;id&apos;]][&apos;age&apos;]; &#125; &#125;); return &apos;æ–¹æ³•äºŒ-&gt;array_walk é—­åŒ…-&gt;&apos;;&#125;// array_mapfunction mode3($arr,$arr1)&#123; $arr1 = array_index($arr1,&apos;uid&apos;); $arr = array_map(function(&amp;$value) use ($arr1) &#123; if(isset($arr1[$value[&apos;id&apos;]]))&#123; $value[&apos;age&apos;] = $arr1[$value[&apos;id&apos;]][&apos;age&apos;]; &#125; return $value; &#125;, $arr); return &apos;æ–¹æ³•ä¸‰-&gt;array_map-&gt;&apos;;&#125;// æŠŠå¤šç»´æ•°ç»„ä¸­çš„æŸä¸ªé”®å€¼è®¾ç½®ä¸ºé”®åfunction array_index(array $array, $name)&#123; $indexedArray = array(); if (empty($array)) &#123; return $indexedArray; &#125; foreach ($array as $item) &#123; if (isset($item[$name])) &#123; $indexedArray[$item[$name]] = $item; continue; &#125; &#125; return $indexedArray;&#125; &emsp;ç»è¿‡è¯•éªŒçš„åˆ°ç»“æœï¼š &emsp;&emsp;(1)æ–¹æ³•ä¸€ï¼š10000*10000ï¼ˆä¸‡çº§ï¼‰ æ‰§è¡Œæ—¶é—´ 3.377 ç§’ &emsp;&emsp;(2)æ–¹æ³•äºŒï¼š1000000*1000000ï¼ˆç™¾ä¸‡çº§ï¼‰ æ‰§è¡Œæ—¶é—´ï¼š 0.741 ç§’ 0.642 ç§’ 0.673 ç§’ 0.609 ç§’ 0.618 ç§’ &emsp;&emsp;(3)æ–¹æ³•ä¸‰ï¼š1000000*1000000ï¼ˆç™¾ä¸‡çº§ï¼‰ æ‰§è¡Œæ—¶é—´ï¼š 0.745 ç§’ 0.75 ç§’ 0.664 ç§’ 0.672 ç§’ 0.684 ç§’ &emsp;&emsp;(4)æ–¹æ³•å››ï¼š1000000*1000000ï¼ˆç™¾ä¸‡çº§ï¼‰ æ‰§è¡Œæ—¶é—´ï¼š 0.781 ç§’ 0.803 ç§’ 0.661 ç§’ 0.661 ç§’ 0.658 ç§’ ä¸‰ã€æ€»ç»“ &emsp;åœ¨å¼€å‘ä¸­ä¸€å®šè¦è€ƒè™‘æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ä¼šå‡ºç°çš„é—®é¢˜ï¼Œå°½é‡ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä»£æ›¿å¾ªç¯åµŒå¥—ã€‚å¦å¤–è¿˜è¦æ³¨æ„ä»£ç é£æ ¼å’Œè§„èŒƒç­‰é—®é¢˜ã€‚ &emsp;å¸Œæœ›å¤§å®¶åœ¨çœ‹äº†ä¹‹åèƒ½æœ‰æ‰€æ”¶è·ã€‚","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"phpå¤„ç†è§†é¢‘","slug":"phpå¤„ç†è§†é¢‘","date":"2019-08-29T04:47:51.000Z","updated":"2021-09-03T05:56:57.954Z","comments":true,"path":"phpå¤„ç†è§†é¢‘/","link":"","permalink":"http://www.daichongweb.com/phpå¤„ç†è§†é¢‘/","excerpt":"ä¸€ã€é¦–å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯ &emsp;å¦‚ä¼˜é…·è§†é¢‘ç½‘ç«™ï¼ŒæŸäº›è§†é¢‘çš„å°é¢å›¾å°±ä½¿ç”¨çš„è¿™æ ·çš„åŠŸèƒ½ã€‚ &emsp;å¤§æ¦‚æœ‰4ç§ï¼š &emsp;&emsp;(1)è‡ªæœ‰å°é¢å›¾ï¼ˆè¿™ç±»å¯èƒ½æ˜¯è‡ªå·±æ‰‹åŠ¨ä¸Šä¼ çš„å°é¢å›¾ï¼Œå¦‚ä¸€äº›å®£ä¼ å›¾ï¼‰ã€‚&emsp;&emsp;(2)æˆªå–è§†é¢‘ç¬¬ä¸€å¸§ï¼ˆå¯ä»¥ç†è§£ä¸º0.001ç§’ï¼‰æ—¶çš„è§†é¢‘å†…å®¹ä½œä¸ºå°é¢å›¾ã€‚&emsp;&emsp;(3)æˆªå–è§†é¢‘æŸä¸€æ—¶åˆ»çš„å†…å®¹ä½œä¸ºå°é¢å›¾ï¼Œå¦‚æˆªå–è§†é¢‘çš„ç¬¬1åˆ†é’Ÿã€‚&emsp;&emsp;(4)æˆªå–è§†é¢‘æŸä¸€æ®µçš„å†…å®¹ï¼ˆgifï¼‰ä½œä¸ºå°é¢å›¾ï¼Œå¦‚æˆªå–è§†é¢‘çš„ç¬¬1åˆ†20ç§’åˆ°1åˆ†30ç§’ã€‚ PS:åªæ˜¯å•çº¯çš„æ‹¿æ¥åšä¾‹å­ï¼Œå¹¶ä¸æ˜¯æŒ‡ä¼˜é…·å°±æ˜¯ä½¿ç”¨è¿™æ ·çš„æŠ€æœ¯ã€‚","text":"ä¸€ã€é¦–å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯ &emsp;å¦‚ä¼˜é…·è§†é¢‘ç½‘ç«™ï¼ŒæŸäº›è§†é¢‘çš„å°é¢å›¾å°±ä½¿ç”¨çš„è¿™æ ·çš„åŠŸèƒ½ã€‚ &emsp;å¤§æ¦‚æœ‰4ç§ï¼š &emsp;&emsp;(1)è‡ªæœ‰å°é¢å›¾ï¼ˆè¿™ç±»å¯èƒ½æ˜¯è‡ªå·±æ‰‹åŠ¨ä¸Šä¼ çš„å°é¢å›¾ï¼Œå¦‚ä¸€äº›å®£ä¼ å›¾ï¼‰ã€‚&emsp;&emsp;(2)æˆªå–è§†é¢‘ç¬¬ä¸€å¸§ï¼ˆå¯ä»¥ç†è§£ä¸º0.001ç§’ï¼‰æ—¶çš„è§†é¢‘å†…å®¹ä½œä¸ºå°é¢å›¾ã€‚&emsp;&emsp;(3)æˆªå–è§†é¢‘æŸä¸€æ—¶åˆ»çš„å†…å®¹ä½œä¸ºå°é¢å›¾ï¼Œå¦‚æˆªå–è§†é¢‘çš„ç¬¬1åˆ†é’Ÿã€‚&emsp;&emsp;(4)æˆªå–è§†é¢‘æŸä¸€æ®µçš„å†…å®¹ï¼ˆgifï¼‰ä½œä¸ºå°é¢å›¾ï¼Œå¦‚æˆªå–è§†é¢‘çš„ç¬¬1åˆ†20ç§’åˆ°1åˆ†30ç§’ã€‚ PS:åªæ˜¯å•çº¯çš„æ‹¿æ¥åšä¾‹å­ï¼Œå¹¶ä¸æ˜¯æŒ‡ä¼˜é…·å°±æ˜¯ä½¿ç”¨è¿™æ ·çš„æŠ€æœ¯ã€‚äºŒã€å°†ä¼šä½¿ç”¨åˆ°çš„æŠ€æœ¯&emsp;(1)FFmpegï¼šFFmpegæ˜¯ä¸€å¥—å¯ä»¥ç”¨æ¥è®°å½•ã€è½¬æ¢æ•°å­—éŸ³é¢‘ã€è§†é¢‘ï¼Œå¹¶èƒ½å°†å…¶è½¬åŒ–ä¸ºæµçš„å¼€æºè®¡ç®—æœºç¨‹åºã€‚é‡‡ç”¨LGPLæˆ–GPLè®¸å¯è¯ã€‚å®ƒæä¾›äº†å½•åˆ¶ã€è½¬æ¢ä»¥åŠæµåŒ–éŸ³è§†é¢‘çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚å®ƒåŒ…å«äº†éå¸¸å…ˆè¿›çš„éŸ³é¢‘/è§†é¢‘ç¼–è§£ç åº“libavcodecï¼Œä¸ºäº†ä¿è¯é«˜å¯ç§»æ¤æ€§å’Œç¼–è§£ç è´¨é‡ï¼Œlibavcodecé‡Œå¾ˆå¤šcodeéƒ½æ˜¯ä»å¤´å¼€å‘çš„ã€‚â€”ç™¾åº¦ç™¾ç§‘&emsp; æ³¨æ„:â€˜éœ€è¦å®‰è£…â€™ï¼Œä¸åŒçš„ç³»ç»Ÿå®‰è£…ã€ä½¿ç”¨çš„æ–¹æ³•ä¸åŒã€‚ &emsp;(2)PHPçš„Execæˆ–Systemç­‰å‡½æ•°ï¼ˆå½“ç„¶ä»»ä½•èƒ½æ‰§è¡Œå¤–éƒ¨ç¨‹åºçš„è¯­è¨€éƒ½èƒ½å®ç°ï¼‰ã€‚ ä¸‰ã€Demo 12345678910111213// å®‰è£…è·¯å¾„$ffmpeg = &quot;C:\\\\Users\\user\\\\Desktop\\\\ffmpeg\\\\bin\\\\ffmpeg.exe&quot;;// å¾…å¤„ç†è§†é¢‘çš„åœ°å€$video_route = &quot;D:\\\\phpstudy_pro\\\\WWW\\a.mp4&quot;;//å­˜å‚¨åœ°å€$store_path = &quot;./2.jpg&quot;;// æŠŠè§†é¢‘çš„å‰30å¸§æˆªå–ä¸ºgifsystem($ffmpeg . &quot; -i &quot;.$video_route.&quot; -vframes 30 -y -f gif 1.gif&quot;); // æŠŠè§†é¢‘çš„ç¬¬ä¸€å¸§æˆªå–ä¸ºå›¾ç‰‡ -r 1 è¡¨ç¤ºä¸ºå›¾å®½åº¦ã€é«˜åº¦è‡ªé€‚åº”system($ffmpeg . &quot; -i &quot;.$video_route.&quot; -y -f image2 -t 0.001 -r 1 1.png&quot;); // æŠŠè§†é¢‘çš„ç¬¬8.01ç§’å¤„æˆªå–ä¸ºå›¾ç‰‡system($ffmpeg . &quot; -i &quot;.$video_route.&quot; -y -f image2 -ss 08.010 -t 0.001 -s 1920x1080 &quot; .$store_path. &quot;); ä¸‰ã€æ›´å¤š &emsp;PHP+FFmpegä»…èƒ½å®ç°è¿™æ ·åŠŸèƒ½å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼è¿˜æœ‰æ›´å¤šçš„åŠŸèƒ½ç­‰å¾…æ¢ç´¢â€¦&emsp;å¦‚:&emsp;&emsp;(1)è§†é¢‘è½¬ç ã€‚&emsp;&emsp;(2)è§†é¢‘åŠ å¯†ã€‚&emsp;&emsp;(3)è§†é¢‘å‰ªåˆ‡ã€‚&emsp;&emsp;(4)è§†é¢‘åˆæˆã€‚&emsp;&emsp;(5)å¤šå¼ å›¾ç‰‡åˆæˆä¸€ä¸ªè§†é¢‘ã€‚&emsp;&emsp;(6)å­—å¹•ã€‚&emsp;&emsp;(7)éŸ³é¢‘å¤„ç†ã€‚&emsp;&emsp;ç­‰ç­‰ç­‰â€¦.","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"php-Sphinxæœç´¢å¼•æ“","slug":"php-Sphinxæœç´¢å¼•æ“","date":"2019-08-16T08:33:22.000Z","updated":"2021-09-03T05:56:57.936Z","comments":true,"path":"php-Sphinxæœç´¢å¼•æ“/","link":"","permalink":"http://www.daichongweb.com/php-Sphinxæœç´¢å¼•æ“/","excerpt":"ä¸€ã€Sphinxæ˜¯ä»€ä¹ˆï¼Ÿ &emsp;æ˜¯ä¸€ä¸ªåŸºäºSQLçš„å…¨æ–‡æ£€ç´¢å¼•æ“ï¼Œå¯ä»¥ç»“åˆMySQL,PostgreSQLåšå…¨æ–‡æœç´¢ï¼Œå®ƒå¯ä»¥æä¾›æ¯”æ•°æ®åº“æœ¬èº«æ›´ä¸“ä¸šçš„æœç´¢åŠŸèƒ½ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´å®¹æ˜“å®ç°ä¸“ä¸šåŒ–çš„å…¨æ–‡æ£€ç´¢ã€‚Sphinxç‰¹åˆ«ä¸ºä¸€äº›è„šæœ¬è¯­è¨€è®¾è®¡æœç´¢APIæ¥å£ï¼Œå¦‚Javaï¼ŒPHPï¼ŒPythonï¼ŒPerlï¼ŒRubyç­‰ï¼ŒåŒæ—¶ä¸ºMySQLä¹Ÿè®¾è®¡äº†ä¸€ä¸ªå­˜å‚¨å¼•æ“æ’ä»¶ã€‚ â€”ç™¾åº¦ç™¾ç§‘ &emsp;Sphinx å•ä¸€ç´¢å¼•æœ€å¤§å¯åŒ…å«1äº¿æ¡è®°å½•ï¼Œåœ¨1åƒä¸‡æ¡è®°å½•æƒ…å†µä¸‹çš„æŸ¥è¯¢é€Ÿåº¦ä¸º0.xç§’ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚Sphinxåˆ›å»ºç´¢å¼•çš„é€Ÿåº¦ä¸ºï¼šåˆ›å»º100ä¸‡æ¡è®°å½•çš„ç´¢å¼•åªéœ€ 3ï½4åˆ†é’Ÿï¼Œåˆ›å»º1000ä¸‡æ¡è®°å½•çš„ç´¢å¼•å¯ä»¥åœ¨50åˆ†é’Ÿå†…å®Œæˆï¼Œè€ŒåªåŒ…å«æœ€æ–°10ä¸‡æ¡è®°å½•çš„å¢é‡ç´¢å¼•ï¼Œé‡å»ºä¸€æ¬¡åªéœ€å‡ åç§’ã€‚â€”ç™¾åº¦ç™¾ç§‘","text":"ä¸€ã€Sphinxæ˜¯ä»€ä¹ˆï¼Ÿ &emsp;æ˜¯ä¸€ä¸ªåŸºäºSQLçš„å…¨æ–‡æ£€ç´¢å¼•æ“ï¼Œå¯ä»¥ç»“åˆMySQL,PostgreSQLåšå…¨æ–‡æœç´¢ï¼Œå®ƒå¯ä»¥æä¾›æ¯”æ•°æ®åº“æœ¬èº«æ›´ä¸“ä¸šçš„æœç´¢åŠŸèƒ½ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´å®¹æ˜“å®ç°ä¸“ä¸šåŒ–çš„å…¨æ–‡æ£€ç´¢ã€‚Sphinxç‰¹åˆ«ä¸ºä¸€äº›è„šæœ¬è¯­è¨€è®¾è®¡æœç´¢APIæ¥å£ï¼Œå¦‚Javaï¼ŒPHPï¼ŒPythonï¼ŒPerlï¼ŒRubyç­‰ï¼ŒåŒæ—¶ä¸ºMySQLä¹Ÿè®¾è®¡äº†ä¸€ä¸ªå­˜å‚¨å¼•æ“æ’ä»¶ã€‚ â€”ç™¾åº¦ç™¾ç§‘ &emsp;Sphinx å•ä¸€ç´¢å¼•æœ€å¤§å¯åŒ…å«1äº¿æ¡è®°å½•ï¼Œåœ¨1åƒä¸‡æ¡è®°å½•æƒ…å†µä¸‹çš„æŸ¥è¯¢é€Ÿåº¦ä¸º0.xç§’ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚Sphinxåˆ›å»ºç´¢å¼•çš„é€Ÿåº¦ä¸ºï¼šåˆ›å»º100ä¸‡æ¡è®°å½•çš„ç´¢å¼•åªéœ€ 3ï½4åˆ†é’Ÿï¼Œåˆ›å»º1000ä¸‡æ¡è®°å½•çš„ç´¢å¼•å¯ä»¥åœ¨50åˆ†é’Ÿå†…å®Œæˆï¼Œè€ŒåªåŒ…å«æœ€æ–°10ä¸‡æ¡è®°å½•çš„å¢é‡ç´¢å¼•ï¼Œé‡å»ºä¸€æ¬¡åªéœ€å‡ åç§’ã€‚â€”ç™¾åº¦ç™¾ç§‘ äºŒã€Sphinxçš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ &emsp;é«˜é€Ÿç´¢å¼• ï¼ˆåœ¨æ–°æ¬¾CPUä¸Šï¼Œè¿‘10 MB/ç§’ï¼‰; é«˜é€Ÿæœç´¢ (2-4Gçš„æ–‡æœ¬é‡ä¸­å¹³å‡æŸ¥è¯¢é€Ÿåº¦ä¸åˆ°0.1ç§’); é«˜å¯ç”¨æ€§ ï¼ˆå•CPUä¸Šæœ€å¤§å¯æ”¯æŒ100 GBçš„æ–‡æœ¬ï¼Œ100Mæ–‡æ¡£ï¼‰; æä¾›è‰¯å¥½çš„ç›¸å…³æ€§æ’å æ”¯æŒåˆ†å¸ƒå¼æœç´¢ï¼› æä¾›æ–‡æ¡£æ‘˜è¦ç”Ÿæˆï¼› æä¾›ä»MySQLå†…éƒ¨çš„æ’ä»¶å¼å­˜å‚¨å¼•æ“ä¸Šæœç´¢ æ”¯æŒå¸ƒå°”ï¼ŒçŸ­è¯­ï¼Œ å’Œè¿‘ä¹‰è¯æŸ¥è¯¢ï¼› æ”¯æŒæ¯ä¸ªæ–‡æ¡£å¤šä¸ªå…¨æ–‡æ£€ç´¢åŸŸï¼ˆé»˜è®¤æœ€å¤§32ä¸ªï¼‰; æ”¯æŒæ¯ä¸ªæ–‡æ¡£å¤šå±æ€§ï¼› æ”¯æŒæ–­è¯ï¼› æ”¯æŒå•å­—èŠ‚ç¼–ç ä¸UTF-8ç¼–ç ï¼› ä¸‰ã€Sphinxå®‰è£…ä¸é…ç½® â€“windowsç¯å¢ƒ &emsp;1.ä¸‡ç‰©ä¸ç¦»å…¶å®—ï¼Œç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å®‰è£…å•¦ï¼ä¸‹è½½åœ°å€ â€”å…·ä½“çš„å®‰è£…æ­¥éª¤å°±ä¸ä¸€ä¸€ä»‹ç»äº† &emsp;2.è§£å‹ä¹‹åä¼šçœ‹åˆ° apiã€binã€docã€etcã€miscã€src å…­ä¸ªæ–‡ä»¶ã€‚ â€“windowsç¯å¢ƒå¯èƒ½å’Œå…¶ä»–ç¯å¢ƒä¸åŒ &emsp;3.åœ¨åŒçº§ç›®å½•ä¸‹æ–°å»ºdataã€logä¸¤ä¸ªæ–‡ä»¶ã€‚ â€“data:æ•°æ®æ–‡ä»¶ã€log:æ£€ç´¢çš„æ—¥å¿—æ–‡ä»¶ &emsp;4.å¤åˆ¶etcç›®å½•ä¸‹çš„sphinx-min.conf.diståˆ°binç›®å½•ä¿®æ”¹æ–‡ä»¶åä¸ºsphinx.confã€‚ä¿®æ”¹é…ç½®ä¸º:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859source school # school åå­—æ˜¯éšæ„èµ·çš„&#123; type = mysql sql_host = localhost sql_user = root sql_pass = root sql_db = test sql_port = 3306 # è®¾ç½®æ•°æ®åº“å­—ç¬¦é›† sql_query_pre = SET NAMES utf8 # é…ç½®æ•°æ®æº--ä¹Ÿå°±æ˜¯æ•°æ®è¡¨çš„æ•°æ® sql_query = SELECT id, school, address FROM school # é…ç½®è¿”å›å­—æ®µ--å¿…é¡»æ˜¯æ•°æ®è¡¨ä¸­å­˜åœ¨çš„å­—æ®µï¼Œä¸èƒ½è®¾ç½®è¿”å›ä¸»é”®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ # è¿™é‡Œçš„å­—æ®µè¿˜è¦å’Œä¸‹é¢indexé‡Œé…ç½®çš„ rt_fieldç›¸å¯¹åº” sql_field_string = school sql_field_string = address &#125;index school&#123; source = school # æ•°æ®æº--ä¹Ÿå°±æ˜¯ä¸Šè¾¹çš„åå­— path = E:\\sphinx\\data\\school # æ•°æ®å­˜æ”¾çš„åœ°å€--é…ç½®ä¸ºåˆšæ–°å»ºçš„dataä¸‹ mlock = 0 # ç¼“å­˜å†…å­˜é”å®š morphology = none # æ•°æ®å¤„ç†æ–¹æ³• min_word_len = 1 # æœ€å°ç´¢å¼•å­—é•¿ html_strip = 0 # æ˜¯å¦å»é™¤htmlæ ‡ç­¾ ngram_len = 1 # æ”¯æŒä¸­æ–‡ ngram_chars = U+3000..U+2FA1F # æ”¯æŒä¸­æ–‡ # å­—æ®µé…ç½® rt_attr_uint = id rt_field = school rt_field = address&#125;indexer&#123; mem_limit = 128M&#125;# ä¸‹é¢éƒ½æ˜¯é»˜è®¤çš„ ä¿®æ”¹ä¸€ä¸‹logåœ°å€å°±å¥½äº†searchd&#123; listen = 9312 listen = 9306:mysql41 log = E:\\sphinx\\log\\searchd.log query_log = E:\\sphinx\\log\\query.log read_timeout = 5 max_children = 30 pid_file = E:\\sphinx\\log\\searchd.pid seamless_rotate = 1 preopen_indexes = 1 unlink_old = 1 workers = threads # for RT to work binlog_path = E:\\sphinx\\data&#125; å››ã€Sphinxåœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ12345678910111213141516171819&lt;?phprequire &quot;E:\\sphinx\\api\\sphinxapi.php&quot;;$page = isset($_GET[&apos;p&apos;]) ? intval($_GET[&apos;p&apos;]) : 1;if ($page &lt;= 0) &#123; $page = 1;&#125;$pagesize = 20;$sphinxClass = new \\SphinxClient();$sphinxClass-&gt;setServer(&quot;localhost&quot;, 9312);$sphinxClass-&gt;setMaxQueryTime(3);$sphinxClass-&gt;SetArrayResult(true);$sphinxClass-&gt;SetLimits(($page - 1) * $pagesize, $pagesize, 3000); // æœç´¢åˆ†é¡µ// @school è¡¨ç¤ºåªåŒ¹é…æ•°æ®è¡¨ä¸­schoolçš„å­—æ®µ ,ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºä½¿ç”¨çš„ç´¢å¼•æ–¹æ³• å¯¹åº”sphinxä¸­çš„index school$result = $sphinxClass-&gt;query(&apos;@school æˆ´å´‡&apos;, &apos;school&apos;);echo &apos;&lt;pre&gt;&apos;;print_r($result); ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨sphinxæ˜¯éå¸¸ç®€å•çš„åªéœ€è¦å¼•å…¥è¿™ä¸ªç±»å°±okäº†ã€‚ äº”ã€æµ‹è¯• &emsp;æ•°æ®é‡200014æ¡æ•°æ®ã€‚ &emsp;ä½¿ç”¨mysqlæ¨¡ç³ŠæŸ¥è¯¢å¹³å‡è€—æ—¶ 0.130s &emsp;ä½¿ç”¨sphinxæœç´¢å¼•æ“å¹³å‡è€—æ—¶ 0.030s &emsp;ç”±æ­¤å¯è§å·®è·æ˜¯å¾ˆå¤§çš„ï¼Œå¦‚ä½•æ•°æ®é‡æ›´å¤§çš„æƒ…å†µä¸‹å·®è·ä¼šæ›´å¤§ã€‚ å…­ã€Sphinxçš„ä¼˜ç‚¹åŠç¼ºç‚¹ &emsp;ä¼˜ç‚¹:&emsp;&emsp;(1)Sphinxç´¢å¼•æ–‡ä»¶æ¯æ¬¡æ›´æ–°éƒ½ä¼šæŠŠæ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç”¨æˆ·ä½¿ç”¨æœç´¢çš„æ—¶å€™å¹¶ä¸ä¼šç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œé™ä½äº†æ•°æ®åº“çš„å‹åŠ›ã€‚&emsp;&emsp;(2)åœ¨å‡ åä¸‡çº§æ•°æ®æŸ¥è¯¢æ—¶ï¼ŒSphinxç´¢å¼•é€Ÿåº¦è¦æ¯”æ•°æ®åº“ç´¢å¼•é€Ÿåº¦å¿«ä¸Šå¥½å‡ å€ï¼Œé€Ÿåº¦å¿«ã€‚ &emsp;ç¼ºç‚¹:&emsp;&emsp;(1)æ•°æ®çš„ç´¢å¼•æ–‡ä»¶ä¼šå­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™å¯¹å†…å­˜ä¹Ÿæœ‰ä¸€å®šå½±å“ã€‚&emsp;&emsp;(2)æ•°æ®åº“çš„æ•°æ®å˜åŒ–ï¼Œæ˜¯æ— æ³•åŒæ­¥åˆ°Sphinxç´¢å¼•æ–‡ä»¶é‡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ•°æ®åº“æ›´æ–°éƒ½è¦æ‰‹åŠ¨æ›´æ–°ç´¢å¼•æ–‡ä»¶ã€‚&emsp;&emsp;(3)åœ¨æ²¡æœ‰ä½¿ç”¨ä¸­æ–‡åˆ†è¯çš„æŠ€æœ¯ä¸Šï¼ŒSphinxæœç´¢çš„ç»“æœæ˜¯ä¸å‡†ç¡®çš„ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“ä¸­æœ‰â€˜æˆ´å´‡1ï¼Œæˆ´å´‡2ï¼Œæˆ´å´‡3ï¼Œæˆ´å´‡â€™ï¼Œä½¿ç”¨likeæŸ¥è¯¢â€˜æˆ´å´‡â€™ä¼šæœ‰å››ä¸ªç»“æœï¼Œä½†ä½¿ç”¨SphinxæŸ¥è¯¢åªä¼šå‡ºç°ä¸€ä¸ªã€‚ æ€»ç»“ &emsp;Sphinxä»å®˜ç½‘ä¸Šå¯ä»¥çœ‹å‡ºå·²ç»å°†è¿‘ä¸€å¹´æ²¡æœ‰æ›´æ–°è¿‡äº†ï¼Œç”šè‡³è¿˜æœ‰ä¸€äº›bugæ²¡æœ‰ä¿®å¤ï¼Œä½†æ•´ä½“æ¥è¯´Sphinxåœ¨ä½¿ç”¨æ–¹é¢è¿˜æ˜¯éå¸¸ç®€å•å¯é çš„ã€‚ &emsp;PS:ä¸‹ä¸€ç¯‡å°†ä¼šä»‹ç»Sphinxä¸­æ–‡åˆ†è¯å¦‚ä½•ä½¿ç”¨ï¼","categories":[],"tags":[{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/tags/phpæ‰©å±•ç±»/"}]},{"title":"mysqlè§†å›¾çš„ä½¿ç”¨æ–¹æ³•","slug":"mysqlè§†å›¾çš„ä½¿ç”¨æ–¹æ³•","date":"2019-08-15T10:48:57.000Z","updated":"2021-09-03T05:56:57.934Z","comments":true,"path":"mysqlè§†å›¾çš„ä½¿ç”¨æ–¹æ³•/","link":"","permalink":"http://www.daichongweb.com/mysqlè§†å›¾çš„ä½¿ç”¨æ–¹æ³•/","excerpt":"&emsp;ä¸Šç¯‡ç®€å•çš„ä»‹ç»äº†è§†å›¾çš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¿™ç¯‡å°†å‘Šè¯‰å¤§å®¶å¦‚ä½•åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è§†å›¾çš„åŸºæœ¬æ“ä½œäº†ï¼ ä¸€ã€åœ¨å•è¡¨ä¸Šåˆ›å»ºè§†å›¾12345678# åˆ›å»ºè¡¨ usercreate table user (id int,name varchar(10),age tinyint(3));# æ’å…¥æ•°æ®insert into user values(1,&apos;å¼ ä¸‰&apos;,20),(2,&apos;æå››&apos;,20);# åˆ›å»ºè§†å›¾-å¹¶è®¡ç®—ä»–ä»¬ä¸¤å¹´ä¹‹åå¤šå°‘å²create view view_user as select id,name,age+2 as age from user; # ç¬¬äºŒç§å†™æ³•create view view_user_1(user_id,user_name,user_age) as select id,name,age from user;","text":"&emsp;ä¸Šç¯‡ç®€å•çš„ä»‹ç»äº†è§†å›¾çš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¿™ç¯‡å°†å‘Šè¯‰å¤§å®¶å¦‚ä½•åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è§†å›¾çš„åŸºæœ¬æ“ä½œäº†ï¼ ä¸€ã€åœ¨å•è¡¨ä¸Šåˆ›å»ºè§†å›¾12345678# åˆ›å»ºè¡¨ usercreate table user (id int,name varchar(10),age tinyint(3));# æ’å…¥æ•°æ®insert into user values(1,&apos;å¼ ä¸‰&apos;,20),(2,&apos;æå››&apos;,20);# åˆ›å»ºè§†å›¾-å¹¶è®¡ç®—ä»–ä»¬ä¸¤å¹´ä¹‹åå¤šå°‘å²create view view_user as select id,name,age+2 as age from user; # ç¬¬äºŒç§å†™æ³•create view view_user_1(user_id,user_name,user_age) as select id,name,age from user;å¾—åˆ°ç»“æœ:idnameage1å¼ ä¸‰222æå››223ç‹äºŒ22 user_iduser_nameuser_age1å¼ ä¸‰222æå››223ç‹äºŒ22ä»è¿™ä¸¤ç§å†™æ³•å¯ä»¥çœ‹å‡ºï¼Œåœ¨è§†å›¾ä¸Šæ˜¯å¯ä»¥ä½¿ç”¨è®¡ç®—çš„ï¼Œè™½ç„¶ä¸¤ä¸ªè§†å›¾ä¸­å­—æ®µåä¸åŒï¼Œä½†æ•°æ®ç¡®å®ç›¸åŒçš„ã€‚å› æ­¤åœ¨ä½¿ç”¨è§†å›¾çš„æ—¶å€™ï¼Œç”¨æˆ·æ ¹æœ¬æ¥è§¦ä¸åˆ°å®é™…è¡¨ä¸­çš„ç»“æ„å’Œæ•°æ®ï¼Œä»è€Œä¿è¯äº†æ•°æ®åº“çš„å®‰å…¨ã€‚äºŒã€åœ¨å¤šè¡¨ä¸Šåˆ›å»ºè§†å›¾12345678# åˆ›å»ºè¡¨ userã€schoolcreate table user (id int, name varchar(10), age tinyint(3), school_id int);create table school (id int, name varchar(10));# æ’å…¥æ•°æ® insert into user values(1,&apos;å¼ ä¸‰&apos;,20,1),(2,&apos;æå››&apos;,20,2);insert into school values(1,&apos;æ¸…å&apos;),(2,&apos;åŒ—å¤§&apos;);# åˆ›å»ºè§†å›¾create view view_user_school(user_id,user_name,user_school) as select user.id,user.name school.name from user,school where user.school_id = school.id;é€šè¿‡è§†å›¾çœ‹åˆ°çš„ç»“æœï¼šuser_iduser_nameuser_school1å¼ ä¸‰æ¸…å2æå››åŒ—å¤§ ä¸‰ã€æŸ¥çœ‹è§†å›¾1desc è§†å›¾å;é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥çœ‹å‡ºè§†å›¾çš„å­—æ®µå®šä¹‰ã€å­—æ®µçš„æ•°æ®ç±»å‹ã€æ˜¯å¦ä¸ºç©ºã€æ˜¯å¦ä¸ºä¸»é”®/å¤–é”®ã€é»˜è®¤å€¼å’Œé¢å¤–ä¿¡æ¯ã€‚1select table status like &apos;è§†å›¾å&apos;;é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯çœ‹å‡ºå­˜å‚¨å¼•æ“ã€åˆ›å»ºæ—¶é—´ã€Commentã€‚1show create view &apos;è§†å›¾å&apos;;é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥çœ‹å‡ºè§†å›¾çš„åç§°ã€åˆ›å»ºè§†å›¾çš„è¯­å¥ç­‰ä¿¡æ¯ã€‚ å››ã€ä¿®æ”¹è§†å›¾1create or replace view view_user as select id,user,name,age from user; 1alert view view_user as select id,user,name,age from user; äº”ã€æ›´æ–°è§†å›¾12update view_user set age=100 where id=1;delete from view_user where id=1;å½“è§†å›¾æ›´æ–°çš„æ—¶å€™ç›¸å¯¹åº”çš„åŸºç¡€è¡¨ä¹Ÿä¼šè¢«æ›´æ–°ï¼Œä½†å¦‚æœæ˜¯å¤šè¡¨åˆ›å»ºã€ä½¿ç”¨äº†è®¡ç®—æˆ–è€…æ˜¯èšåˆå‡½æ•°éƒ½æ˜¯æ— æ³•ä¿®æ”¹/åˆ é™¤æˆåŠŸçš„ï¼Œå¹¶ä¸”ä¼šæŠ¥é”™ã€‚ å…­ã€åˆ é™¤è§†å›¾1drop view if exists view_user; æ€»ç»“ï¼š &emsp;1.ä¸¤è€…çš„åŒºåˆ« &emsp;&emsp;(1) è§†å›¾æ˜¯å·²ç»ç¼–è¯‘å¥½çš„sqlè¯­å¥ï¼Œæ˜¯åŸºäºsqlè¯­å¥çš„ç»“æœé›†å½¢æˆçš„å¯è§†åŒ–è¡¨ï¼Œè€Œè¡¨ä¸æ˜¯ã€‚&emsp;&emsp;(2) è§†å›¾æ²¡æœ‰å®é™…çš„ç‰©ç†è®°å½•ï¼Œè€Œè¡¨æœ‰ã€‚&emsp;&emsp;(3) è¡¨æ˜¯å†…å®¹ï¼Œè§†å›¾æ˜¯çª—å£ã€‚&emsp;&emsp;(4) è¡¨å ç”¨ç‰©ç†ç©ºé—´è€Œè§†å›¾ä¸å ç”¨ã€‚&emsp;&emsp;(5) è§†å›¾æ˜¯æŸ¥çœ‹æ•°æ®è¡¨çš„ä¸€ç§æ–¹æ³•ï¼Œä»å®‰å…¨è§’åº¦ä¸Šæ¥è¯´è§†å›¾å¯ä»¥é˜²æ­¢ç”¨æˆ·æ¥è§¦åˆ°æ•°æ®è¡¨ï¼Œä½¿ç”¨æˆ·ä¸çŸ¥é“è¡¨ç»“æ„ã€‚&emsp;&emsp;(6) è¡¨å±äºå…¨å±€æ¨¡å¼ä¸­çš„è¡¨ï¼Œæ˜¯å®è¡¨ï¼Œè§†å›¾æ˜¯å±€éƒ¨æ¨¡å¼çš„è¡¨ï¼Œæ˜¯è™šè¡¨ã€‚&emsp;&emsp;(7) è§†å›¾çš„ç®€å†å’Œåˆ é™¤åªä¼šå½±å“åˆ°è§†å›¾çš„æœ¬èº«ï¼Œä¸å½±å“å¯¹åº”è¡¨çš„åŸºæœ¬æ•°æ®ã€‚ &emsp;2.ä¸¤è€…çš„å…³ç³» &emsp;&emsp;(1) è§†å›¾æ˜¯å»ºç«‹åœ¨åŸºæœ¬è¡¨çº¸ä¸Šçš„è¡¨ï¼Œå®ƒçš„ç»“æ„éƒ½æ¥æºäºåŸºæœ¬è¡¨ã€‚æ— åŸºæœ¬è¡¨è§†å›¾å°†æ— æ³•å»ºç«‹ï¼Œè§†å›¾æ˜¯åŸºæœ¬è¡¨çš„æŠ½è±¡å’Œåœ¨é€»è¾‘æ„ä¹‰ä¸Šå»ºç«‹çš„æ–°å…³ç³»ã€‚","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"mysqlè§†å›¾ä»‹ç»","slug":"mysqlè§†å›¾ä»‹ç»","date":"2019-08-15T09:01:27.000Z","updated":"2021-09-03T05:56:57.934Z","comments":true,"path":"mysqlè§†å›¾ä»‹ç»/","link":"","permalink":"http://www.daichongweb.com/mysqlè§†å›¾ä»‹ç»/","excerpt":"ä¸€ã€è§†å›¾çš„å«ä¹‰ &emsp;1.è§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­å¯¼å‡ºçš„ï¼Œè§†å›¾çš„è¡Œä¸ºä¸è¡¨éå¸¸çš„ç›¸ä¼¼ï¼Œä½†è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨ã€‚åœ¨è§†å›¾ä¸­å¯ä»¥ä½¿ç”¨Selectè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Insertã€Updateã€Deleteï¼Œè§†å›¾è¿˜å¯ä»¥ä»å·²ç»å­˜åœ¨çš„è§†å›¾çš„åŸºç¡€ä¸Šå®šä¹‰ï¼ˆä¹Ÿå°±æ˜¯è§†å›¾ä¸Šå†åšè§†å›¾ï¼‰ã€‚","text":"ä¸€ã€è§†å›¾çš„å«ä¹‰ &emsp;1.è§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­å¯¼å‡ºçš„ï¼Œè§†å›¾çš„è¡Œä¸ºä¸è¡¨éå¸¸çš„ç›¸ä¼¼ï¼Œä½†è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨ã€‚åœ¨è§†å›¾ä¸­å¯ä»¥ä½¿ç”¨Selectè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Insertã€Updateã€Deleteï¼Œè§†å›¾è¿˜å¯ä»¥ä»å·²ç»å­˜åœ¨çš„è§†å›¾çš„åŸºç¡€ä¸Šå®šä¹‰ï¼ˆä¹Ÿå°±æ˜¯è§†å›¾ä¸Šå†åšè§†å›¾ï¼‰ã€‚&emsp;2.è§†å›¾å®šä¹‰å¥½ä¹‹åä¼šå­˜åœ¨æ•°æ®åº“ä¸­ï¼Œä»è§†å›¾çœ‹åˆ°çš„æ•°æ®å¹¶ä¸æ˜¯è§†å›¾çœŸæ­£å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œé€šè¿‡è§†å›¾çœ‹åˆ°çš„æ•°æ®åªæ˜¯å­˜æ”¾åœ¨åŸºæœ¬è¡¨ä¸­çš„æ•°æ®ã€‚ &emsp;3.å¯¹è§†å›¾çš„æ“ä½œå’Œå¯¹è¡¨çš„æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥è¿›è¡ŒCURDã€‚å½“ä¿®æ”¹é€šè¿‡è§†å›¾çœ‹åˆ°çš„æ•°æ®æ—¶ï¼Œç›¸å¯¹äºçš„åŸºæœ¬è¡¨çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–;åŒæ—¶ï¼Œè‹¥åŸºæœ¬è¡¨çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè§†å›¾çœ‹åˆ°çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚ äºŒã€å¦‚ä½•ç†è§£è§†å›¾ä¸åŸºæœ¬è¡¨çš„å…³ç³»å‘¢ï¼Ÿ &emsp;æœ‰ä¸€å¼ ç”¨æˆ·è¡¨ï¼šIDå§“åå¹´é¾„å­¦æ ¡1å¼ ä¸‰20æ¸…å2æå››20åŒ—å¤§3ç‹äºŒ20åŒ—å¤§ &emsp;åˆ›å»ºä¸€ä¸ªåŸºäºç”¨æˆ·è¡¨çš„è§†å›¾ï¼Œè§†å›¾é‡Œçš„å­—æ®µåªæœ‰å§“åå’Œå¹´é¾„ï¼Œé‚£ä¹ˆä»–ä»¬çš„å…³ç³»å°±åƒåœ¨è¿™ä¸ªç”¨æˆ·è¡¨ä¸Šç›–äº†ä¸€ä¸ªæœ¨æ¿ï¼Œæœ¨æ¿ä¸Šç•™äº†ä¸ªçª—å£ï¼Œä»è¿™ä¸ªçª—å£çœ‹è¿›å»åªèƒ½çœ‹è§å§“åå’Œå¹´é¾„ï¼Œè¿™ä¾¿æ˜¯è§†å›¾çš„ä½œç”¨å’Œä»–ä»¬çš„å…³ç³»ã€‚ ä¸‰ã€è§†å›¾çš„ä½œç”¨ &emsp;ä¸ç›´æ¥ä»æ•°æ®è¡¨ä¸­è¯»å–æ•°æ®ç›¸æ¯”ï¼Œè§†å›¾å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š &emsp;&emsp;(1)ã€ç®€å•åŒ– &emsp;&emsp;&emsp;&emsp;ï¼šä»è§†å›¾çœ‹åˆ°çš„æ•°æ®ä½ å¯ä»¥è‡ªå®šä¹‰ï¼Œä¹Ÿå°±æ˜¯è¯´çœ‹åˆ°çš„éƒ½æ˜¯éœ€è¦çš„æ•°æ®ã€‚é‚£äº›è¢«ç»å¸¸ä½¿ç”¨æŸ¥è¯¢çš„è¡¨å¯ä»¥åˆ›å»ºä¸€å¼ è§†å›¾ï¼Œä»è€Œä½¿ä½¿ä»¥åçš„æ“ä½œä¸éœ€è¦éƒ½å‡è®¾å…¨éƒ¨çš„æ¡ä»¶ã€‚ &emsp;&emsp;(2)ã€å®‰å…¨æ€§ &emsp;&emsp;&emsp;&emsp;ï¼šå‡å¦‚æ•°æ®è¡¨çš„æŸäº›å­—æ®µæ˜¯éšç§çš„ï¼Œä¸æƒ³è¢«å…¶ä»–äººçœ‹åˆ°ã€‚è¿™æ—¶ä½ å°±å¯ä»¥åˆ›å»ºä¸€å¼ è§†å›¾æŠŠéšç§çš„å­—æ®µè¿‡æ»¤æ‰ã€‚ &emsp;&emsp;(3)ã€é€»è¾‘æ•°æ®ç‹¬ç«‹æ€§ &emsp;&emsp;&emsp;&emsp;ï¼šè§†å›¾å¯å¸®åŠ©ç”¨æˆ·å±è”½çœŸå®çš„è¡¨ç»“æ„å˜åŒ–å¸¦æ¥çš„å½±å“ã€‚ PS:ä¸‹ç¯‡è®²ä»‹ç»è§†å›¾å¦‚ä½•åˆ›å»ºã€ä½¿ç”¨ç­‰ã€‚","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"charlesè¿‡æ»¤æ•°æ®åŒ…","slug":"charlesè¿‡æ»¤æ•°æ®åŒ…","date":"2019-08-09T05:04:51.000Z","updated":"2021-09-03T05:56:57.909Z","comments":true,"path":"charlesè¿‡æ»¤æ•°æ®åŒ…/","link":"","permalink":"http://www.daichongweb.com/charlesè¿‡æ»¤æ•°æ®åŒ…/","excerpt":"1.1 è®¾ç½®è¿‡æ»¤ï¼šæ‰¾åˆ°ã€Proxyã€‘-ã€Recording Settingã€‘","text":"1.1 è®¾ç½®è¿‡æ»¤ï¼šæ‰¾åˆ°ã€Proxyã€‘-ã€Recording Settingã€‘ç‚¹å‡»Addæ·»åŠ è¿‡æ»¤è§„åˆ™ï¼š ï¼ˆ1ï¼‰Protocol é€‰æ‹©è¿‡æ»¤çš„åè®® ï¼ˆ2ï¼‰Host å¡«å†™IPæˆ–ç½‘å€ ï¼ˆ3ï¼‰Port å¡«å†™ç«¯å£ *ä¸ºå…¨éƒ¨ç«¯å£","categories":[],"tags":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/tags/å¼€å‘å·¥å…·/"}]},{"title":"charlesæŠ“iosæ‰‹æœºæ•°æ®åŒ…","slug":"charlesæŠ“iosæ‰‹æœºæ•°æ®åŒ…","date":"2019-08-09T02:57:15.000Z","updated":"2021-09-03T05:56:57.898Z","comments":true,"path":"charlesæŠ“iosæ‰‹æœºæ•°æ®åŒ…/","link":"","permalink":"http://www.daichongweb.com/charlesæŠ“iosæ‰‹æœºæ•°æ®åŒ…/","excerpt":"Charleså…¶å®æ˜¯ä¸€æ¬¾ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡è¿‡å°†è‡ªå·±è®¾ç½®æˆç³»ç»Ÿï¼ˆç”µè„‘æˆ–è€…æµè§ˆå™¨ï¼‰çš„ç½‘ç»œè®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œç„¶åæˆªå–è¯·æ±‚å’Œè¯·æ±‚ç»“æœè¾¾åˆ°åˆ†ææŠ“åŒ…çš„ç›®çš„ã€‚è¯¥è½¯ä»¶æ˜¯ç”¨Javaå†™çš„ï¼Œèƒ½å¤Ÿåœ¨Windowsï¼ŒMacï¼ŒLinuxä¸Šä½¿ç”¨.","text":"Charleså…¶å®æ˜¯ä¸€æ¬¾ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡è¿‡å°†è‡ªå·±è®¾ç½®æˆç³»ç»Ÿï¼ˆç”µè„‘æˆ–è€…æµè§ˆå™¨ï¼‰çš„ç½‘ç»œè®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œç„¶åæˆªå–è¯·æ±‚å’Œè¯·æ±‚ç»“æœè¾¾åˆ°åˆ†ææŠ“åŒ…çš„ç›®çš„ã€‚è¯¥è½¯ä»¶æ˜¯ç”¨Javaå†™çš„ï¼Œèƒ½å¤Ÿåœ¨Windowsï¼ŒMacï¼ŒLinuxä¸Šä½¿ç”¨.Charlesçš„ä¸»è¦åŠŸèƒ½ï¼š ï¼ˆ1ï¼‰æˆªå–Http å’Œ Https ç½‘ç»œå°åŒ…ã€‚ ï¼ˆ2ï¼‰æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•ã€‚ ï¼ˆ3ï¼‰æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ã€‚ ï¼ˆ4ï¼‰æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹ã€‚ ï¼ˆ5ï¼‰æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ 1.1 ä¸‹è½½å®‰è£…Charlesï¼š ç‚¹å‡»ä¸‹è½½ 1.2 è®¾ç½®ä»£ç†æ¨¡å¼ï¼šè®¾ç½®ç«¯å£ä¸º8888ï¼Œå‹¾é€‰ä¸ŠEnable transparency HTTP proxying 1.3 è®¾ç½®æœ¬æœºä¸ºä»£ç†ï¼šå‹¾é€‰ä¸ºMac local æœ¬åœ°ä»£ç† 1.4 è®¾ç½®è¿‡æ»¤åè®®ï¼šè®¾ç½®æŠ“å–åè®®ç±»å‹ . ä¸ºå…¨éƒ¨hostçš„æ‰€ä»¥åè®®ç«¯å£ åˆ°æ­¤ä¸ºæ­¢å…¶å®å·²ç»å¯ä»¥æŠ“å–åˆ°æ‰‹æœºçš„æ•°æ®åŒ…äº†ï¼Œåªæ˜¯æ— æ³•æŠ“å–httpsåè®®çš„æ•°æ®åŒ…ã€‚ 2.1 å®‰è£…è¯ä¹¦ï¼šæŠ“httpsæ•°æ®åŒ…ï¼Œç‚¹å‡»ä¹‹åä¼šå¼¹å‡ºç”µè„‘è¯ä¹¦çš„åˆ—è¡¨ 2.2 è®¾ç½®ä¿¡ä»»ï¼šæ‰¾åˆ°åˆšä¸‹è½½çš„Charlesè¯ä¹¦ï¼ŒåŒå‡»æ‰“å¼€ï¼Œè®¾ç½®å§‹ç»ˆä¿¡ä»» 3.3 è·å–è¯ä¹¦ä¸‹è½½åœ°å€ 3.4 ä¸‹è½½è¯ä¹¦ï¼šç”¨è‹¹æœæµè§ˆå™¨è®¿é—®chls.pro/sslä¸‹è½½è¯ä¹¦ 3.5 å®‰è£…è¯ä¹¦ï¼šåœ¨ã€è®¾ç½®ã€‘-ã€é€šç”¨ã€‘-ã€æè¿°æ–‡ä»¶ã€‘ä¸­æ‰¾åˆ°åˆšåˆšä¸‹è½½çš„è¯ä¹¦ï¼ŒåŒå‡»å¹¶å®‰è£… 3.6 è®¾ç½®ä¿¡ä»»ï¼šåœ¨ã€è®¾ç½®ã€‘-ã€é€šç”¨ã€‘-ã€å…³äºæœ¬æœºã€‘-ã€è¯ä¹¦ä¿¡ä»»è®¾ç½®ã€‘ä¸­æ‰¾åˆ°å®‰è£…çš„è¯ä¹¦ï¼Œç‚¹å‡»è®¾ç½®ä¸ºä¿¡ä»» ä¹‹åå°±å’Œç”µè„‘è¿æ¥åŒä¸€ä¸ªwifi,é…ç½®ä»£ç†ä¸ºç”µè„‘ç«¯çš„æœ¬æœºipï¼Œç«¯å£ä¸ºè®¾ç½®çš„8888ï¼Œè¿æ¥ä¹‹åç”µè„‘ç«¯ä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œç‚¹å‡»Allowå°±okäº†ã€‚","categories":[],"tags":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/tags/å¼€å‘å·¥å…·/"}]},{"title":"gitè¦†ç›–æœ¬åœ°æœªæäº¤çš„ä»£ç ","slug":"gitè¦†ç›–æœ¬åœ°æœªæäº¤çš„ä»£ç ","date":"2019-06-23T07:37:13.000Z","updated":"2021-09-03T05:56:57.912Z","comments":true,"path":"gitè¦†ç›–æœ¬åœ°æœªæäº¤çš„ä»£ç /","link":"","permalink":"http://www.daichongweb.com/gitè¦†ç›–æœ¬åœ°æœªæäº¤çš„ä»£ç /","excerpt":"&emsp;åœ¨å¤šäººåä½œå¼€å‘ä¸­ï¼Œä½¿ç”¨gitæˆ–svnç®¡ç†ä»£ç æœ€å¸¸è§çš„é—®é¢˜å°±æ˜¯ä»£ç å†²çªï¼ &emsp;ä½œä¸ºé«˜æ•ˆå¼€å‘å›¢é˜Ÿä¸­çš„ä¸€å‘˜åº”å½“å…·æœ‰å¤„ç†è¿™äº›é—®é¢˜çš„èƒ½åŠ›ã€‚ &emsp;å‡è®¾ç°æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œæœ‰å¤šä¸ªå¼€å‘æˆå‘˜ï¼Œæˆå‘˜Aå’Œæˆå‘˜Bå…±åŒç®¡ç†åŒä¸€ä¸ªåˆ†æ”¯çš„ä»£ç ã€‚æˆå‘˜Aåœ¨æœ¬åœ°ä¿®æ”¹äº†ä»£ç å¹¶æäº¤åˆ°daichongwebåˆ†æ”¯ï¼Œæˆå‘˜Bä¹Ÿä¿®æ”¹äº†ä»£ç ï¼Œå½“æˆå‘˜Béœ€è¦ç”¨åˆ°æˆå‘˜Aæäº¤ä»£ç ä¸­çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œéœ€è¦æ‹‰å–daichongwebåˆ†æ”¯çš„ä»£ç ï¼Œè¿™æ—¶ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ã€‚","text":"&emsp;åœ¨å¤šäººåä½œå¼€å‘ä¸­ï¼Œä½¿ç”¨gitæˆ–svnç®¡ç†ä»£ç æœ€å¸¸è§çš„é—®é¢˜å°±æ˜¯ä»£ç å†²çªï¼ &emsp;ä½œä¸ºé«˜æ•ˆå¼€å‘å›¢é˜Ÿä¸­çš„ä¸€å‘˜åº”å½“å…·æœ‰å¤„ç†è¿™äº›é—®é¢˜çš„èƒ½åŠ›ã€‚ &emsp;å‡è®¾ç°æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œæœ‰å¤šä¸ªå¼€å‘æˆå‘˜ï¼Œæˆå‘˜Aå’Œæˆå‘˜Bå…±åŒç®¡ç†åŒä¸€ä¸ªåˆ†æ”¯çš„ä»£ç ã€‚æˆå‘˜Aåœ¨æœ¬åœ°ä¿®æ”¹äº†ä»£ç å¹¶æäº¤åˆ°daichongwebåˆ†æ”¯ï¼Œæˆå‘˜Bä¹Ÿä¿®æ”¹äº†ä»£ç ï¼Œå½“æˆå‘˜Béœ€è¦ç”¨åˆ°æˆå‘˜Aæäº¤ä»£ç ä¸­çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œéœ€è¦æ‹‰å–daichongwebåˆ†æ”¯çš„ä»£ç ï¼Œè¿™æ—¶ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ã€‚&emsp;å¯ä»¥çœ‹å‡ºgitä¸å…è®¸æ‹‰å–ä»£ç ï¼Œå› ä¸ºæˆå‘˜Aä¹ŸåŒæ ·ä¿®æ”¹äº†ä»£ç ã€‚é‚£ä¹ˆèƒ½æäº¤å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ï¼æäº¤ä¼šå‡ºç°ä»£ç å†²çªçš„é”™è¯¯ï¼ &emsp;è¿™æ—¶åº”è¯¥æƒ³åˆ°çš„æ˜¯å¦‚ä½•æŠŠæœ¬åœ°ä»£ç ä¿å­˜èµ·æ¥ï¼Œå½“ç„¶gitæä¾›äº†å‘½ä»¤ã€‚1git stash&emsp;ä½¿ç”¨ git stash å¯å°†å·²ä¿®æ”¹çš„ä»£ç ä¿å­˜èµ·æ¥ï¼Œç„¶ååœ¨ä½¿ç”¨git pull æ‹‰å–ä»£ç å°±ä¸ä¼šå‡ºç°é”™è¯¯ã€‚ &emsp;ç„¶åæ‰§è¡Œgit stash listæŸ¥çœ‹æš‚å­˜ä»£ç ï¼Œå†ä½¿ç”¨git stash pop stash@{0}æŠŠä»£ç popå‡ºæ¥ï¼Œè¿™æ—¶ä¼šæç¤ºå†²çªï¼ŒæŠŠå†²çªè§£å†³å°±å¥½äº†ã€‚12git stash list git stash pop stash@&#123;0&#125; æ€»ç»“ ä»£ç å†²çªè¦åœ¨æœ¬åœ°å¤„ç†ï¼Œä¸è¦ç›´æ¥æäº¤ã€‚è§£å†³åŒä¸€åˆ†æ”¯å†²çªçš„æ­¥éª¤ï¼š12345git stashgit pullgit stash list git stash pop stash@&#123;0&#125;è§£å†³å†²çª","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://www.daichongweb.com/tags/git/"}]},{"title":"ã€åŸåˆ›ã€‘phpgdåº“å¤„ç†å›¾ç‰‡ç”Ÿæˆæµ·æŠ¥å›¾","slug":"phpgdåº“å¤„ç†å›¾ç‰‡ç”Ÿæˆæµ·æŠ¥å›¾","date":"2019-05-23T10:14:12.000Z","updated":"2021-09-03T05:56:57.946Z","comments":true,"path":"phpgdåº“å¤„ç†å›¾ç‰‡ç”Ÿæˆæµ·æŠ¥å›¾/","link":"","permalink":"http://www.daichongweb.com/phpgdåº“å¤„ç†å›¾ç‰‡ç”Ÿæˆæµ·æŠ¥å›¾/","excerpt":"ä¸€.å¼•è¨€ &emsp;å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œä¸çŸ¥é“è¯¥å†™äº›ä»€ä¹ˆã€‚&emsp;æ­£å‘æ„å‘¢ï¼Œçªç„¶å‘ç°äº†ä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿ã€‚&emsp;æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯phpçš„ä¸€ä¸ªæ‰©å±•GDåº“ã€‚ &emsp;ä¸ºä»€ä¹ˆè¯´ä»–å¥½ç©ï¼Ÿå› ä¸ºGDåº“å°±åƒä¸€ä¸ªå›¾ç‰‡å¤„ç†å™¨ï¼Œå®ƒå¯ä»¥ç»„åˆå›¾ç‰‡ã€å‰ªè¾‘å›¾ç‰‡ç­‰ç­‰â€¦. &emsp;åæ¥ç»è¿‡æ•´ç†å’Œå®è·µå‘ç°ï¼Œè¿™ä¸ªä¸œè¥¿æ¯”è¾ƒé€‚åˆåšäº§å“æ¨å¹¿å›¾æ¥ç”¨ï¼Œæ›´åŠ é€‚åˆåœ¨å…¬ä¼—å·æˆ–å°ç¨‹åºé‡Œè·ŸäºŒç»´ç ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚","text":"ä¸€.å¼•è¨€ &emsp;å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œä¸çŸ¥é“è¯¥å†™äº›ä»€ä¹ˆã€‚&emsp;æ­£å‘æ„å‘¢ï¼Œçªç„¶å‘ç°äº†ä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿ã€‚&emsp;æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯phpçš„ä¸€ä¸ªæ‰©å±•GDåº“ã€‚ &emsp;ä¸ºä»€ä¹ˆè¯´ä»–å¥½ç©ï¼Ÿå› ä¸ºGDåº“å°±åƒä¸€ä¸ªå›¾ç‰‡å¤„ç†å™¨ï¼Œå®ƒå¯ä»¥ç»„åˆå›¾ç‰‡ã€å‰ªè¾‘å›¾ç‰‡ç­‰ç­‰â€¦. &emsp;åæ¥ç»è¿‡æ•´ç†å’Œå®è·µå‘ç°ï¼Œè¿™ä¸ªä¸œè¥¿æ¯”è¾ƒé€‚åˆåšäº§å“æ¨å¹¿å›¾æ¥ç”¨ï¼Œæ›´åŠ é€‚åˆåœ¨å…¬ä¼—å·æˆ–å°ç¨‹åºé‡Œè·ŸäºŒç»´ç ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚äºŒ.ç®€å•ä»‹ç» &emsp;1).å¦‚ä½•ä¸‹è½½ç±»åº“&amp;&amp;æµ‹è¯•demoï¼Œå¤§å®¶å¯ä»¥ä»githubä¸Šæ‹‰å–ï¼Œåœ°å€ï¼šç±»åº“&&demo&emsp;2).å¦‚ä½•ä½¿ç”¨1234&lt;?phpuse \\CreatePoster\\CreateHelper;require &apos;./gd.php&apos;;CreateHelper::start();&emsp;3).æ³¨æ„äº‹é¡¹ï¼š&emsp;&emsp;1.å†™å…¥å­—ä½“è¦å¼•å…¥å­—ä½“æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ä¸€èˆ¬ä¸ºç»å¯¹è·¯å¾„ã€‚&emsp;&emsp;2.ä¸‹è½½åœ°å€å¯ä»¥åœ¨loadå‡½æ•°ä¸­é…ç½®ã€‚&emsp;&emsp;3.ä¸»å›¾æœ€å¥½æ˜¯pngæ ¼å¼ï¼Œè¿™æ ·æ¸…æ™°åº¦ä¼šå¾ˆé«˜ã€‚&emsp;&emsp;4.ä½¿ç”¨CreateImageåˆ›å»ºç”»æ¿æ—¶ï¼Œå¦‚æœä¼ å…¥çš„å›¾ç‰‡è¾ƒå°ï¼Œå¦‚éœ€æ”¾å¤§è¯·ä½¿ç”¨ç¬¬4å’Œç¬¬5ä¸ªå‚æ•°ã€‚ &emsp;&emsp;5.ä½¿ç”¨CreateImageåˆ›å»ºç”»æ¿æ—¶ï¼Œæ³¨æ„imagecolortransparentä½¿ç”¨ï¼Œä»–ä¼šæŠŠç”»æ¿å˜ä¸ºé€æ˜ã€‚ PS:å…¶ä»–çš„ç”¨é€”å°±çœ‹å¤§å®¶çš„åˆ›æ„ã€æƒ³æ³•äº†ã€‚æˆ‘ä»¬ä¸åšä»£ç æ¬è¿å·¥ï¼Œæˆ‘ä»¬è¦åšä»£ç è‰ºæœ¯å®¶ã€‚åç»­æ­¤ç±»ä¼šç»å¸¸çš„æ›´æ–°å’Œä¼˜åŒ–â€¦.å››.ä»£ç æµè§ˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360&lt;?phpnamespace CreatePoster;/** * ç”Ÿæˆæµ·æŠ¥å›¾ * @author daichongweb * @url daichongweb.cn,daichongweb.com */class CreateHelper&#123; public static function start() &#123; echo (&apos;&lt;h2&gt;æ¬¢è¿ä½¿ç”¨ï¼š)&lt;/h2&gt;&apos;); echo &apos;&lt;hr /&gt;&apos;; echo &apos;æµ·æŠ¥å›¾åˆ¶ä½œæ­¥éª¤:&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&amp;emsp;&amp;emsp;1.åˆ›å»ºç”»æ¿(æ™®é€šç”»æ¿ç”¨CreatePalette;å›¾åƒç”»æ¿ç”¨CreateImage)&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&amp;emsp;&amp;emsp;2.åˆå¹¶å›¾ç‰‡(ImagesMerge)&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&amp;emsp;&amp;emsp;3.æ’å…¥æ–‡å­—(CreateChars)&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&amp;emsp;&amp;emsp;4.æ’å…¥åˆ’çº¿(CreateLine)&apos;; echo &apos;&lt;br /&gt;&apos;; echo &apos;&amp;emsp;&amp;emsp;5.ä¸‹è½½æˆ–æŸ¥çœ‹&apos;; echo &apos;&lt;br /&gt;&apos;; echo (&apos;&lt;h2&gt;æ³¨æ„äº‹é¡¹:&lt;/h2&gt;&apos;); echo &apos;&lt;hr /&gt;&apos;; echo &quot;&lt;font color=&apos;red&apos;&gt;æ³¨æ„äº‹é¡¹ï¼šä¸»å›¾å°½é‡æ”¹ä¸ºpngæ ¼å¼ï¼Œè¿™æ ·çš„è¯å›¾ç‰‡ä¼šå¾ˆæ¸…æ™°ï¼Œåœ¨æµè§ˆå™¨ä¸­ç›´æ¥æŸ¥çœ‹æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œä¸‹è½½ä¸‹æ¥å°±ä¼šå¾ˆæ¸…æ™°çš„ã€‚&lt;/font&gt;&quot;; &#125; /** * [CreatePalette æ–°å»ºä¸€ä¸ªç”»æ¿] * @param array $config æ•°æ®é…ç½® * @param int $x_size ç”»æ¿çš„å®½åº¦ * @param int $y_size ç”»æ¿çš„é«˜åº¦ * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² */ public static function CreatePalette($config) &#123; $Palette = imagecreate($config[&apos;x_size&apos;], $config[&apos;y_size&apos;]); imagecolorallocate($Palette, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); return $Palette; &#125; /** * [OrthogonBr ç”»ä¸€ä¸ªçŸ©å½¢è¾¹æ¡†] * @param resource $mainBg ç”»å¸ƒèµ„æº * @param array $config æ•°æ®é…ç½® * @param int $x1 xåæ ‡ * @param int $y1 yåæ ‡ * * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² */ public static function OrthogonBr($mainBg, $config) &#123; $color = imagecolorallocate($mainBg, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); imagerectangle($mainBg, $config[&apos;x1&apos;], $config[&apos;y1&apos;], $config[&apos;x2&apos;], $config[&apos;y2&apos;], $color); &#125; /** * [OrthogonBg ç”»ä¸€ä¸ªçŸ©å½¢å®ä½“] * @param resource $mainBg ç”»å¸ƒèµ„æº * @param array $config æ•°æ®é…ç½® * @param int $x1 xåæ ‡ * @param int $y1 yåæ ‡ * * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² */ public static function OrthogonBg($mainBg, $config) &#123; $color = imagecolorallocate($mainBg, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); imagefilledrectangle($mainBg, $config[&apos;x1&apos;], $config[&apos;y1&apos;], $config[&apos;x2&apos;], $config[&apos;y2&apos;], $color); &#125; /** * [CircleBr ç”»ä¸€ä¸ªæ¤­åœ†è¾¹æ¡†] * @param resource $mainBg ç”»å¸ƒèµ„æº * @param array $config æ•°æ®é…ç½® * @param int $left è·ç¦»å·¦è¾¹çš„è·ç¦» * @param int $top è·ç¦»ä¸Šè¾¹çš„è·ç¦» * @param int $width å®½åº¦ * @param int $height é«˜åº¦ * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² */ public static function CircleBr($mainBg, $config) &#123; $color = imagecolorallocate($mainBg, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); imageellipse($mainBg, $config[&apos;left&apos;], $config[&apos;top&apos;], $config[&apos;width&apos;], $config[&apos;height&apos;], $color); &#125; /** * [CircleBg ç”»ä¸€ä¸ªå®ä½“æ¤­åœ†] * @param resource $mainBg ç”»å¸ƒèµ„æº * @param array $config æ•°æ®é…ç½® * @param int $left è·ç¦»å·¦è¾¹çš„è·ç¦» * @param int $top è·ç¦»ä¸Šè¾¹çš„è·ç¦» * @param int $width å®½åº¦ * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² */ public static function CircleBg($mainBg, $config) &#123; $color = imagecolorallocate($mainBg, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); imagefilledellipse($mainBg, $config[&apos;left&apos;], $config[&apos;top&apos;], $config[&apos;width&apos;], $config[&apos;height&apos;], $color); &#125; /** * [StarBr ç”»ä¸€ä¸ªäº”è§’æ˜Ÿè¾¹æ¡†] * @param resource $mainBg ç”»å¸ƒèµ„æº * @param array $config æ•°æ®é…ç½® * @param int $r åŠå¾„ * @param int $left è·ç¦»å·¦è¾¹çš„è·ç¦» * @param int $top è·ç¦»ä¸Šè¾¹çš„è·ç¦» */ public static function StarBr($mainBg, $config) &#123; $r = $config[&apos;r&apos;]; $degree36 = deg2rad(36); $l = 2 * $r * sin($degree36); $a = $l * cos($degree36); $b = $l * sin($degree36); $c = $l / 2; $d = $r * cos($degree36); $px1 = $config[&apos;left&apos;]; $py1 = $config[&apos;top&apos;]; $px2 = $px1 + $a; $py2 = $py1 + $b; $px3 = $px1 + $c; $py3 = $py1 + $r + $d; $px4 = $px1 - $c; $py4 = $py1 + $r + $d; $px5 = $px1 - $a; $py5 = $py1 + $b; $color = imagecolorallocate($mainBg, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;]); imageline($mainBg, $px2, $py2, $px5, $py5, $color); imageline($mainBg, $px1, $py1, $px3, $py3, $color); imageline($mainBg, $px1, $py1, $px4, $py4, $color); imageline($mainBg, $px2, $py2, $px4, $py4, $color); imageline($mainBg, $px3, $py3, $px5, $py5, $color); &#125; /** * [CreateImage æ–°å»ºä¸€ä¸ªå›¾åƒç”»æ¿] * @param url $palette å›¾åƒçš„åœ°å€ * @param string $dst_w ç›®æ ‡å›¾ç‰‡çš„å®½åº¦ * @param string $dst_h ç›®æ ‡å›¾ç‰‡çš„é«˜åº¦ * @param string $bgWidth ç”»æ¿çš„å®½åº¦ * @param string $bgHeight ç”»æ¿çš„é«˜åº¦ è¿™ä¸¤é¡¹å†³å®šäº†å›¾ç‰‡å¦‚æœå°äº†æ˜¯å¦ä¼šè¢«æ‹‰ä¼¸ */ public static function CreateImage($palette, $dst_w = &apos;&apos;, $dst_h = &apos;&apos;, $bgWidth = &apos;&apos;, $bgHeight = &apos;&apos;) &#123; $info = getimagesize($palette); $backgroundFun = &apos;imagecreatefrom&apos; . image_type_to_extension($info[2], false); $background = $backgroundFun($palette); $backgroundWidth = imagesx($background); $backgroundHeight = imagesy($background); $imageRes = imageCreatetruecolor($bgWidth ? $bgWidth : $backgroundWidth, $bgHeight ? $bgHeight : $backgroundHeight); $color = imagecolorallocate($imageRes, 255, 255, 255); // æ­£å¼ä½¿ç”¨ è¿™ä¸ªå®šè¦æ³¨é‡Š // imagecolortransparent($imageRes, $color); imagefill($imageRes, 0, 0, $color); imagecopyresized($imageRes, $background, 0, 0, 0, 0, $dst_w ? $dst_w : imagesx($background), $dst_h ? $dst_h : imagesy($background), imagesx($background), imagesy($background)); return $imageRes; &#125; /** * [CreateChars åœ¨ç”»æ¿ä¸­æ’å…¥æ–‡å­—] * @param resource $image å›¾ç‰‡æº * @param array $config é…ç½®ä¿¡æ¯ * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² * @param int $num æ¬¡æ•°è¶Šå¤šæ–‡å­—è¶Šç²— * @param int $size æ–‡å­—å¤§å° * @param int $angle æ—‹è½¬çš„è§’åº¦ é»˜è®¤ä¸æ—‹è½¬ä¸º0 * @param int $x æ–‡å­—çš„åæ ‡x * @param int $y æ–‡å­—çš„åæ ‡y * @param int $font å­—ä½“æ–‡ä»¶ è¿™é‡Œä¸€èˆ¬ä¸ºç»å¯¹è·¯å¾„ * @param int $text æ–‡å­—å†…å®¹ * */ public static function CreateChars($image, $config) &#123; //è®¾ç½®æ–‡å­—é¢œè‰² $color = imagecolorexactalpha($image, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;], $config[&apos;alpha&apos;]); //å¾ªç¯å¤šæ¬¡ä¸ºäº†åŠ ç²—å­—ä½“ for ($i = 1; $i &lt;= $config[&apos;num&apos;]; $i++) &#123; imagettftext($image, $config[&apos;size&apos;], $config[&apos;angle&apos;], $config[&apos;x&apos;], $config[&apos;y&apos;], $color, $config[&apos;font&apos;], $config[&apos;text&apos;]); &#125; return $image; &#125; /** * [CreateLine ç”»ä¸€æ¡å®çº¿] * @param resource $image å›¾ç‰‡æº * @param array $config æ•°æ®é…ç½® * @param int $red çº¢è‰² * @param int $green ç»¿è‰² * @param int $blue è“è‰² * @param int $alpha é€æ˜åº¦ 0ä¸é€æ˜ * @param int $x1 x2 åæ ‡x * @param int $y1 y2 åæ ‡y */ public static function CreateLine($image, $config) &#123; //è®¾ç½®çº¿æ¡é¢œè‰² $color = imagecolorexactalpha($image, $config[&apos;red&apos;], $config[&apos;green&apos;], $config[&apos;blue&apos;], $config[&apos;alpha&apos;]); //åˆ’çº¿ imageline($image, $config[&apos;x1&apos;], $config[&apos;y1&apos;], $config[&apos;x2&apos;], $config[&apos;y2&apos;], $color); return $image; &#125; /** * [functionName å›¾ç‰‡åˆå¹¶] * å°† src_im å›¾åƒä¸­åæ ‡ä» src_xï¼Œsrc_y å¼€å§‹ï¼Œå®½åº¦ä¸º src_wï¼Œé«˜åº¦ä¸º src_h çš„ä¸€éƒ¨åˆ†æ‹·è´åˆ° dst_im å›¾åƒä¸­åæ ‡ä¸º dst_x å’Œ dst_y çš„ä½ç½®ä¸Šã€‚ä¸¤å›¾åƒå°†æ ¹æ® pct * æ¥å†³å®šåˆå¹¶ç¨‹åº¦ï¼Œå…¶å€¼èŒƒå›´ä» 0 åˆ° 100ã€‚å½“ pct = 0 æ—¶ï¼Œå®é™…ä¸Šä»€ä¹ˆä¹Ÿæ²¡åšï¼Œå½“ä¸º 100 æ—¶å¯¹äºè°ƒè‰²æ¿å›¾åƒæœ¬å‡½æ•°å’Œ imagecopy() å®Œå…¨ä¸€æ ·ï¼Œå®ƒå¯¹çœŸå½©è‰²å›¾åƒå®ç°äº† alpha * * é€æ˜ã€‚ * @return */ public static function ImagesMerge($mainBg, $second, $config) &#123; imagecopymerge($mainBg, $second, $config[&apos;dst_x&apos;], $config[&apos;dst_y&apos;], $config[&apos;src_x&apos;], $config[&apos;src_y&apos;], $config[&apos;src_w&apos;], $config[&apos;src_h&apos;], $config[&apos;pct&apos;]); &#125; /** * [AutoWrap æ–‡å­—æ¢è¡Œ] * @param int $fontsize å­—ä½“å¤§å° * @param int $angle è§’åº¦å¤§å° * @param int $fontface å­—ä½“æ–‡ä»¶ * @param string $string æ–‡å­—å†…å®¹ * @param width $width æœ€å¤§å®½åº¦ ä¹Ÿå°±æ˜¯è¾¾åˆ°è¿™ä¸ªå®½åº¦ä¹‹åä¼šæ¢è¡Œ */ public static function AutoWrap($fontsize, $angle, $fontface, $string, $width) &#123; $content = &quot;&quot;; // å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆä¸€ä¸ªä¸ªå•å­— ä¿å­˜åˆ°æ•°ç»„ letter ä¸­ for ($i = 0; $i &lt; mb_strlen($string); $i++) &#123; $letter[] = mb_substr($string, $i, 1); &#125; foreach ($letter as $l) &#123; $teststr = $content . &quot;&quot; . $l; $testbox = imagettfbbox($fontsize, $angle, $fontface, $teststr); // åˆ¤æ–­æ‹¼æ¥åçš„å­—ç¬¦ä¸²æ˜¯å¦è¶…è¿‡é¢„è®¾çš„å®½åº¦ if (($testbox[2] &gt; $width) &amp;&amp; ($content !== &quot;&quot;)) &#123; $content .= &quot;\\n&quot;; &#125; $content .= $l; &#125; $content = mb_convert_encoding($content, &quot;html-entities&quot;, &quot;utf-8&quot;); return $content; &#125; /** * [getInfo è·å–å›¾ç‰‡ä¿¡æ¯] * @param url $name å›¾ç‰‡åœ°å€ * @return array */ public static function getInfo($name) &#123; $info = getimagesize($name); $width = $info[0]; $height = $info[1]; $mime = $info[&apos;mime&apos;]; switch ($mime) &#123; case &apos;image/jpeg&apos;: $res = imagecreatefromjpeg($name); break; case &apos;image/gif&apos;: $res = imagecreatefromgif($name); break; case &apos;image/png&apos;: $res = imagecreatefrompng($name); break; case &apos;image/wbmp&apos;: $res = imagecreatefromwbmp($name); break; &#125; return array(&apos;width&apos; =&gt; $width, &apos;height&apos; =&gt; $height, &apos;res&apos; =&gt; $res); &#125; /** * [look åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå›¾ç‰‡] * @param resource $imageRes å›¾ç‰‡æº * @return */ public static function look($imageRes) &#123; header(&quot;Content-type:image/png&quot;); imagejpeg($imageRes); imagedestroy($imageRes); &#125; /** * [load ä¸‹è½½å›¾ç‰‡] * @param resource $img å›¾ç‰‡æº * @param url $name ä¸»å›¾åœ°å€ * @return */ public static function load($img, $name) &#123; $info = self::getInfo($name); $ext = pathinfo($name, PATHINFO_EXTENSION); $file_path = &apos;./&apos; . date(&apos;Y-m-d&apos;); if (!file_exists($file_path)) &#123; mkdir($file_path, 0777, true); &#125; $rand_name = $file_path . &apos;/&apos; . md5(mt_rand() . time()) . &quot;.&quot; . $ext; switch ($ext) &#123; case &apos;jpg&apos;: case &apos;jpeg&apos;: case &apos;jpe&apos;: imagejpeg($img, $rand_name); break; case &apos;png&apos;: imagepng($img, $rand_name); break; case &apos;gif&apos;: imagegif($img, $rand_name); break; case &apos;bmp&apos;: case &apos;wbmp&apos;: imagewbmp($img, $rand_name); break; &#125; //é”€æ¯èµ„æº imagedestroy($info[&apos;res&apos;]); imagedestroy($img); &#125;&#125;","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"ä½¿ç”¨htpasswdä¸ºwebç½‘ç«™å¢åŠ å®‰å…¨æ€§","slug":"ä½¿ç”¨htpasswdä¸ºwebç½‘ç«™å¢åŠ å®‰å…¨æ€§","date":"2019-05-13T07:34:52.000Z","updated":"2021-09-03T05:56:57.975Z","comments":true,"path":"ä½¿ç”¨htpasswdä¸ºwebç½‘ç«™å¢åŠ å®‰å…¨æ€§/","link":"","permalink":"http://www.daichongweb.com/ä½¿ç”¨htpasswdä¸ºwebç½‘ç«™å¢åŠ å®‰å…¨æ€§/","excerpt":"ä¸€.å¼•è¨€ ä»€ä¹ˆæ˜¯ htpasswd ?&emsp;(1)htpasswdæ˜¯å¼€æº http æœåŠ¡å™¨apache httpdçš„ä¸€ä¸ªå‘½ä»¤å·¥å…·ï¼Œç”¨äºç”Ÿæˆ http åŸºæœ¬è®¤è¯çš„å¯†ç æ–‡ä»¶ã€‚&emsp;(2)nginxåº•å±‚æä¾›äº† HttpAuthBasicæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ”¯æŒæœ€åŸºæœ¬çš„httpè®¤è¯ï¼Œè¿™æ˜¯httpåè®®æ”¯æŒçš„ã€‚å½“ä½ è®¿é—®ç½‘ç«™æ—¶å€™ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¦æ±‚ä½ è¾“å…¥è´¦å·å¯†ç ,åªè¦è¾“å…¥æ­£ç¡®æ‰èƒ½è®¿é—®å¯¹åº”çš„ç½‘ç«™ã€‚å¦‚æœè®¤è¯å¤±è´¥ä¼šæ€ä¹ˆæ · ?","text":"ä¸€.å¼•è¨€ ä»€ä¹ˆæ˜¯ htpasswd ?&emsp;(1)htpasswdæ˜¯å¼€æº http æœåŠ¡å™¨apache httpdçš„ä¸€ä¸ªå‘½ä»¤å·¥å…·ï¼Œç”¨äºç”Ÿæˆ http åŸºæœ¬è®¤è¯çš„å¯†ç æ–‡ä»¶ã€‚&emsp;(2)nginxåº•å±‚æä¾›äº† HttpAuthBasicæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ”¯æŒæœ€åŸºæœ¬çš„httpè®¤è¯ï¼Œè¿™æ˜¯httpåè®®æ”¯æŒçš„ã€‚å½“ä½ è®¿é—®ç½‘ç«™æ—¶å€™ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¦æ±‚ä½ è¾“å…¥è´¦å·å¯†ç ,åªè¦è¾“å…¥æ­£ç¡®æ‰èƒ½è®¿é—®å¯¹åº”çš„ç½‘ç«™ã€‚å¦‚æœè®¤è¯å¤±è´¥ä¼šæ€ä¹ˆæ · ?è¿™æ ·åšçš„ç›®çš„æ˜¯ä»€ä¹ˆ ?&emsp;(1)ä¸ºäº†ç¦æ­¢è®¿é—®ç‰¹æ®Šçš„ç½‘é¡µ(è¿™é‡Œæš‚æ—¶è¿˜æ²¡äº†è§£åˆ°ç‰¹æ®Šçš„ç”¨æ³•â€¦ä¹‹åå†è¡¥å……)&emsp;(2)æ˜¯çš„,æˆ‘ç”¨è¿™ä¸ªçš„åŸå› æ˜¯ä¸ºwalleé¡¹ç›®å®‰å…¨è€ƒè™‘çš„,å› ä¸ºwalleå®˜æ–¹æ¨èä¸ºäº†å®‰å…¨å°½é‡æ”¾åœ¨å†…ç½‘(è¿™é‡Œåº”è¯¥æ˜¯ä¸ºäº†é˜²æ­¢æš´åŠ›ç ´è§£),ä¹‹å‰çš„çš„åšæ–‡ä¹Ÿæœ‰è®²åˆ°å¯ä»¥ä½¿ç”¨åŒå‘è®¤è¯,ä½†æ˜¯å¯¹åˆå­¦è€…è€Œè¨€æ˜¯å¾ˆä¸å‹å¥½ã€æœ‰ç‚¹éº»çƒ¦çš„,é‚£ä¹ˆè¿™ä¸ªhtpasswdå°±éå¸¸ä¹‹ç®€å•äº†ï¼Œå°±æ˜¯æ•¢æ•¢å•å•ã€‚å“ï¼åä¸‹åä¸‹è¿™æ˜¯åŸºæ“ã€‚äºŒ.å®‰è£…&amp;&amp;é…ç½® &emsp;ç¬¬ä¸€æ­¥:æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…äº† httpd123456#httpd -vServer version: Apache/2.4.6 (CentOS)Server built: Apr 24 2019 13:45:48#æ²¡å®‰è£…çš„æ‰§è¡Œ#yum -y install httpd &emsp;ç¬¬äºŒæ­¥:åˆ›å»ºç”¨æˆ·123456#è¿™é‡Œå¿…é¡»æ˜¯nginxçš„å®‰è£…ç›®å½•.passwdåé¢æ˜¯ è´¦å· å¯†ç #htpasswd -bc /etc/nginx/.passwd daichongweb daichongweb#ç”ŸæˆæˆåŠŸ:Adding password for user daichongweb#æ³¨æ„:ä¸åŒçš„æœºå­å¯èƒ½nginxä¸‹çš„æ–‡ä»¶ä¸åŒæœ‰çš„äººæ˜¯.htpasswd&emsp;ç¬¬ä¸‰æ­¥:nginxé…ç½®1234location / &#123; auth_basic &quot;è¿™é‡Œéšæ„èµ·ä¸ªåå­—&quot;; auth_basic_user_file /etc/nginx/.passwd;#è¿™é‡Œæ˜¯nginxå®‰è£…ç›®å½•ä¸‹çš„å¯†ç æ–‡ä»¶&#125;&emsp;ç¬¬å››æ­¥:æ£€æµ‹é…ç½®&amp;&amp;é‡å¯æœåŠ¡1234567#nginx -t#nginx: the configuration file /etc/nginx/nginx.conf syntax is ok#nginx: configuration file /etc/nginx/nginx.conf test is successful#é‡å¯#nginx -s reload&emsp;ç¬¬äº”æ­¥:è®¿é—®åŸŸåæµ‹è¯•ä¸‰.å…¶ä»–æ“ä½œ 123456789101112131415#åˆ é™¤ç”¨æˆ·#htpasswd -D /etc/nginx/.passwd daichongweb#ä¿®æ”¹å¯†ç #htpasswd -d /etc/nginx/.passwd daichongweb123#å…¶ä»–å‘½ä»¤-cï¼šåˆ›å»ºä¸€ä¸ªåŠ å¯†æ–‡ä»¶-nï¼šä¸æ›´æ–°åŠ å¯†æ–‡ä»¶ï¼Œåªå°†åŠ å¯†åçš„ç”¨æˆ·åå¯†ç æ˜¾ç¤ºåœ¨å±å¹•ä¸Š-mï¼šé»˜è®¤é‡‡ç”¨MD5ç®—æ³•å¯¹å¯†ç è¿›è¡ŒåŠ å¯†-dï¼šé‡‡ç”¨CRYPTç®—æ³•å¯¹å¯†ç è¿›è¡ŒåŠ å¯†-pï¼šä¸å¯¹å¯†ç è¿›è¡Œè¿›è¡ŒåŠ å¯†ï¼Œå³æ˜æ–‡å¯†ç -sï¼šé‡‡ç”¨SHAç®—æ³•å¯¹å¯†ç è¿›è¡ŒåŠ å¯†-bï¼šåœ¨å‘½ä»¤è¡Œä¸­ä¸€å¹¶è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è€Œä¸æ˜¯æ ¹æ®æç¤ºè¾“å…¥å¯†ç -Dï¼šåˆ é™¤æŒ‡å®šçš„ç”¨æˆ·æœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://www.daichongweb.com/tags/linux/"}]},{"title":"ã€åŸåˆ›ã€‘ç”¨jqueryåšçˆ¬è™«","slug":"ç”¨jqueryåšçˆ¬è™«","date":"2019-05-10T03:34:38.000Z","updated":"2021-09-03T05:56:57.985Z","comments":true,"path":"ç”¨jqueryåšçˆ¬è™«/","link":"","permalink":"http://www.daichongweb.com/ç”¨jqueryåšçˆ¬è™«/","excerpt":"å¼•è¨€ &emsp;ä¹‹å‰å…¬å¸æœ‰éœ€æ±‚è¦åšä¸€ä¸ªé‡‡é›†ä¿¡æ¯çš„å·¥å…·,åŒ…æ‹¬è·å–å•†å“ä¿¡æ¯å¯¼å…¥æ•°æ®åº“,æ¯”ä»·ä»€ä¹ˆçš„åŠŸèƒ½,æ²¡åŠæ³•åªèƒ½å°è¯•è¿™åšä¸€ä¸‹ã€‚&emsp;è€ƒè™‘åˆ°æ˜¯åšå®šå‘çˆ¬å–,æˆ‘å°±é€‰æ‹©äº†jquery,å› ä¸ºjqueryç›¸æ¯”å…¶ä»–è¯­è¨€åšçˆ¬è™«æ˜¯ç®€å•è½»æ¾å¾ˆå¤šã€‚ä¸åŒè¯­è¨€è‡ªç„¶ä¼šæœ‰ä¸åŒç”¨å¤„ã€‚ç¦»å¼€ç¯å¢ƒè°ˆå“ªä¸ªå¥½ï¼Œå“ªä¸ªä¸å¥½éƒ½æ˜¯è€æµæ°“ã€‚1ï¼Œå¦‚æœæ˜¯è‡ªå·±åšç€ç©çš„è¯ï¼Œå®šå‘çˆ¬å‡ ä¸ªé¡µé¢ï¼Œæ•ˆç‡ä¸æ˜¯æ ¸å¿ƒè¦æ±‚çš„è¯ï¼Œé—®é¢˜ä¸ä¼šå¤§ï¼Œä»€ä¹ˆè¯­è¨€éƒ½è¡Œçš„ï¼Œæ€§èƒ½å·®å¼‚ä¸ä¼šå¤§ã€‚å½“ç„¶ï¼Œå¦‚æœç¢°åˆ°ååˆ†å¤æ‚çš„é¡µé¢ï¼Œæ­£åˆ™å†™çš„å¾ˆå¤æ‚çš„è¯ï¼Œçˆ¬è™«çš„å¯ç»´æŠ¤æ€§å°±ä¼šä¸‹é™ã€‚","text":"å¼•è¨€ &emsp;ä¹‹å‰å…¬å¸æœ‰éœ€æ±‚è¦åšä¸€ä¸ªé‡‡é›†ä¿¡æ¯çš„å·¥å…·,åŒ…æ‹¬è·å–å•†å“ä¿¡æ¯å¯¼å…¥æ•°æ®åº“,æ¯”ä»·ä»€ä¹ˆçš„åŠŸèƒ½,æ²¡åŠæ³•åªèƒ½å°è¯•è¿™åšä¸€ä¸‹ã€‚&emsp;è€ƒè™‘åˆ°æ˜¯åšå®šå‘çˆ¬å–,æˆ‘å°±é€‰æ‹©äº†jquery,å› ä¸ºjqueryç›¸æ¯”å…¶ä»–è¯­è¨€åšçˆ¬è™«æ˜¯ç®€å•è½»æ¾å¾ˆå¤šã€‚ä¸åŒè¯­è¨€è‡ªç„¶ä¼šæœ‰ä¸åŒç”¨å¤„ã€‚ç¦»å¼€ç¯å¢ƒè°ˆå“ªä¸ªå¥½ï¼Œå“ªä¸ªä¸å¥½éƒ½æ˜¯è€æµæ°“ã€‚1ï¼Œå¦‚æœæ˜¯è‡ªå·±åšç€ç©çš„è¯ï¼Œå®šå‘çˆ¬å‡ ä¸ªé¡µé¢ï¼Œæ•ˆç‡ä¸æ˜¯æ ¸å¿ƒè¦æ±‚çš„è¯ï¼Œé—®é¢˜ä¸ä¼šå¤§ï¼Œä»€ä¹ˆè¯­è¨€éƒ½è¡Œçš„ï¼Œæ€§èƒ½å·®å¼‚ä¸ä¼šå¤§ã€‚å½“ç„¶ï¼Œå¦‚æœç¢°åˆ°ååˆ†å¤æ‚çš„é¡µé¢ï¼Œæ­£åˆ™å†™çš„å¾ˆå¤æ‚çš„è¯ï¼Œçˆ¬è™«çš„å¯ç»´æŠ¤æ€§å°±ä¼šä¸‹é™ã€‚2ï¼Œå¦‚æœæ˜¯åšå®šå‘çˆ¬å–ï¼Œè€Œç›®æ ‡åˆè¦è§£æåŠ¨æ€jsã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œç”¨æ™®é€šçš„è¯·æ±‚é¡µé¢ï¼Œç„¶åå¾—åˆ°å†…å®¹çš„æ–¹æ³•è‚¯å®šä¸è¡Œäº†ï¼Œå°±è¦ä¸€ä¸ªç±»ä¼¼firfoxï¼Œchromeçš„jså¼•æ“æ¥å¯¹jsä»£ç åšåŠ¨æ€è§£æã€‚è¿™ä¸ªæ—¶å€™æ¨ècasperJS+phantomjsæˆ–slimerJS+phantomjs 3ï¼Œå¦‚æœæ˜¯å¤§è§„æ¨¡çš„ç½‘ç«™çˆ¬å–ã€‚è¿™ä¸ªæ—¶å€™å°±è¦è€ƒè™‘åˆ°ï¼Œæ•ˆç‡ï¼Œæ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œç­‰ç­‰äº†ã€‚å¤§è§„æ¨¡çš„çˆ¬å–æ¶‰åŠçš„æ–¹é¢å¾ˆå¤šï¼Œæ¯”å¦‚åˆ†å¸ƒå¼çˆ¬å–ï¼Œåˆ¤é‡æœºåˆ¶ï¼Œä»»åŠ¡è°ƒåº¦ã€‚è¿™äº›é—®é¢˜æ·±å…¥ä¸‹å»å“ªä¸€ä¸ªç®€å•äº†ï¼Ÿè¯­è¨€é€‰å–è¿™ä¸ªæ—¶å€™å¾ˆé‡è¦ã€‚NodeJsï¼šåšçˆ¬è™«æ•ˆç‡å¾ˆé«˜ã€‚é«˜å¹¶å‘ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹å˜æˆäº†ç®€å•çš„éå†å’Œcallbackï¼Œå†…å­˜cpuå ç”¨å°ï¼Œè¦å¤„ç†å¥½callbackã€‚ PHPï¼šå„ç§æ¡†æ¶åˆ°å¤„æœ‰ï¼Œéšä¾¿æ‹‰ä¸ªæ¥ç”¨éƒ½è¡Œã€‚ä½†æ˜¯ï¼ŒPHPçš„æ•ˆç‡çœŸçš„æœ‰é—®é¢˜â€¦ä¸å¤šè¯´Python:æˆ‘ç”¨pythonå†™çš„æ¯”è¾ƒå¤šï¼Œå¯¹å„ç§é—®é¢˜éƒ½æœ‰æ¯”è¾ƒå¥½çš„æ”¯æŒã€‚scrapyæ¡†æ¶å¾ˆå¥½ç”¨ï¼Œä¼˜ç‚¹å¤šã€‚æˆ‘è§‰å¾—jsä¹Ÿä¸æ˜¯å¾ˆé€‚åˆå†™â€¦æ•ˆç‡é—®é¢˜ã€‚æ²¡å†™è¿‡ï¼Œä¼°è®¡ä¼šæœ‰éº»çƒ¦ä¸€å †ã€‚æ®æˆ‘çŸ¥é“çš„ï¼Œå¤§å…¬å¸ä¹Ÿæœ‰ç”¨c++çš„ï¼Œæ€»ä¹‹å¤§å¤šæ•°éƒ½æ˜¯åœ¨å¼€æºæ¡†æ¶ä¸Šæ”¹é€ ã€‚çœŸé‡æ–°é€ ä¸ªè½®å­çš„ä¸å¤šå§ã€‚ä¸å€¼ã€‚ æ¥è‡ªsegmentfaultä¸€ä½å¤§ä½¬jqueryå®ç° æŠ“å–ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899javascript: (function() &#123; try &#123; var Arr = &#123; &apos;name&apos;: getTitle(), &apos;img&apos;: getImgs(), &apos;price&apos;: getPirce(), &apos;sku&apos;: getSku(), &apos;desc&apos;: getDesc(), &#125;; //è·å–å›¾ç‰‡ function getImgs() &#123; var imgArr = []; $(&quot;#dt-tab ul li&quot;).each(function(k, v) &#123; var imgJson = JSON.parse($(v).attr(&apos;data-imgs&apos;)); if (imgJson) &#123; imgArr.push(imgJson.preview); &#125;; &#125;); return imgArr; &#125;; //è·å–åç§° function getTitle() &#123; var _this = $(&apos;#mod-detail-title .d-title&apos;); return _this.html(); &#125;; //è·å–ä»·æ ¼ function getPirce() &#123; var _this = $(&quot;#mod-detail-price .price .ladder-3-1&quot;); var priceJson = JSON.parse(_this.attr(&apos;data-range&apos;)); return priceJson.price; &#125;; //è·å–skuå±æ€§ function getSku() &#123; var skuArr = []; var _this = $(&quot;.obj-sku .table-sku tr&quot;); if (_this) &#123; var step = 0; _this.each(function(k, v) &#123; step++; skuArr.push(&#123; &apos;sku_name&apos;: $(v).find(&apos;.name span&apos;).html(), &apos;price&apos;: $(v).find(&apos;.price span .value&apos;).html(), &apos;img&apos;: getSkuImg(step), &#125;); &#125;); &#125;; return skuArr; &#125;; //è·å–å•†å“è¯¦æƒ… function getDesc() &#123; var descArr = []; var _this = $(&quot;#mod-detail-description img&quot;); if (_this) &#123; _this.each(function(k, v) &#123; var url = $(v).attr(&apos;src&apos;); var patt = new RegExp(&quot;[a-zA-z]+://[^\\s]*&quot;); if(patt.test(url))&#123; descArr.push(url); &#125; &#125;); &#125;; return descArr; &#125;; //è·å–skuå›¾ç‰‡ function getSkuImg(step) &#123; if ($(&quot;#dt-tab ul li&quot;) &amp;&amp; $(&quot;.obj-sku .table-sku tr&quot;)) &#123; return $(&quot;#dt-tab ul li:eq(&quot; + step + &quot;) .box-img img&quot;).attr(&apos;src&apos;); &#125;; return &apos;&apos;; &#125;; if(confirm(&apos;è·å–æˆåŠŸï¼Œç¡®è®¤è¦é‡‡é›†å—ï¼Ÿ&apos;)==true)&#123; console.log(Arr); return false; $.ajax(&#123; type:&quot;post&quot;, url:&apos;www.daichongweb.com&apos;, data:&#123; post:Arr &#125;, dataType:&apos;json&apos;, success:function(res)&#123; if(res.code==0)&#123; alert(&apos;é‡‡é›†æˆåŠŸï¼&apos;); &#125;else&#123; alert(res.message); &#125; &#125;,error:function(res)&#123; alert(&apos;é‡‡é›†å¤±è´¥ï¼&apos;); &#125;,beforeSend:function(res)&#123; $(&apos;body&apos;).append(&apos;&lt;div id=&quot;daichongweb&quot; style=&quot;position:fixed;top:0;left:0;background: rgba(0, 0, 0, .5);text-align: center;line-height: 20;font-size: 30px;color: white;width:100vw;height:100vh;z-index:1000000000;&quot;&gt;é‡‡é›†ä¸­ï¼&lt;/div&gt;&apos;); &#125;,complete:function(res)&#123; $(&quot;#daichongweb&quot;).remove(); &#125; &#125;); &#125; &#125; catch (err) &#123; alert(err); &#125;;&#125;)();å®šå‘å•†å“é“¾æ¥->1688.com&emsp;å½“ç„¶äº†,è¿™ä¸ªé‡‡é›†ä»£ç ä¸åªæ˜¯é’ˆå¯¹è¿™ä¸€ä¸ªå•†å“,å®ƒå¯ä»¥æŠ“å–å’Œä»–é¡µé¢ç»“æ„ä¸€æ ·çš„æ‰€æœ‰å•†å“ã€‚ PS:è¿™é‡Œçš„æŠ“å–å¯æ ¹æ®è‡ªå·±çš„å®é™…ä¸šåŠ¡æ¥æ”¹å˜,æ¯”å¦‚éœ€è¦è®©é¡µé¢ä¸­çš„è½®æ’­å›¾åˆ‡æ¢è¿™ä¸ªæ‰èƒ½è·å–,é‚£å°±åœ¨æŠ“å–ä¹‹å‰å†™ä¸ªåˆ‡æ¢çš„è„šæœ¬;åˆ‡æ¢ä¸€å¼ æŠ“å–ä¸€å¼ ;æ€ä¹ˆæ‰èƒ½åœ¨è°·æ­Œä¸­è¿è¡Œè¿™ä¸ªè„šæœ¬ &emsp;æ–¹æ³•ä¸€ï¼šç›´æ¥æ”¾åœ¨æ§åˆ¶å°(è¿™é‡Œå¹¶ä¸æ¨èä½¿ç”¨,å› ä¸ºå…¬å¸çš„äººä¸å¯èƒ½éƒ½æ‡‚ä»£ç ,è€Œä¸”æ“ä½œéº»çƒ¦)ã€‚&emsp;æ–¹æ³•äºŒï¼šåœ¨æµè§ˆå™¨ä¸­æ·»åŠ ä¹¦ç­¾,æŠŠä»£ç å¤åˆ¶åˆ°ç½‘å€æ é‡Œ,è¦é‡‡é›†çš„æ—¶å€™ç‚¹å‡»ä¸€ä¸‹å°±okäº†ï¼ PS:æ•´ä½“è¿ç”¨æƒ…å†µçœ‹,ä¸ªäººè§‰å¾—jqueryåšé‡‡é›†è¿˜æ˜¯æŒºä¸é”™çš„ã€‚å½“ç„¶ç›¸æ¯”phpã€pythonçš„è¯æ˜¾å¾—æœ‰ç‚¹ä½ç«¯çš„æ„Ÿè§‰,é‚£ä¹Ÿæ²¡åŠæ³•è°è®©phpã€pythonæ˜¯åŠ¨æ€è·å–çš„å‘¢?ä¹‹åä¼šç”¨phpæˆ–pythonåšä¸ªä¸€ä¸ªåŠ¨æ€æŠ“å–çš„è„šæœ¬,å½“ç„¶ä¹ŸåŒ…æ‹¬æ¯”ä»·ä¹‹ç±»çš„è¿ç”¨â€¦..åç«¯å¤„ç†æ•°æ®(å¯å¿½ç•¥) phpå¤„ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245&lt;?phprequire_once './oss/autoload.php';use OSS\\OssClient;use OSS\\Core\\OssException;header('Content-Type: text/html;charset=utf-8');header('Access-Control-Allow-Origin:*'); // *ä»£è¡¨å…è®¸ä»»ä½•ç½‘å€è¯·æ±‚header('Access-Control-Allow-Methods:POST,GET,OPTIONS,DELETE'); // å…è®¸è¯·æ±‚çš„ç±»å‹header('Access-Control-Allow-Credentials: true'); // è®¾ç½®æ˜¯å¦å…è®¸å‘é€ cookiesheader('Access-Control-Allow-Headers: Content-Type,Content-Length,Accept-Encoding,X-Requested-with, Origin');if($_POST)&#123; $post = $_POST['post']; if($post)&#123; //å¤„ç†å¤§å›¾ $imgArr = $post['img']; if($imgArr)&#123; foreach ($imgArr as $k =&gt; $v) &#123; $name = saveImgToLocal($v); $ossPath = 'collect/'.date('Ym').'/'.$name; uploadImgOss($ossPath,'./img/'.$name); $imgArr[$k] = $ossPath; &#125; $post['img'] = $imgArr; &#125; if(array_key_exists('sku', $post))&#123; //å¤„ç†å°å›¾ $sku = $post['sku']; if($sku)&#123; foreach ($sku as $k =&gt; $v) &#123; $name = saveImgToLocal($v['img']); $ossPath = 'collect/'.date('Ym').'/'.$name; uploadImgOss($ossPath,'./img/'.$name); $sku[$k]['img'] = $ossPath; &#125; $post['sku'] = $sku; &#125; &#125; if(array_key_exists('desc', $post))&#123; //å¤„ç†è¯¦æƒ…å›¾ $desc = $post['desc']; if($desc)&#123; foreach ($desc as $k =&gt; $v) &#123; $name = saveImgToLocal($v); $ossPath = 'collect/'.date('Ym').'/'.$name; uploadImgOss($ossPath,'./img/'.$name); $desc[$k] = $ossPath; &#125; $post['desc'] = $desc; &#125; &#125; &#125; //è¿æ¥æ•°æ®åº“ $Db = mysqli_connect(\"127.0.0.1\",\"root\",\"daichongweb\",\"shop\"); if (mysqli_connect_errno($Db)) &#123; echo \"è¿æ¥ MySQL å¤±è´¥: \" . mysqli_connect_error(); &#125; insertDb($Db,$post); &#125;//ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°function saveImgToLocal($telefile,$path='./img/')&#123; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $telefile); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120); $file = curl_exec($ch); curl_close($ch); $filename = pathinfo($telefile, PATHINFO_BASENAME); $resource = fopen($path . $filename, 'a'); fwrite($resource, $file); fclose($resource); return $filename;&#125;//ä¸Šä¼ å›¾ç‰‡çš„ossfunction uploadImgOss($object,$filePath)&#123; $accessKeyId = \"é˜¿é‡ŒossKeyID\"; $accessKeySecret = é˜¿é‡ŒossKeySecret; $endpoint = \"é¡¹ç›®åœ°å€\"; $bucket = \"é¡¹ç›®åç§°\"; try&#123; $ossClient = new OssClient($accessKeyId, $accessKeySecret, $endpoint); $ossClient-&gt;uploadFile($bucket, $object, $filePath); &#125; catch(OssException $e) &#123; print_r($e-&gt;getMessage()); exit; &#125;&#125;/*** è·å¾—éšæœºå­—ç¬¦ä¸²* @param $len éœ€è¦çš„é•¿åº¦* @param $special æ˜¯å¦éœ€è¦ç‰¹æ®Šç¬¦å·* @return string è¿”å›éšæœºå­—ç¬¦ä¸²*/function getRandomStr($len, $special = false)&#123; $chars = array( \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\" ); if($special)&#123; $chars = array_merge($chars, array( \"!\", \"@\", \"#\", \"$\", \"?\", \"|\", \"&#123;\", \"/\", \":\", \";\", \"%\", \"^\", \"&amp;\", \"*\", \"(\", \")\", \"-\", \"_\", \"[\", \"]\", \"&#125;\", \"&lt;\", \"&gt;\", \"~\", \"+\", \"=\", \",\", \".\" )); &#125; $charsLen = count($chars) - 1; shuffle($chars); //æ‰“ä¹±æ•°ç»„é¡ºåº $str = ''; for($i=0; $i&lt;$len; $i++)&#123; $str .= $chars[mt_rand(0, $charsLen)]; //éšæœºå–å‡ºä¸€ä½ &#125; return $str;&#125;//æŠŠæ•°æ®æ’å…¥æ•°æ®åº“function insertDb($Db,$data)&#123; //å•†å“ä¸»è¡¨ $pd_product_field = [ 'product_art_no' =&gt; '', 'product_number' =&gt; getRandomStr(32), 'pd_name' =&gt; $data['name'], 'pd_subtitle' =&gt;'', 'pd_descs' =&gt; '', 'pd_category_id' =&gt; 0, 'pd_seller_id' =&gt; 0, 'pd_brand_id' =&gt; 0, 'express_tpl_id' =&gt; 0, 'meun_id' =&gt; 0, 'pd_unit' =&gt; '', 'pd_weight' =&gt; 0, 'pd_weight_unit' =&gt; '', 'pd_volume' =&gt; 0, 'pd_volume_unit' =&gt; '', 'min_price' =&gt; 0, 'market_price' =&gt; 0, 'cost_price'=&gt; 0, 'detail_descr' =&gt; '', 'pd_key_word' =&gt; '', 'pd_remark' =&gt; '', 'pd_picture_prefix' =&gt; '', 'pd_detail_info' =&gt; '', 'detail_title' =&gt; '', 'created_at' =&gt; date('Y-m-d H:i:s'), ]; $pd_detail_info = ''; foreach ($data['desc'] as $k =&gt; $v) &#123; $pd_detail_info .= '&lt;img src=\"'.$v.'\"&gt;'; &#125; $pd_product_field['pd_detail_info'] = addslashes(bin2hex(gzcompress($pd_detail_info))); $pd_product_field['pd_image_url'] = implode(',',$data['img']); $pd_product_field['pd_translation_pic'] = implode(',',$data['img']); $pd_product_keys = ''; $pd_product_values = ''; foreach ($pd_product_field as $key =&gt; $value) &#123; $pd_product_keys .= $key.','; $pd_product_values .= \"'\".$value.\"'\".','; &#125; $pd_product_keys = trim($pd_product_keys,','); $pd_product_values = trim($pd_product_values,','); $inser_pd_product = \"insert into pd_product($pd_product_keys) value($pd_product_values)\"; mysqli_autocommit($Db,false);//å¼€å¯äº‹åŠ¡ try &#123; $product_number = $pd_product_field['product_number']; $pd_product_reslut = mysqli_query($Db,$inser_pd_product); $product_id = mysqli_insert_id($Db); $pd_sku_result = 0; $pd_sku_properties_reslut = 0; $sku_unique_code = getRandomStr(32); if(array_key_exists('sku',$data) &amp;&amp; count($data['sku'])&gt;0)&#123; foreach ($data['sku'] as $key =&gt; $value) &#123; $property = $value['sku_name']; $pd_price = $value['price']; $sku_picture_url = $value['img']; $insert_pd_sku = \"insert into pd_sku(sku_unique_code,product_number,property,sku_code,product_id) value('$sku_unique_code','$product_number','$property','',$product_id)\"; $pd_sku_result = mysqli_query($Db,$insert_pd_sku); $sku_id = mysqli_insert_id($Db); $insert_pd_sku_properties = \"insert into pd_sku_properties(sku_id,sku_unique_code,product_id,product_number,sku_value,pd_price,sku_picture_url,sku_code) value($sku_id,'',$product_id,'$product_number','$property','$pd_price','$sku_picture_url','')\"; $pd_sku_properties_reslut = mysqli_query($Db,$insert_pd_sku_properties); &#125; &#125;else&#123; $pd_sku_result = 1; $pd_sku_properties_reslut = 1; &#125; if($pd_product_reslut &amp;&amp; $pd_sku_result &amp;&amp; $pd_sku_properties_reslut)&#123; mysqli_commit($Db);//æäº¤äº‹åŠ¡ $code = 0; $message = 'æ’å…¥æˆåŠŸ'; &#125;else&#123; mysqli_rollback($Db);//å›æ»š $code = 1; $message = 'æ’å…¥å¤±è´¥'; &#125; &#125; catch (\\Exception $e) &#123; mysqli_rollback($Db);//å›æ»š $code = 1; $message = $e-&gt;getMessage(); &#125; //åˆ é™¤æœ¬åœ°ä¸‹è½½çš„å›¾ç‰‡ foreach ($data['img'] as $key =&gt; $value) &#123; $arr = explode('/',$value); unlink('./img/'.array_pop($arr)); &#125; if(array_key_exists('desc', $data))&#123; foreach ($data['desc'] as $key =&gt; $value) &#123; $arr = explode('/',$value); unlink('./img/'.array_pop($arr)); &#125; &#125; if(array_key_exists('sku', $data))&#123; foreach ($data['sku'] as $key =&gt; $value) &#123; $arr = explode('/',$value['img']); unlink('./img/'.array_pop($arr)); &#125; &#125; echo json_encode([ 'code' =&gt; $code, 'message' =&gt; $message ]);&#125;","categories":[],"tags":[{"name":"jquery","slug":"jquery","permalink":"http://www.daichongweb.com/tags/jquery/"}]},{"title":"ã€åŸåˆ›ã€‘walleé…ç½®æˆ–éƒ¨ç½²å¯èƒ½ä¼šé‡åˆ°çš„å°é—®é¢˜","slug":"walleé…ç½®æˆ–éƒ¨ç½²å¯èƒ½ä¼šé‡åˆ°çš„å°é—®é¢˜","date":"2019-05-09T08:16:07.000Z","updated":"2021-09-03T05:56:57.969Z","comments":true,"path":"walleé…ç½®æˆ–éƒ¨ç½²å¯èƒ½ä¼šé‡åˆ°çš„å°é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/walleé…ç½®æˆ–éƒ¨ç½²å¯èƒ½ä¼šé‡åˆ°çš„å°é—®é¢˜/","excerpt":"ä¸€.å¼•è¨€ &emsp;ä½œä¸ºä¸€ä¸ªåˆšæ¥è§¦walleä¸ä¹…çš„æ–°æ‰‹,åœ¨é…ç½®å’Œéƒ¨ç½²çš„è¿‡ç¨‹ä¸­éš¾å…ä¼šé‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚å½“ç„¶æ’é™¤ä¸€äº›æœ¬èº«å°±å¯¹Linuxä»€ä¹ˆçš„ç©çš„æ¯”è¾ƒå¥½çš„å¤§ç¥ã€‚&emsp;æœ¬æ¥æƒ³å¤šå†™ç‚¹å­—å‡‘ä¸ªå­—æ•°â€¦åæ¥æƒ³æƒ³è¿˜æ˜¯ç®—äº†ã€‚äºŒ.é…ç½®æ—¶ &emsp;åœ¨é¡¹ç›®ç®¡ç†-æ–°å»ºé¡¹ç›®é‡Œ,æ–°å¢é¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜&emsp;æ„æ€æ˜¯ç›®æ ‡æœºæœ€å°‘è¦æœ‰ä¸€ä¸ª","text":"ä¸€.å¼•è¨€ &emsp;ä½œä¸ºä¸€ä¸ªåˆšæ¥è§¦walleä¸ä¹…çš„æ–°æ‰‹,åœ¨é…ç½®å’Œéƒ¨ç½²çš„è¿‡ç¨‹ä¸­éš¾å…ä¼šé‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚å½“ç„¶æ’é™¤ä¸€äº›æœ¬èº«å°±å¯¹Linuxä»€ä¹ˆçš„ç©çš„æ¯”è¾ƒå¥½çš„å¤§ç¥ã€‚&emsp;æœ¬æ¥æƒ³å¤šå†™ç‚¹å­—å‡‘ä¸ªå­—æ•°â€¦åæ¥æƒ³æƒ³è¿˜æ˜¯ç®—äº†ã€‚äºŒ.é…ç½®æ—¶ &emsp;åœ¨é¡¹ç›®ç®¡ç†-æ–°å»ºé¡¹ç›®é‡Œ,æ–°å¢é¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜&emsp;æ„æ€æ˜¯ç›®æ ‡æœºæœ€å°‘è¦æœ‰ä¸€ä¸ª&emsp;æ“ä½œæ­¥éª¤&emsp;æ­£ç¡®ä½ç½®ä¸‰.éƒ¨ç½²æ—¶ &emsp;éƒ¨ç½²çš„æ—¶å€™å¯èƒ½å‡ºç°è¿™æ ·çš„é”™è¯¯,å› ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºä½ åœ¨ç›®æ ‡æœºä¸Šæ²¡æœ‰åˆ›å»ºæ ¹ç›®å½•&emsp;å°±æ˜¯è¿™ä¸ªdataç›®å½•,è™½ç„¶ä»–æç¤ºè¯´ä¼šè‡ªåŠ¨ç”Ÿæˆ,ä½†æ˜¯æ²¡ç”Ÿæˆâ€¦å€’æ˜¯é‚£ä¸ªdatarèƒ½è‡ªåŠ¨ç”Ÿæˆå››.è®¿é—®æ—¶ &emsp;è®¿é—®çš„æ—¶å€™å‡ºç°è¿™ä¸ªé”™è¯¯,å°±è¦æ£€æŸ¥ä¸€ä¸‹çš„nginxé…ç½®æ˜¯å¦æ­£ç¡®&emsp;çœ‹çœ‹æ˜¯å¦ç¼ºäº†ä¸‹å›¾æ‰€ç¤º,æˆ–è€…æ˜¯ç«¯å£å ç”¨ã€åŸŸåé…ç½®ä¸ä¸€è‡´çš„æƒ…å†µ&emsp;å¦‚æœæ˜¯é•¿æ—¶é—´é—²ç½®çš„æ—¶å€™ä¹Ÿä¼šå¼¹å‡ºä¸€ä¸ªåå°æœåŠ¡æœªå¯åŠ¨,è¿™ä¸ªä¸ç”¨æ‹…å¿ƒæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ PS:å…¶ä»–æƒ…å†µåœ¨walleå®˜ç½‘ä¸Šæœ‰ä»‹ç»,å¦‚502/404ç­‰é”™è¯¯äº”.å®‰å…¨æ–¹é¢ &emsp;å®˜ç½‘å»ºè®®æŠŠwalleéƒ¨ç½²åœ¨å†…ç½‘,è¿™æ ·åº”è¯¥æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ã€‚&emsp;è¿™é‡Œçš„è¯æ¨èæä¸ªåŒå‘è®¤è¯,è¿™ä¸ªä¹Ÿæ˜¯æˆ‘ç ”ç©¶å¥½ä¹…çš„ã€‚å…­.æœ€å è¯´èµ·æ¥ç”¨çš„é¢‘ç‡ä¸æ˜¯å¾ˆé«˜,æ›´å¤šçš„é—®é¢˜è¿˜æ˜¯éœ€è¦é•¿æ—¶é—´çš„ä½¿ç”¨æ‰èƒ½å‘ç°,å½“ç„¶äº†æœ¬ç¯‡æ–‡ç« ä¼šæŒç»­çš„æ›´æ–°(åœ¨å‘ç°bugçš„å‰æä¸‹..)ã€‚","categories":[{"name":"liunx","slug":"liunx","permalink":"http://www.daichongweb.com/categories/liunx/"}],"tags":[{"name":"walle","slug":"walle","permalink":"http://www.daichongweb.com/tags/walle/"}]},{"title":"walleæ­å»ºé¡¹ç›®éƒ¨ç½²ç³»ç»Ÿ","slug":"walleæ­å»ºé¡¹ç›®éƒ¨ç½²ç³»ç»Ÿ","date":"2019-04-30T03:32:23.000Z","updated":"2021-09-03T05:56:57.967Z","comments":true,"path":"walleæ­å»ºé¡¹ç›®éƒ¨ç½²ç³»ç»Ÿ/","link":"","permalink":"http://www.daichongweb.com/walleæ­å»ºé¡¹ç›®éƒ¨ç½²ç³»ç»Ÿ/","excerpt":"äºŒ.å‰è¨€-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨walleæ¥ç®¡ç†é¡¹ç›® walle è®©ç”¨æˆ·ä»£ç å‘å¸ƒç»ˆäºå¯ä»¥ä¸åªèƒ½é€‰æ‹© jenkinsï¼æ”¯æŒå„ç§webä»£ç å‘å¸ƒï¼Œphpã€javaã€pythonã€goç­‰ä»£ç çš„å‘å¸ƒã€å›æ»šå¯ä»¥é€šè¿‡webæ¥ä¸€é”®å®Œæˆã€‚walle ä¸€ä¸ªå¯è‡ªç”±é…ç½®é¡¹ç›®ï¼Œæ›´äººæ€§åŒ–ï¼Œé«˜é¢œå€¼ï¼Œæ”¯æŒgitã€å¤šç”¨æˆ·ã€å¤šè¯­è¨€ã€å¤šé¡¹ç›®ã€å¤šç¯å¢ƒåŒæ—¶éƒ¨ç½²çš„å¼€æºä¸Šçº¿éƒ¨ç½²ç³»ç»Ÿ å¼•è¨€æ¥è‡ªwalleå®˜ç½‘ &emsp;1).ä¸ªäººè€Œè¨€,walleä¸ºæˆ‘æä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„é¡¹ç›®ç®¡ç†å¹³å°,ä»é¡¹ç›®å¼€å‘åˆ°é¡¹ç›®æµ‹è¯•å†åˆ°é¡¹ç›®ä¸Šçº¿walleä¸ºæ•´ä¸ªæµç¨‹æä¾›äº†ä¸€å¥—å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚ &emsp;2).å¯¹å…¬å¸å›¢é˜Ÿè€Œè¨€,walleä¸ºç®¡ç†è€…æä¾›äº†ä¸€ä¸ªéå¸¸å¥½çš„é¡¹ç›®ç®¡ç†å·¥å…·ã€‚å¯¹é¡¹ç›®è´¨é‡ã€é¡¹ç›®çš„è¿›åº¦ã€ç¨‹åºçš„å®‰å…¨å’Œå¯é æ€§ç­‰ç­‰éƒ½æä¾›äº†ä¸€å®šçš„ä¿éšœã€‚","text":"äºŒ.å‰è¨€-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨walleæ¥ç®¡ç†é¡¹ç›® walle è®©ç”¨æˆ·ä»£ç å‘å¸ƒç»ˆäºå¯ä»¥ä¸åªèƒ½é€‰æ‹© jenkinsï¼æ”¯æŒå„ç§webä»£ç å‘å¸ƒï¼Œphpã€javaã€pythonã€goç­‰ä»£ç çš„å‘å¸ƒã€å›æ»šå¯ä»¥é€šè¿‡webæ¥ä¸€é”®å®Œæˆã€‚walle ä¸€ä¸ªå¯è‡ªç”±é…ç½®é¡¹ç›®ï¼Œæ›´äººæ€§åŒ–ï¼Œé«˜é¢œå€¼ï¼Œæ”¯æŒgitã€å¤šç”¨æˆ·ã€å¤šè¯­è¨€ã€å¤šé¡¹ç›®ã€å¤šç¯å¢ƒåŒæ—¶éƒ¨ç½²çš„å¼€æºä¸Šçº¿éƒ¨ç½²ç³»ç»Ÿ å¼•è¨€æ¥è‡ªwalleå®˜ç½‘ &emsp;1).ä¸ªäººè€Œè¨€,walleä¸ºæˆ‘æä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„é¡¹ç›®ç®¡ç†å¹³å°,ä»é¡¹ç›®å¼€å‘åˆ°é¡¹ç›®æµ‹è¯•å†åˆ°é¡¹ç›®ä¸Šçº¿walleä¸ºæ•´ä¸ªæµç¨‹æä¾›äº†ä¸€å¥—å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚ &emsp;2).å¯¹å…¬å¸å›¢é˜Ÿè€Œè¨€,walleä¸ºç®¡ç†è€…æä¾›äº†ä¸€ä¸ªéå¸¸å¥½çš„é¡¹ç›®ç®¡ç†å·¥å…·ã€‚å¯¹é¡¹ç›®è´¨é‡ã€é¡¹ç›®çš„è¿›åº¦ã€ç¨‹åºçš„å®‰å…¨å’Œå¯é æ€§ç­‰ç­‰éƒ½æä¾›äº†ä¸€å®šçš„ä¿éšœã€‚ä¸‰.æ­£æ–‡-walleåˆ°åº•èƒ½åšä»€ä¹ˆ &emsp;PS:walleåšçš„å·¥ä½œå°±æ˜¯å½“ä½ æäº¤ä»£ç ä¸Šçº¿çš„æ—¶å€™,ä»–ä¼šä»å®¿ä¸»æœº(walleç³»ç»Ÿæ‰€åœ¨çš„æœºå™¨)å‘ä½ é…ç½®çš„gitåœ°å€æ‹‰å–ä»£ç ã€æ‰“åŒ…ã€ä¸Šä¼ åˆ°ç›®æ ‡æœºå™¨(æ­£å¼ç¯å¢ƒæ‰€åœ¨çš„æœºå™¨)ä¸Šå»ã€ç„¶åè§£å‹æˆå®Œæ•´çš„é¡¹ç›®ã€‚ é—®:walleä»…ä»…åªèƒ½åšè¿™äº›å·¥ä½œå—ï¼Ÿç­”:1).å½“ç„¶ä¸æ˜¯å•¦!æ¯æ¬¡æäº¤ä¸Šçº¿å•(é¡¹ç›®ä»£ç ),walleéƒ½ä¼šä¿å­˜ä¸€ä»½åœ¨ç›®æ ‡æœºä¸Šã€‚å½“ä½ æ–°ä¸Šçº¿çš„ç¨‹åºå‘ç°äº†bug,è¿™æ˜¯ä½ å¯ä»¥é€‰æ‹©å›æ»šä»£ç (ai,è¿™ä¸ªå°±å’ŒInnoDBçš„äº‹åŠ¡æœ‰äº›ç›¸ä¼¼äº†)ã€‚&emsp;2).ç›¸æ¯”ä¼ ç»Ÿçš„ftpå’Œsftpéƒ¨ç½²é¡¹ç›®,walleå°±æ›´åŠ æ˜¾å¾—å®‰å…¨å’Œå¯é ã€‚&emsp;3).ç›¸æ¯”jenkins,walleæ˜¯ç”±å›½äººå¼€å‘;ç•Œé¢ã€æ“ä½œæ›´åŠ å…·æœ‰äº²å’ŒåŠ›ã€‚&emsp;4).åŒæ ·ä»–å…·æœ‰ç›¸æ¯”jenkinsç›¸åŒçš„ç‰¹æ€§pre_deployã€post_deployã€pre_releaseã€post_releaseç­‰é«˜çº§ä»»åŠ¡è¿™å¯¹äºå¤§éƒ¨åˆ†å¼€å‘æ¡†æ¶æ¥è¯´éƒ½æ˜¯éå¸¸æ£’çš„ä¸€ä¸ªåŠŸèƒ½ã€‚æ€»ç»“:walleçš„ä¼˜ç‚¹å¹¶ä¸æ­¢è¿™äº›,æ›´å¤šçš„å†…å®¹éœ€è¦å¤§å®¶äº²è‡ªå»å‘ç°å’ŒæŒ–æ˜ã€‚å››.æ­å»ºwalleéƒ¨ç½²ç³»ç»Ÿ-å®˜ç½‘æ–‡æ¡£ &emsp;walleæœ¬èº«æ˜¯ç”±Pythonå¼€å‘,ä½†webéœ€è¦ä½¿ç”¨nginxæœåŠ¡;æ‰€ä»¥æ­å»ºlnmpç¯å¢ƒæ˜¯æ¯”ä¸å¯å°‘çš„ä¸€æ­¥ã€‚&emsp;ç¬¬ä¸€æ­¥:å…‹éš†é¡¹ç›®1git clone https://github.com/meolu/walle-web.git&emsp;ç¬¬äºŒæ­¥: é…ç½®nginxnginxé…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041upstream webservers &#123; server 0.0.0.0:5000 weight=1; # è´Ÿè½½è®¾ç½®&#125;server &#123; listen 80; server_name ä½ çš„åŸŸåæˆ–ip; # åŸŸåè®¾ç½® access_log /usr/local/nginx/logs/walle.log main; index index.html index.htm; # æ—¥å¿—ç›®å½• location / &#123; try_files $uri $uri/ /index.html; add_header access-control-allow-origin *; root æŒ‡å®šåˆ°walleé¡¹ç›®ä¸‹feç›®å½•; # å‰ç«¯ä»£ç å·²é›†æˆåˆ°walle-webï¼Œå³walle-web/feçš„ç»å¯¹è·¯å¾„ &#125; location ^~ /api/ &#123; add_header access-control-allow-origin *; proxy_pass http://webservers; proxy_set_header X-Forwarded-Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header Origin $host:$server_port; proxy_set_header Referer $host:$server_port; &#125; location ^~ /socket.io/ &#123; add_header access-control-allow-origin *; proxy_pass http://webservers; proxy_set_header X-Forwarded-Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header Origin $host:$server_port; proxy_set_header Referer $host:$server_port; proxy_set_header Host $http_host; proxy_set_header X-NginX-Proxy true; # WebScoket Support proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &quot;upgrade&quot;; &#125;&#125;&emsp;ç¬¬ä¸‰æ­¥: æ·»åŠ hosts123vi /etc/hosts# æ–°å¢ä¸€è¡Œ127.0.0.1 ä½ çš„åŸŸå # ä¸nginxé…ç½®ä¸€è‡´&emsp;ç¬¬å››æ­¥: å®‰è£…Python 2.7 + pipã€‚12# åˆ‡æ¢åˆ°walle-webæ ¹ç›®å½•ä¸‹æ“ä½œsh admin.sh init&emsp;ç¬¬äº”æ­¥: ä¿®æ”¹walleé…ç½®ã€‚123456789101112131415161718192021222324252627282930313233# åˆ‡æ¢åˆ°walle-webæ ¹ç›®å½•ä¸‹æ“ä½œvi walle/config/settings_prod.py# @TODO æ˜¯ä¸ºè¦ä¿®æ”¹çš„éƒ¨åˆ†# æœåŠ¡å¯åŠ¨ @TODO# HOST ä¿®æ”¹ä¸ºä¸ nginx server_name ä¸€è‡´.# åç»­åœ¨web hooksä¸é€šçŸ¥ä¸­ç”¨åˆ°æ­¤åŸŸå.HOST = ä½ çš„åŸŸåPORT = 5000# https True, http FalseSSL = False# æ•°æ®åº“è®¾ç½® @TODOSQLALCHEMY_DATABASE_URI = &apos;mysql://user:password@localhost:3306/walle?charset=utf8&apos;# æœ¬åœ°ä»£ç æ£€å‡ºè·¯å¾„ï¼ˆç”¨æˆ·æŸ¥è¯¢åˆ†æ”¯, ç¼–è¯‘, æ‰“åŒ…ï¼‰ #TODOCODE_BASE = é¡¹ç›®è·¯å¾„,ä¹Ÿå°±æ˜¯å®¿ä¸»æœºçš„gitä»“åº“çš„è·¯å¾„# æ—¥å¿—å­˜å‚¨è·¯å¾„ @TODO# é»˜è®¤ä¸ºwalle-webé¡¹ç›®ä¸‹logs, å¯è‡ªå®šä¹‰è·¯å¾„, éœ€ä»¥ / ç»“å°¾# LOG_PATH = &apos;/var/logs/walle/&apos;LOG_PATH = os.path.join(Config.PROJECT_ROOT, &apos;logs&apos;)LOG_PATH_ERROR = os.path.join(LOG_PATH, &apos;error.log&apos;)LOG_PATH_INFO = os.path.join(LOG_PATH, &apos;info.log&apos;)LOG_FILE_MAX_BYTES = 100 * 1024 * 1024# é‚®ç®±é…ç½® @TODOMAIL_SERVER = &apos;smtp.exmail.qq.com&apos;MAIL_PORT = 465MAIL_USE_SSL = TrueMAIL_USE_TLS = FalseMAIL_DEFAULT_SENDER = &apos;service@walle-web.io&apos;MAIL_USERNAME = &apos;service@walle-web.io&apos;MAIL_PASSWORD = &apos;Ki9y&amp;3U82&apos;&emsp;ç¬¬å…­æ­¥: åˆå§‹åŒ–é¡¹ç›®ã€‚1234# åˆ›å»ºæ•°æ®åº“mysql -hxx -uxx -p -e&apos;CREATE SCHEMA walle&apos;# Data Migrationsh admin.sh migration&emsp;ç¬¬ä¸ƒæ­¥: å¯åŠ¨walleã€‚12345678# å¯åŠ¨sh admin.sh start# é‡å¯sh admin.sh restart # å‡çº§sh admin.sh upgrade# Migrationsh admin.sh migrationæœ€åè®¿é—®ä½ çš„åŸŸåå°±å¯ä»¥è®¿é—®äº†ï¼12345è¶…ç®¡ï¼šsuper@walle-web.io \\ Walle123æ‰€æœ‰è€…ï¼šowner@walle-web.io \\ Walle123è´Ÿè´£äººï¼šmaster@walle-web.io \\ Walle123å¼€å‘è€…ï¼šdeveloper@walle-web.io \\ Walle123è®¿å®¢ï¼šreporter@walle-web.io \\ Walle123PS:ä¸‹ç¯‡æ–‡ç« å°†ä¼šä»‹ç»å¦‚ä½•é…ç½®é¡¹ç›®ã€é¡¹ç›®é…ç½®ä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ã€ä¸Šçº¿é¡¹ç›®è¦æ³¨æ„çš„äº‹é¡¹","categories":[{"name":"liunx","slug":"liunx","permalink":"http://www.daichongweb.com/categories/liunx/"}],"tags":[{"name":"walle","slug":"walle","permalink":"http://www.daichongweb.com/tags/walle/"}]},{"title":"ã€åŸåˆ›ã€‘hexo+github+codingæ­å»ºåšå®¢(ç»‘å®šå¤šåŸŸå)","slug":"hexo-github-codingæ­å»ºåšå®¢-ç»‘å®šå¤šåŸŸå","date":"2019-04-22T09:46:21.000Z","updated":"2021-09-03T05:56:57.923Z","comments":true,"path":"hexo-github-codingæ­å»ºåšå®¢-ç»‘å®šå¤šåŸŸå/","link":"","permalink":"http://www.daichongweb.com/hexo-github-codingæ­å»ºåšå®¢-ç»‘å®šå¤šåŸŸå/","excerpt":"&emsp;ä¸€.æœ€è¿‘æœåŠ¡å™¨å¿«åˆ°æœŸäº†,ä¹Ÿçªç„¶æƒ³èµ·ä¹‹å‰æœ‰ä¸ªç½‘å‹é—®æˆ‘æ€ä¹ˆç”¨hexo+githubæ­å»ºä¸ªäººåšå®¢,å¥½å¤šå¤©æ²¡æœ‰å›ä»–,å¿ƒé‡Œä¹Ÿæ€»æ˜¯è¿‡æ„ä¸å»ã€‚ä¸è®ºä»–æœ‰æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜,ç°åœ¨ä¹Ÿéœ€è¦è¡¥å‘ä¸€ç¯‡å…³äºhexo+github+codingæ­å»ºä¸ªäººåšå®¢çš„æ–‡ç« äº†ã€‚ &emsp;äºŒ.ä¹Ÿå¸Œæœ›é€šè¿‡è¿™ç¯‡åšå®¢,èƒ½è®©æ›´å¤šæ­£å¤„äºåˆæœŸé˜¶æ®µçš„åŒå­¦é¡ºåˆ©çš„æ­å»ºå±äºè‡ªå·±çš„åšå®¢;ä¹ŸåŒæ ·é€‚åˆæ²¡æœ‰ç¼–ç¨‹ç»éªŒçš„åŒå­¦æ¥äº²æ‰‹æ„Ÿè§‰ä¸€ä¸‹ç¼–ç¨‹çš„ä¹è¶£ï¼","text":"&emsp;ä¸€.æœ€è¿‘æœåŠ¡å™¨å¿«åˆ°æœŸäº†,ä¹Ÿçªç„¶æƒ³èµ·ä¹‹å‰æœ‰ä¸ªç½‘å‹é—®æˆ‘æ€ä¹ˆç”¨hexo+githubæ­å»ºä¸ªäººåšå®¢,å¥½å¤šå¤©æ²¡æœ‰å›ä»–,å¿ƒé‡Œä¹Ÿæ€»æ˜¯è¿‡æ„ä¸å»ã€‚ä¸è®ºä»–æœ‰æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜,ç°åœ¨ä¹Ÿéœ€è¦è¡¥å‘ä¸€ç¯‡å…³äºhexo+github+codingæ­å»ºä¸ªäººåšå®¢çš„æ–‡ç« äº†ã€‚ &emsp;äºŒ.ä¹Ÿå¸Œæœ›é€šè¿‡è¿™ç¯‡åšå®¢,èƒ½è®©æ›´å¤šæ­£å¤„äºåˆæœŸé˜¶æ®µçš„åŒå­¦é¡ºåˆ©çš„æ­å»ºå±äºè‡ªå·±çš„åšå®¢;ä¹ŸåŒæ ·é€‚åˆæ²¡æœ‰ç¼–ç¨‹ç»éªŒçš„åŒå­¦æ¥äº²æ‰‹æ„Ÿè§‰ä¸€ä¸‹ç¼–ç¨‹çš„ä¹è¶£ï¼&emsp;ä¸‰.ç›¸æ¯”ä½¿ç”¨ä¸ªäººæœåŠ¡å™¨æ­å»ºè€Œè¨€åˆ©ç”¨githubæˆ–codingæ­å»ºåšå®¢æ›´åŠ çœäº‹çœåŠ›åˆçœé’±,æœ€ä¾¿å®œçš„æœåŠ¡å™¨ä¸€å¹´ä¹Ÿéœ€è¦ä¸€åƒå·¦å³çš„ç§Ÿèµè´¹,è€Œä½¿ç”¨githubã€codingã€ç äº‘ç­‰æ­å»ºæ˜¯å®Œå…¨å…è´¹çš„,å¹¶ä¸”ä¸ç”¨éƒ¨ç½²æœåŠ¡å™¨ç¯å¢ƒ,ä¹Ÿä¸ç”¨æ‹…å¿ƒè¯ä¹¦çš„é—®é¢˜ã€‚ç¬¬ä¸€æ­¥:hexoæœ¬åœ°ç¯å¢ƒçš„æ­å»º ps:è¿™é‡Œå› ä¸ºhexoå®˜ç½‘æœ‰æ•™ç¨‹,æˆ‘å°±ä¸ä¸€ä¸€ä»‹ç»äº†,ç®€å•ä»‹ç»ä¸€ä¸‹æ­å»ºæµç¨‹ hexoæœ¬åœ°æ­å»ºæµç¨‹: &emsp;&emsp;1).å®‰è£…git&emsp;&emsp;2).å®‰è£…nodejs&emsp;&emsp;3).å®‰è£…hexo å‚æ•°é…ç½® 1).é¦–å…ˆæ˜¯æ ¹ç›®å½•ä¸‹_config.ymlæ–‡ä»¶çš„é…ç½®ã€‚&emsp;&emsp;1.é…ç½®å¯¼èˆªå’Œåšå®¢åŸºæœ¬ä¿¡æ¯ã€‚&emsp;&emsp;2.é…ç½®éƒ¨ç½²åœ°å€123456789101112#æ–‡ç« ç”Ÿæˆé…ç½®#permalink: :year/:month/:day/:title/ //æ–‡ç« è·¯å¾„ åŸæœ‰çš„è·¯å¾„ä¸ºâ€˜daihongweb.com/2019/04/22/hexo+github+codingæ­å»ºåšå®¢(ç»‘å®šå¤šåŸŸå)â€™permalink: :title/ //æ–‡ç« è·¯å¾„ æ”¹ä¸ºè·¯å¾„ä¸ºâ€˜daihongweb.com/hexo+github+codingæ­å»ºåšå®¢(ç»‘å®šå¤šåŸŸå)â€™ æœ‰åˆ©äºseoä¼˜åŒ–permalink_defaults:#ä»£ç éƒ¨ç½²é…ç½®deploy: type: git repo: coding: codingä»“åº“åœ°å€,master,//masteræ˜¯ä»£ç åˆ†æ”¯ github: githubä»“åº“åœ°å€,master,ps:è¿™é‡Œå»ºè®®å¤§å®¶å†æœ¬åœ°æŠŠä¸€åˆ‡æå¥½ä¹‹åå†æ·»éƒ¨ç½²åœ°å€ï¼Œæˆ–è€…åœ¨æœ¬åœ°æµ‹è¯•çš„æ—¶å€™ä¸è¦ä½¿ç”¨ hexo d å‘½ä»¤ç¬¬äºŒæ­¥:æ­å»ºè¿œç¨‹ä»“åº“ 1).codingå»ºç«‹gitä»“åº“2).è·å–gitåœ°å€ps:è¿™é‡Œå»ºè®®å¤§å®¶ä½¿ç”¨https,ä½¿ç”¨sshéœ€è¦ç§˜é’¥ä»€ä¹ˆçš„æ¯”è¾ƒéº»çƒ¦3).githubå»ºç«‹gitä»“åº“4).è·å–gitåœ°å€ç¬¬ä¸‰æ­¥:éƒ¨ç½²é¡¹ç›® ps:éƒ¨ç½²çš„æ—¶å€™å¯èƒ½ä¼šå¼¹å‡ºè¦æ±‚ç™»å½•çš„è¾“å…¥æ¡†,è¿™ä¸ªç¬¬ä¸€æ¬¡éƒ¨ç½²çš„æ—¶å€™è¾“å…¥ä¸€æ¬¡,ä¹‹åå°±ä¸éœ€è¦å†è¾“å…¥äº†1).é¡¹ç›®ä¸­æ‰§è¡Œéƒ¨ç½²é¡¹ç›®1hexo c &amp;&amp; hexo g &amp;&amp; hexo g &amp;&amp; hexo sps:å½“ä½ è®¿é—®åšå®¢çš„æ—¶å€™ä½ ä¼šå‘ç°æ–‡ç« å†…æ‰€æœ‰çš„å›¾ç‰‡éƒ½åŠ è½½ä¸å‡ºæ¥,è§£å†³åŠæ³•å¦‚ä¸‹12345#é¡¹ç›®æ ¹ç›®å½•ä¸‹_config.ymlexternal_link: truepost_asset_folder: truerelative_link: truefuture: trueps:ä¿®æ”¹ä¹‹åæŠŠå›¾ç‰‡ç§»å…¥æ–‡ç« åç§°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹çš„imgæ–‡ä»¶å¤¹ä¸‹;ä¿®æ”¹æ–‡ç« ä¸­å¼•å…¥çš„è·¯å¾„;åœ¨é‡æ–°æ‰§è¡Œä¸Šè¾¹çš„å‘½ä»¤å°±okäº†ç¬¬å››æ­¥:å¼€å¯pagesæœåŠ¡ 1).codingå¼€å¯pagesæœåŠ¡ps:codingå¼€å¯ä¹‹åå®ƒä¼šè‡ªåŠ¨éƒ¨ç½²ä¸€æ¬¡,ç‚¹å‡»è‡ªåŠ¨åˆ†é…çš„åŸŸååœ°å€æŸ¥çœ‹æ˜¯å¦æœ‰é—®é¢˜ 2).githubå¼€å§‹pagesæœåŠ¡åœ¨ä¸‹é¢å¯ä»¥æ‰¾åˆ°ï¼šæ˜¾ç¤ºæˆè¿™æ ·å°±è¯´æ˜éƒ¨ç½²æˆåŠŸäº†ï¼ç¬¬äº”æ­¥:ç»‘å®šä¸ªäººåŸŸåï¼Œå¹¶å®ç°å¤šåŸŸåç»‘å®š é¦–å…ˆä½ éœ€è¦è´­ä¹°ä¸€ä¸ªåŸŸåå¹¶ä¸”å·²å¤‡æ¡ˆã€‚1).æ·»åŠ è§£æps:æˆ‘è¿™é‡Œæ˜¯ç”¨çš„é˜¿é‡Œäº‘çš„,è®°å½•ç±»å‹ä¸ºCNAME,è®°å½•å€¼ä¸ºä½ githubæˆ–codingçš„åœ°å€;æ‰€æœ‰çš„æœåŠ¡å•†è§£æéƒ½æ˜¯ä¸€æ ·çš„ï¼2).å¯¹åº”çš„githubç»‘å®šä¸ªäººåŸŸåps:ä¸‹é¢å‹¾é€‰çš„æ˜¯å¼€å§‹https,è®°å¾—å‹¾é€‰ä¸Š;ä¹‹åä¼šæç¤ºä½ å¼€å§‹å¤±è´¥ä»€ä¹ˆçš„,ä¸ç”¨æ‹…å¿ƒã€‚ç¨ç­‰1å°æ—¶å†å»åˆ·æ–°å°±å¥½äº†ï¼3).codingç»‘å®šä¸ªäººåŸŸåps:ç»‘å®šä¹‹åç‚¹å‡»ç”³è¯·,æœ‰çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯,æš‚æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°è§£å†³çš„åŠæ³•;æ·»åŠ ç»‘å®šä¹‹åè®°å¾—ç‚¹å‡»ä¸Šè¾¹çš„éƒ¨ç½²ï¼ æ€»ç»“:é—®é¢˜æ¥äº†,åˆ°åº•æ˜¯æ€ä¹ˆå®ç°ç»‘å®šå¤šä¸ªåŸŸåçš„ï¼Ÿå•Šå“ˆå“ˆ,å…¶å®å°±æ˜¯åˆ©ç”¨å¤šä¸ªpagesæœåŠ¡;ä¾‹å¦‚ç°æœ‰2ä¸ªåŸŸå,é‚£ä¹ˆä¸€ä¸ªåŸŸåç»‘å®šcoding,ä¸€ä¸ªåŸŸåç»‘å®šgithub;å¹¶ä¸”è¿˜å¯ä»¥å®ç°å›½å¤–çš„è®¿é—®åˆ†é…åˆ°githubä¸Š,å›½å†…çš„è®¿é—®åˆ†é…åˆ°codingä¸Šæ¥æå‡è®¿é—®é€Ÿåº¦ï¼ Daichongweb.blog","categories":[{"name":"hexo","slug":"hexo","permalink":"http://www.daichongweb.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://www.daichongweb.com/tags/hexo/"}]},{"title":"composer æŠ¥é”™php_pdo_firebird.dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—","slug":"composer-æŠ¥é”™php-pdo-firebird-dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—","date":"2019-04-04T03:57:30.000Z","updated":"2021-09-03T05:56:57.912Z","comments":true,"path":"composer-æŠ¥é”™php-pdo-firebird-dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—/","link":"","permalink":"http://www.daichongweb.com/composer-æŠ¥é”™php-pdo-firebird-dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—/","excerpt":"è‡ªä»æŠŠphpç‰ˆæœ¬åˆ‡æ¢åˆ°7.0åï¼Œä¸€æ—¦ä½¿ç”¨composerå°±ä¼šå‡ºç°php_pdo_firebird.dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—çš„é”™è¯¯ï¼Œè€Œä¸”è¿˜ä¸æ­¢è¿™ä¸€ä¸ªã€‚ç™¾åº¦æŸ¥è¿‡å¾ˆå¤šèµ„æ–™æœ€åéƒ½æ˜¯æ²¡æœ‰è§£å†³ï¼Œæœ€åå—åˆ°ä¸€ç¯‡åšå®¢çš„å¯å‘ï¼Œå°è¯•åœ¨phpç¯å¢ƒé‡Œå¸è½½æ‰è¿™äº›æ‰©å±•ï¼Œæœ€åï¼Œï¼Œå±…ç„¶è§£å†³äº†ï¼Ÿï¼Ÿ","text":"è‡ªä»æŠŠphpç‰ˆæœ¬åˆ‡æ¢åˆ°7.0åï¼Œä¸€æ—¦ä½¿ç”¨composerå°±ä¼šå‡ºç°php_pdo_firebird.dllæ‰¾ä¸åˆ°æŒ‡å®šæ¨¡å—çš„é”™è¯¯ï¼Œè€Œä¸”è¿˜ä¸æ­¢è¿™ä¸€ä¸ªã€‚ç™¾åº¦æŸ¥è¿‡å¾ˆå¤šèµ„æ–™æœ€åéƒ½æ˜¯æ²¡æœ‰è§£å†³ï¼Œæœ€åå—åˆ°ä¸€ç¯‡åšå®¢çš„å¯å‘ï¼Œå°è¯•åœ¨phpç¯å¢ƒé‡Œå¸è½½æ‰è¿™äº›æ‰©å±•ï¼Œæœ€åï¼Œï¼Œå±…ç„¶è§£å†³äº†ï¼Ÿï¼Ÿå®é™…çš„åŸå› æ˜¯å› ä¸ºåœ¨PHP7ä¸­å·²ç»ä¸å†æ”¯æŒä½¿ç”¨ext/mysqlè¿™ä¸ªæ‰©å±•äº†,æŠŠä¸æ”¯æŒçš„æ‰©å±•ç›´æ¥ç»™å¸è½½æ‰å°±okäº†ã€‚é”™è¯¯ä¿¡æ¯ï¼š ä¿®æ”¹æ–¹æ³•ï¼š æ ¹æ®å®é™…æƒ…å†µè€Œå®šï¼Œæˆ‘ç”¨çš„æ˜¯phpstudyç»“æœï¼š æœ€ååˆè¯•äº†å‡ æ¬¡ï¼Œå‘ç°åªè¦æ˜¯æŠ¥é”™ä»€ä¹ˆæ¨¡å—æ‰¾ä¸åˆ°ï¼Œå°±ç›´æ¥å¸è½½ã€‚","categories":[{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/categories/phpæ‰©å±•ç±»/"}],"tags":[{"name":"composer","slug":"composer","permalink":"http://www.daichongweb.com/tags/composer/"}]},{"title":"sublime text3 ä¸èƒ½å®‰è£…æ’ä»¶","slug":"sublime-text3-ä¸èƒ½å®‰è£…æ’ä»¶","date":"2019-03-13T05:38:18.000Z","updated":"2021-09-03T05:56:57.965Z","comments":true,"path":"sublime-text3-ä¸èƒ½å®‰è£…æ’ä»¶/","link":"","permalink":"http://www.daichongweb.com/sublime-text3-ä¸èƒ½å®‰è£…æ’ä»¶/","excerpt":"ç”¨sublimeçš„å°ä¼™ä¼´ä¼šå‘ç°æœ€è¿‘ç”¨Package Controlå®‰è£…æ’ä»¶çš„æ—¶å€™æ€»ä¼šæç¤ºè¯·å‰å¾€ä¸€ä¸ªåœ°å€å¯»æ±‚å¸®åŠ©çš„ä¸€å¥è¯ã€‚æˆ‘åœ¨ç™¾åº¦ä¸Šä¹Ÿäº†è§£äº†ä¸€ä¸‹ï¼Œå¤§å¤šéƒ½è¯´æ˜¯è¢«å¢™äº†æˆ–è€…æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼ŒçœŸå®çš„åŸå› è¿˜ä¸çŸ¥é“æ˜¯é‚£ä¸ªï¼Œä¸ç®¡äº†åæ­£èƒ½è§£å†³å°±è¡Œã€‚ è§£å†³æ–¹æ¡ˆï¼š","text":"ç”¨sublimeçš„å°ä¼™ä¼´ä¼šå‘ç°æœ€è¿‘ç”¨Package Controlå®‰è£…æ’ä»¶çš„æ—¶å€™æ€»ä¼šæç¤ºè¯·å‰å¾€ä¸€ä¸ªåœ°å€å¯»æ±‚å¸®åŠ©çš„ä¸€å¥è¯ã€‚æˆ‘åœ¨ç™¾åº¦ä¸Šä¹Ÿäº†è§£äº†ä¸€ä¸‹ï¼Œå¤§å¤šéƒ½è¯´æ˜¯è¢«å¢™äº†æˆ–è€…æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼ŒçœŸå®çš„åŸå› è¿˜ä¸çŸ¥é“æ˜¯é‚£ä¸ªï¼Œä¸ç®¡äº†åæ­£èƒ½è§£å†³å°±è¡Œã€‚ è§£å†³æ–¹æ¡ˆï¼šç¬¬ä¸€æ­¥ï¼šä¸‹è½½channel_v3.jsonæ–‡ä»¶åˆ°æœ¬åœ° æ–‡ä»¶åœ°å€ï¼šchanne_v3.json /img/channel_v3.json ç¬¬äºŒæ­¥ï¼šä¿®æ”¹é…ç½® æ‰¾åˆ°ï¼šæ‰“å¼€å†…å®¹æ·»åŠ 1234&quot;channels&quot;:[ &quot;D:/PHPTutorial/channel_v3.json&quot;//æ–‡ä»¶çš„åœ°å€],æœ€åå…³é—­sublimeé‡å¯ï¼Œctrl+shift+p æ‰¾ä¸ªæ’ä»¶è¯•è¯•æœç„¶å¯ä»¥äº†ï¼ï¼","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"sublime","slug":"sublime","permalink":"http://www.daichongweb.com/tags/sublime/"}]},{"title":"sublime Text3è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç ","slug":"sublime-Text3è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç ","date":"2019-03-07T03:21:09.000Z","updated":"2021-09-03T05:56:57.965Z","comments":true,"path":"sublime-Text3è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç /","link":"","permalink":"http://www.daichongweb.com/sublime-Text3è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç /","excerpt":"sublime text3å¾ˆå°çš„ä¸€ä¸ªä»£ç å¼€å‘å·¥å…·ï¼Œä½†åŠŸèƒ½å´å¾ˆå¼ºå¤§ã€‚å¼€å‘è€…å¯å®‰è£…å„ç§æ’ä»¶å¸®åŠ©å¼€å‘ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ï¼Œç›¸æ¯”ä¸€äº›HDæˆ–pSçš„å¼€å‘å·¥å…·ï¼Œä¸ªäººè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢sublimeã€‚ è¿™ç¯‡æ–‡ç« ä¸»è¦è®²sublimeä¸­è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç çš„æ’ä»¶ä»‹ç»å’Œå®‰è£…é…ç½®ã€‚","text":"sublime text3å¾ˆå°çš„ä¸€ä¸ªä»£ç å¼€å‘å·¥å…·ï¼Œä½†åŠŸèƒ½å´å¾ˆå¼ºå¤§ã€‚å¼€å‘è€…å¯å®‰è£…å„ç§æ’ä»¶å¸®åŠ©å¼€å‘ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ï¼Œç›¸æ¯”ä¸€äº›HDæˆ–pSçš„å¼€å‘å·¥å…·ï¼Œä¸ªäººè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢sublimeã€‚ è¿™ç¯‡æ–‡ç« ä¸»è¦è®²sublimeä¸­è‡ªåŠ¨æ ¼å¼åŒ–phpä»£ç çš„æ’ä»¶ä»‹ç»å’Œå®‰è£…é…ç½®ã€‚é¦–å…ˆä¸‹è½½æ’ä»¶phpfmt ä¸‹è½½ä¹‹åæŠŠæ–‡ä»¶åæ”¹ä¸ºphpfmtæ”¾å…¥ï¼šé¦–é€‰é¡¹-ã€‹æµè§ˆæ’ä»¶ç›®å½•ä¸­ã€‚é‡å¯sublimeã€‚ ç¬¬äºŒæ­¥ï¼šé€‰æ‹©é¦–é€‰é¡¹-ã€‹package Settings-ã€‹phpfmt-ã€‹settings-Default ç‚¹å‡» ç¬¬ä¸‰æ­¥ï¼šé…ç½®123456&#123; &quot;version&quot;: 4, &quot;php_bin&quot;:&quot;D:/PHPTutorial/php/php-7.2.1-nts/php.exe&quot;,//ä½ çš„phpå®‰è£…è·¯å¾„ &quot;format_on_save&quot;:true, &quot;option&quot;: &quot;value&quot;&#125; ä¿å­˜ä¹‹åé‡å¯ï¼ŒæŒ‰ctrl+så°±ä¼šè‡ªåŠ¨æ ¼å¼åŒ–äº†ï¼Œç„¶åæ ¼å¼åŒ–çš„è¿˜æ˜¯ä¸ç¾è§‚ã€‚ é‚£ä¹ˆä¸‹ä¸€æ­¥é€‰æ‹©PSR2ï¼ŒæŒ‰ä½ctrl+shift+pï¼Œè¾“å…¥phpfmt: toggle PSR2 å›è½¦ï¼Œåœ¨æµ‹è¯•ä½ å°±ä¼šå‘ç°æ ¼å¼æ¼‚äº®äº†è®¸å¤šã€‚ æ³¨æ„ï¼šctrl+shift+pæ— æ³•ä½¿ç”¨æ˜¯éœ€è¦å®‰è£…package Control ç™¾åº¦æœä¸€ä¸‹æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"sublime","slug":"sublime","permalink":"http://www.daichongweb.com/tags/sublime/"}]},{"title":"mysqlæŠŠå­—æ®µçš„å€¼ç”¨é€—å·è¿æ¥æˆå­—ç¬¦ä¸²","slug":"mysqlæŠŠå­—æ®µçš„å€¼ç”¨é€—å·è¿æ¥æˆå­—ç¬¦ä¸²","date":"2019-03-01T07:14:47.000Z","updated":"2021-09-03T05:56:57.933Z","comments":true,"path":"mysqlæŠŠå­—æ®µçš„å€¼ç”¨é€—å·è¿æ¥æˆå­—ç¬¦ä¸²/","link":"","permalink":"http://www.daichongweb.com/mysqlæŠŠå­—æ®µçš„å€¼ç”¨é€—å·è¿æ¥æˆå­—ç¬¦ä¸²/","excerpt":"ä¸¤å¼ å¤šå¯¹å¤šå…³ç³»çš„è¡¨è¿›è¡Œæ•°æ®å…³è”æŸ¥è¯¢ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„å†™æ³•(æˆ‘åªçŸ¥é“ä¸¤ç§,å˜¿å˜¿)ï¼š(1) ä»ä¸»è¡¨ä¸­æŸ¥å‡ºæ¥æ‰€å…³è”çš„å­—æ®µï¼Œä¾‹å¦‚order_idï¼Œç„¶åå¾ªç¯æ•°ç»„å°†order_idç”¨é€—å·éš”å¼€ï¼›å‰¯è¡¨è¿›è¡ŒinæŸ¥è¯¢ï¼ˆå½“ç„¶è¿™ç§å†™æ³•æ¯”è¾ƒlow,æ–°æ‰‹ä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼‰ (2) ä½¿ç”¨leftJoinå…³è”ï¼Œå·¦è¾¹ä¸ºä¸»è¡¨ä»¥ä¸Šä»…ä¸¾ä¾‹ æœ‰äº›æƒ…å†µä¸‹åªèƒ½ä½¿ç”¨å…ˆæŸ¥å†inçš„å†™æ³•ï¼Œé‚£ä¹ˆæ€ä¹ˆç®€åŒ–å®ƒå‘¢(å°±ä¸æƒ³å…ˆæŸ¥å†å¾ªç¯è¿æ¥)ï¼Ÿ é‚£ä¹ˆä¸€ä¸ªmysqlçš„å‡½æ•°å°±èƒ½ä½¿ç”¨ä¸Šäº†ï¼Œä»–å°±æ˜¯GROUP_CONCAT().è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠŠæŸä¸ªå­—æ®µçš„å€¼ç”¨å­—ç¬¦ä¸²è¿æ¥æˆA,B,Cè¿™æ ·çš„æ ¼å¼","text":"ä¸¤å¼ å¤šå¯¹å¤šå…³ç³»çš„è¡¨è¿›è¡Œæ•°æ®å…³è”æŸ¥è¯¢ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„å†™æ³•(æˆ‘åªçŸ¥é“ä¸¤ç§,å˜¿å˜¿)ï¼š(1) ä»ä¸»è¡¨ä¸­æŸ¥å‡ºæ¥æ‰€å…³è”çš„å­—æ®µï¼Œä¾‹å¦‚order_idï¼Œç„¶åå¾ªç¯æ•°ç»„å°†order_idç”¨é€—å·éš”å¼€ï¼›å‰¯è¡¨è¿›è¡ŒinæŸ¥è¯¢ï¼ˆå½“ç„¶è¿™ç§å†™æ³•æ¯”è¾ƒlow,æ–°æ‰‹ä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼‰ (2) ä½¿ç”¨leftJoinå…³è”ï¼Œå·¦è¾¹ä¸ºä¸»è¡¨ä»¥ä¸Šä»…ä¸¾ä¾‹ æœ‰äº›æƒ…å†µä¸‹åªèƒ½ä½¿ç”¨å…ˆæŸ¥å†inçš„å†™æ³•ï¼Œé‚£ä¹ˆæ€ä¹ˆç®€åŒ–å®ƒå‘¢(å°±ä¸æƒ³å…ˆæŸ¥å†å¾ªç¯è¿æ¥)ï¼Ÿ é‚£ä¹ˆä¸€ä¸ªmysqlçš„å‡½æ•°å°±èƒ½ä½¿ç”¨ä¸Šäº†ï¼Œä»–å°±æ˜¯GROUP_CONCAT().è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠŠæŸä¸ªå­—æ®µçš„å€¼ç”¨å­—ç¬¦ä¸²è¿æ¥æˆA,B,Cè¿™æ ·çš„æ ¼å¼ç”¨æ³•ï¼š1GROUP_CONCAT(å­—æ®µ) å»é‡æ—¶ç”¨æ³•1GROUP_CONCAT(DISTINCT(å­—æ®µ))æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ä¹‹åå°±ä¼šå¾—åˆ°è¿™ä¸ªå­—æ®µç”¨é€—å·éš”å¼€çš„å€¼","categories":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"phpExcelåˆ†æå¤æ‚è¡¨æ ¼æ•°æ®(è¿œç¨‹æ–‡ä»¶)","slug":"phpExcelåˆ†æå¤æ‚è¡¨æ ¼æ•°æ®-è¿œç¨‹æ–‡ä»¶","date":"2019-02-26T10:17:30.000Z","updated":"2021-09-03T05:56:57.944Z","comments":true,"path":"phpExcelåˆ†æå¤æ‚è¡¨æ ¼æ•°æ®-è¿œç¨‹æ–‡ä»¶/","link":"","permalink":"http://www.daichongweb.com/phpExcelåˆ†æå¤æ‚è¡¨æ ¼æ•°æ®-è¿œç¨‹æ–‡ä»¶/","excerpt":"phpExcelæ˜¯ä¸€ä¸ªä¸“é—¨æ“ä½œæ•°æ®è¡¨æ ¼çš„ç±»ï¼Œä»–å¯ä»¥å¯¼å…¥ã€å¯¼å‡ºexcelè¡¨æ ¼ä¸­çš„æ•°æ®ï¼Œç®€å•ã€æ¼‚äº®ï¼Œéå¸¸é€‚åˆå¯¼å…¥ã€å¯¼å‡ºã€åˆ†ææ•°æ®æ¥ä½¿ç”¨ã€‚ ä»¥ä¸‹ä»£ç ä¸»è¦ä¸ºäº†å®ç°ä»é˜¿é‡ŒOSSä¸Šè·å–æ•°æ®è¡¨æ ¼ï¼Œå¹¶åˆ†æè¡¨æ ¼æ•°æ®å¯¼å…¥æ•°æ®åº“ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯è¿™ä¸ªè¡¨æ ¼æ˜¯ä¸è§„åˆ™ï¼Œåˆ†ææ•°æ®çš„è¯ç›¸å¯¹æ¥æ•°å¤æ‚äº†ä¸€äº›ï¼ŒåºŸè¯ä¸å¤šå°‘ï¼Œä¸‹é¢ç›´æ¥ä»‹ç»å¦‚ä½•å¤„ç†è¿™ç§å¤æ‚çš„è¡¨æ ¼ï¼š","text":"phpExcelæ˜¯ä¸€ä¸ªä¸“é—¨æ“ä½œæ•°æ®è¡¨æ ¼çš„ç±»ï¼Œä»–å¯ä»¥å¯¼å…¥ã€å¯¼å‡ºexcelè¡¨æ ¼ä¸­çš„æ•°æ®ï¼Œç®€å•ã€æ¼‚äº®ï¼Œéå¸¸é€‚åˆå¯¼å…¥ã€å¯¼å‡ºã€åˆ†ææ•°æ®æ¥ä½¿ç”¨ã€‚ ä»¥ä¸‹ä»£ç ä¸»è¦ä¸ºäº†å®ç°ä»é˜¿é‡ŒOSSä¸Šè·å–æ•°æ®è¡¨æ ¼ï¼Œå¹¶åˆ†æè¡¨æ ¼æ•°æ®å¯¼å…¥æ•°æ®åº“ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯è¿™ä¸ªè¡¨æ ¼æ˜¯ä¸è§„åˆ™ï¼Œåˆ†ææ•°æ®çš„è¯ç›¸å¯¹æ¥æ•°å¤æ‚äº†ä¸€äº›ï¼ŒåºŸè¯ä¸å¤šå°‘ï¼Œä¸‹é¢ç›´æ¥ä»‹ç»å¦‚ä½•å¤„ç†è¿™ç§å¤æ‚çš„è¡¨æ ¼ï¼šç¬¬ä¸€æ­¥ï¼šåˆ†æè¡¨æ ¼ ç»è¿‡å¤„ç†ï¼ŒæŠŠè¿™ä¸ªåº•è‰²ä¸ºç™½è‰²çš„è¡¨æ ¼å¤„ç†æˆæ­£å¸¸çš„å½¢å¼ç»è¿‡å¤„ç†å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªè¡¨æ ¼çš„æ•°æ®æ˜¯æœ‰è§„å¾‹çš„ã€‚åæ ‡B6æ˜¯è´¦å·ï¼ŒC6æ˜¯æˆ¿å·ï¼ŒD6æ˜¯æˆ¿ç±»ï¼Œä¸€æ¬¡ç±»æ¨ï¼Œæ¯è¡Œä¸åŒçš„æ•°æ®éƒ½æ˜¯ç”±ä¸åŒå­—æ¯å’Œæ•°å­—çš„ç»„åˆã€‚ ç‰¹æ®Šçš„ä¸€ç‚¹å°±æ˜¯æˆ¿ä»·åœ¨è¡Œæ•°æ®çš„ä¸‹ä¸€è¡Œï¼Œé€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ¯è¡Œçš„çœŸå®æ•°æ®çš„åˆ—åæ ‡æ˜¯å¶æ•°ï¼Œç›¸å¯¹åº”çš„æˆ¿ä»·éƒ½æ˜¯åœ¨å¥‡æ•°ä¸Šï¼Œè¿™æ ·ä¸€åˆ†æå°±å¯ä»¥æ‰¾åˆ°æ–¹æ³•åˆ†ææ•°æ®äº†ã€‚ ç¬¬äºŒæ­¥ï¼šå®ç°ä»£ç  å®ç°ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?phpinclude_once('../excel/Classes/PHPExcel/IOFactory.php');//é™æ€file_put_contents('abc.xls',file_get_contents('https://www.baidu.com/20190226/caf55125b3f510b9242235bfa7f06212.xls'));$filePath = 'abc.xls';$fileType = PHPExcel_IOFactory::identify($filePath);//æ£€æµ‹æ–‡ä»¶ç±»å‹$fileRead = PHPExcel_IOFactory::createReader($fileType);//è¯»å–æ–‡ä»¶$excelObj = $fileRead-&gt;load($filePath);$sheet = $excelObj-&gt;getActiveSheet();$highestRow = $sheet-&gt;getHighestRow();//è¡Œæ•°$highestColumn = $sheet-&gt;getHighestColumn();//åˆ—æ•°$dataSet = array();//æ•°æ®//è¿™é‡Œæ˜¯ä»ç¬¬6è¡Œå¼€å§‹ï¼Œå› ä¸ºä¸Š5è¡Œéƒ½æ˜¯ç©ºçš„ï¼Œç›´æ¥è¿‡æ»¤for($row = 6;$row&lt;=$highestRow-4;$row++)&#123; $dataSet[$row] = array(); //åˆ—ä»Bå¼€å§‹Aä¹Ÿæ˜¯ç©ºçš„ for($column=\"B\";$column&lt;=$highestColumn;$column++)&#123; //å¦‚æœåˆ—åæ ‡æ˜¯F(æˆ¿ä»·) and æ˜¯å¥‡æ•°è¡Œï¼Œè¯´æ˜å·²ç»åˆ°æˆ¿ä»·é‚£ä¸€è¡Œäº† if($column=='F' &amp;&amp; $row%2==1)&#123; //åˆ—åæ ‡æ˜¯F è¡Œåæ ‡7 7-1 å°±æ˜¯ä¸Šä¸€è¡Œ,è¿™é‡Œçš„æ„æ€å°±æ˜¯ä¸Šä¸€è¡Œçš„Fé‡Œçš„å€¼ç­‰äºä¸‹ä¸€è¡Œçš„Fçš„å€¼ $dataSet[$row-1][$column] = $sheet-&gt;getCell($column.$row)-&gt;getValue(); &#125;else&#123; //å¦‚æœåˆ—åæ ‡æ˜¯Lå’ŒNè¯´æ˜æ˜¯æ—¶é—´ if($column =='L' || $column == 'N')&#123; $time = $sheet-&gt;getCell($column.$row)-&gt;getValue(); //è½¬åŒ–æ—¶é—´ $dataSet[$row][$column] = date('Y-m-d H:i:s',PHPExcel_Shared_Date::ExcelToPHP($time)); &#125;else&#123; $dataSet[$row][$column] = $sheet-&gt;getCell($column.$row)-&gt;getValue(); &#125; &#125; &#125; //åˆ é™¤å·²ç»åˆå¹¶è¿‡çš„å¥‡æ•°è¡Œ if($row%2==1)&#123; unset($dataSet[$row]); &#125;else&#123; //åˆ é™¤ç©ºæ•°ç»„ $dataSet[$row] = array_filter($dataSet[$row]); &#125;&#125;echo \"&lt;pre&gt;\";print_r($dataSet); ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹ç»“æœ æ‰“å°æ•°æ®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576Array( [6] =&gt; Array ( [B] =&gt; 233756 [C] =&gt; 1AC65 [D] =&gt; DDYG [G] =&gt; æˆ´ [L] =&gt; 2019-02-04 12:42:00 [N] =&gt; 2019-03-06 12:00:00 [F] =&gt; 400 ) [8] =&gt; Array ( [B] =&gt; 233758 [C] =&gt; 1BC65 [D] =&gt; DDYG [G] =&gt; æˆ´ [H] =&gt; 48+456+844654654 [L] =&gt; 2019-02-04 12:44:00 [N] =&gt; 2019-03-06 12:00:00 [F] =&gt; 400 ) [10] =&gt; Array ( [B] =&gt; 241572 [C] =&gt; E55b [D] =&gt; DDYG [G] =&gt; æˆ´ [L] =&gt; 2019-02-16 09:40:00 [N] =&gt; 2019-03-30 12:00:00 [F] =&gt; 0 ) [12] =&gt; Array ( [B] =&gt; 246484 [C] =&gt; 2AC52 [D] =&gt; YGTYF [G] =&gt; æˆ´ [H] =&gt; 476+5456456156415641 [I] =&gt; åšå®¢ [L] =&gt; 2019-02-25 17:23:00 [N] =&gt; 2019-02-27 12:00:00 [F] =&gt; 362 ) [14] =&gt; Array ( [B] =&gt; 246485 [C] =&gt; 2BC52 [D] =&gt; YGTYF [G] =&gt; æˆ´ [H] =&gt; 415645156 [I] =&gt; åšå®¢ [L] =&gt; 2019-02-25 17:24:00 [N] =&gt; 2019-02-27 12:00:00 [F] =&gt; 362 ) [16] =&gt; Array ( [B] =&gt; 246486 [C] =&gt; D86a [D] =&gt; DDYG [G] =&gt; æˆ´ [H] =&gt; 156+1112 [L] =&gt; 2019-02-25 17:25:00 [N] =&gt; 2019-02-28 12:00:00 [P] =&gt; ä¸šä¸»è‡ªä¸» [F] =&gt; 0 )) å¾ˆå®Œç¾ï¼Œå¦‚æœ‰å…¶å®ƒéœ€è¦å¯æ ¹æ®ä»£ç è°ƒæ•´ã€‚","categories":[{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/categories/phpæ‰©å±•ç±»/"}],"tags":[{"name":"phpExcel","slug":"phpExcel","permalink":"http://www.daichongweb.com/tags/phpExcel/"}]},{"title":"laravelå°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€","slug":"larveralå°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€","date":"2019-02-20T04:59:39.000Z","updated":"2021-09-03T05:56:57.930Z","comments":true,"path":"larveralå°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€/","link":"","permalink":"http://www.daichongweb.com/larveralå°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€/","excerpt":"ä»Šå¤©æ¥ä¸€ç¯‡laravel5.5çš„å°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€ç¤ºä¾‹ï¼Œæ€»æ„Ÿè§‰ç”¨laravelæ¡†æ¶å†™çš„ä»£ç é€¼æ ¼é«˜äº†å¾ˆå¤šï¼Œå¥‡æ€ªï¼ï¼ 1.å°ç¨‹åºå‘ç”¨æˆ·å‘é€æ¨¡æ¿æ¶ˆæ¯åˆ†ä¸ºä¸¤æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼šç”¨æˆ·åœ¨å°ç¨‹åºä¸Šè¿›è¡Œè¡¨å•æ“ä½œ(ä¾‹å¦‚æäº¤è¡¨å•),æ­¤æ—¶å‰ç«¯è¦è·å–åˆ°form_idä¼ é€’ç»™åç«¯ ç¬¬äºŒæ­¥ï¼šåç«¯æ¥æ”¶åˆ°from_idï¼Œå†æŸ¥è¯¢ç”¨æˆ·çš„openidï¼ŒæŒ‰ç…§å¾®ä¿¡æ–‡æ¡£çš„æ•°æ®æ ¼å¼è¿›è¡Œå‘é€2.å‘é€ä¹‹å‰æœ‰ä¸€ä¸‹å‡ ä¸ªå‰æ: ç¬¬ä¸€:å¾®ä¿¡å°ç¨‹åºä»¥å¼€é€šäº†æ¶ˆæ¯æœåŠ¡ ç¬¬äºŒ:å¾®ä¿¡å°ç¨‹åºä»¥é…ç½®äº†æ¨¡æ¿æ¶ˆæ¯ ç¬¬ä¸‰:å‘é€çš„æ•°æ®å†…å®¹å¿…é¡»å’Œå¾®ä¿¡å°ç¨‹åºé…ç½®çš„æ¨¡æ¿æ¶ˆæ¯ä¸€è‡´ ç¬¬å››:è·å–åˆ°æ­£ç¡®çš„ç”¨æˆ·openid ç¬¬äº”:è·å–åˆ°æœªè¿‡æœŸçš„å¾®ä¿¡access_token","text":"ä»Šå¤©æ¥ä¸€ç¯‡laravel5.5çš„å°ç¨‹åºæ¨¡æ¿æ¶ˆæ¯å‘é€ç¤ºä¾‹ï¼Œæ€»æ„Ÿè§‰ç”¨laravelæ¡†æ¶å†™çš„ä»£ç é€¼æ ¼é«˜äº†å¾ˆå¤šï¼Œå¥‡æ€ªï¼ï¼ 1.å°ç¨‹åºå‘ç”¨æˆ·å‘é€æ¨¡æ¿æ¶ˆæ¯åˆ†ä¸ºä¸¤æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼šç”¨æˆ·åœ¨å°ç¨‹åºä¸Šè¿›è¡Œè¡¨å•æ“ä½œ(ä¾‹å¦‚æäº¤è¡¨å•),æ­¤æ—¶å‰ç«¯è¦è·å–åˆ°form_idä¼ é€’ç»™åç«¯ ç¬¬äºŒæ­¥ï¼šåç«¯æ¥æ”¶åˆ°from_idï¼Œå†æŸ¥è¯¢ç”¨æˆ·çš„openidï¼ŒæŒ‰ç…§å¾®ä¿¡æ–‡æ¡£çš„æ•°æ®æ ¼å¼è¿›è¡Œå‘é€2.å‘é€ä¹‹å‰æœ‰ä¸€ä¸‹å‡ ä¸ªå‰æ: ç¬¬ä¸€:å¾®ä¿¡å°ç¨‹åºä»¥å¼€é€šäº†æ¶ˆæ¯æœåŠ¡ ç¬¬äºŒ:å¾®ä¿¡å°ç¨‹åºä»¥é…ç½®äº†æ¨¡æ¿æ¶ˆæ¯ ç¬¬ä¸‰:å‘é€çš„æ•°æ®å†…å®¹å¿…é¡»å’Œå¾®ä¿¡å°ç¨‹åºé…ç½®çš„æ¨¡æ¿æ¶ˆæ¯ä¸€è‡´ ç¬¬å››:è·å–åˆ°æ­£ç¡®çš„ç”¨æˆ·openid ç¬¬äº”:è·å–åˆ°æœªè¿‡æœŸçš„å¾®ä¿¡access_tokené¦–å…ˆæ˜¯å‘é€ç¤ºä¾‹: phpä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;?phpclass WxHelper&#123; /** * seedTempMessage å‘é€æ¨¡æ¿æ¶ˆæ¯ * @author DaiChong * @DateTime 2019-01-04 * @param array $seedData éœ€è¦å‘é€çš„æ•°æ® æ ¼å¼ä¸º(key=&gt;value) * @param string $tempKey tempkey * @return json **/ public static function seedTempMessage($seedData,$tempKey) &#123; if( empty($seedData) )&#123; self::seedError('è¯·ä¼ è¾“æ•°æ®(æ ¼å¼ä¸ºArray)ï¼'); return; &#125; //å‘é€æ¨¡æ¿æ¶ˆæ¯åœ°å€ $postUrl = config(\"company.seedTempMeg\"); if( $postUrl == false )&#123; self::seedError('æœªå®šä¹‰å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯åœ°å€(seedTempMeg)ï¼'); return; &#125; if($tempKey)&#123; //æŸ¥è¯¢æ¶ˆæ¯æ¨¡æ¿å†…å®¹ $temp = \\App\\Models\\WechatMessageModel::where('temp_key',$tempKey)-&gt;first()-&gt;toArray(); if( empty($temp) )&#123; self::seedError('æœªæ·»åŠ æ­¤æ¨¡æ¿!'); return; &#125; $seedData['template_id'] = $temp['temp_id']; $temp_context = $temp['context']; $temp_json = vsprintf($temp_context,$seedData);//æ›¿æ¢æ•°æ® $temp_array = json_decode($temp_json,true); //è·å–AccessToken $accessToken = self::getAccessToken(); $postUrl = str_replace('ACCESS_TOKEN', $accessToken, $postUrl); $curl = new \\JSocket(); $curl-&gt;setUrl($postUrl); $curl-&gt;setRetFormat(\\JSocket::retFormatText); foreach ($temp_array as $key =&gt; $value) &#123; $curl-&gt;setParam($key,$value); &#125; $curl-&gt;setTimeout(30); $curl-&gt;setHeader(\"Content-Type:application/json\"); $curl-&gt;setRequestType(\\JSocket::retFormatJson); $curl-&gt;setMethod(\\JSocket::methodPost); $curl-&gt;exe(); $result = $curl-&gt;getRet(); self::seedError($result); return $result; &#125;else&#123; self::seedError('æœªä¼ å…¥æ¨¡æ¿Key(tempKey)!'); return; &#125; &#125; //è·å–å¾®ä¿¡AccessToken æˆ‘è¿™é‡Œå·²ç»åšäº†access_tokenå¤„ç†ï¼Œå…·ä½“ç»†èŠ‚æŒ‰ç…§å¾®ä¿¡æ–‡æ¡£è¿›è¡Œæ“ä½œæˆ–è¯„è®º public static function getAccessToken()&#123; $access_token = \\App\\Data\\WxAccessTokenData::info(); if ($access_token)&#123; return $access_token; &#125; $getAccessTokenUrl = config(\"company.getAccessToken\"); $getAccessTokenUrl = str_replace([\"APPID\",\"APPSECRET\"],[config(\"company.appid\"),config(\"company.appsecret\")],$getAccessTokenUrl); $curl = new \\JSocket(); $curl-&gt;setUrl($getAccessTokenUrl); $curl-&gt;setRetFormat(\\JSocket::retFormatJson); $curl-&gt;setTimeout(30); $curl-&gt;setMethod(\\JSocket::methodGet); $curl-&gt;exe(); $r = $curl-&gt;getRet(); return \\App\\Data\\WxAccessTokenData::set($r[\"access_token\"],$r[\"expires_in\"]); &#125; //å‘é€å¤±è´¥ public static function seedError($msg)&#123; \\Log::info($msg); return \\ResponseHelper::success([ 'code' =&gt; 1, 'message' =&gt; $msg ]); &#125;&#125; æ•°æ®é…ç½®: é…ç½®1234567891011121314151617181920212223&#123; \"touser\":\"%s\", \"template_id\":\"%s\", \"page\":\"%s\", \"form_id\":\"%s\", \"data\":&#123; \"keyword1\":&#123; \"value\":\"%s\" &#125;, \"keyword2\":&#123; \"value\":\"%s\" &#125;, \"keyword3\":&#123; \"value\":\"%s\" &#125;, \"keyword4\":&#123; \"value\":\"%s\" &#125;, \"keyword5\":&#123; \"value\":\"%s\" &#125; &#125;&#125; è¿™é‡Œé…ç½®ä¹Ÿè¦å’Œå¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯çš„é…ç½®ä¸€è‡´ï¼Œä¾‹å¦‚æ¨¡æ¿æ¶ˆæ¯çš„é…ç½®å†…å®¹æœ€å¤šåˆ°keyword8,é‚£ä¹ˆè¿™é‡Œå°±è¦åœ¨å¤åˆ¶3ä¸ª,â€keyword5â€:{â€œvalueâ€:â€%sâ€}å‡ºæ¥æ·»åŠ åˆ°åé¢ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®çš„å†…å®¹éƒ½æ˜¯ç”¨%sè¡¨ç¤ºçš„ï¼Œå°±æ˜¯ä¸ºäº†ä½¿ç”¨vsprintfæ›¿æ¢æ•°æ®ã€‚å‘é€é…ç½®: å‘é€é…ç½®12345678910111213141516171819202122//å‘é€æ¨¡æ¿æ¶ˆæ¯ public function postSeedTemp() &#123; $request = \\Request::all(); if( $request['openid'] == false || $request['form_id'] == false)&#123; return \\ResponseHelper::error(\"ç¼ºå°‘å‚æ•°!\",NULL,NULL,500); &#125; $array = array( 'touser' =&gt; $request['openid'], 'template_id' =&gt; '', 'page' =&gt; 'pages/home/home', 'form_id' =&gt; $request['form_id'], 'keyword1' =&gt; 'å–å®¶æ­£åœ¨ç§¯æå‡†å¤‡å•†å“', 'keyword2' =&gt; 'é¡ºä¸°å¿«é€’', 'keyword3' =&gt; '4324242342', 'keyword4' =&gt; 'S123456789', 'keyword5' =&gt; 'ä½ çš„ç‰©æµçŠ¶æ€å·²æ›´æ–°' ); return \\ResponseHelper::success([ 'result' =&gt; \\WxHelper::seedTempMessage($array,'logisticsMsg') ]); &#125;å¯ä»¥çœ‹å‡ºè¿™é‡Œçš„é…ç½®å’Œæ•°æ®é…ç½®æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚curlæ¨¡æ‹Ÿæäº¤ç¤ºä¾‹: curlç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220&lt;?phpclass JSocket &#123; const methodGet=\"GET\"; //å‘èµ·GETè¯·æ±‚ const methodPost=\"POST\"; //å‘èµ·POSTè¯·æ±‚ const methodDelete=\"DELETE\"; //å‘èµ·DELETEè¯·æ±‚ const methodPut=\"PUT\"; //å‘èµ·PUTè¯·æ±‚ const retFormatJson=\"JSON\"; //è¿”å›jsonæ ¼å¼ const retFormatXml=\"XML\"; //è¿”å›XMLæ ¼å¼ const retFormatText=\"Text\"; //è¿”å›XMLæ ¼å¼ private $ch; //é“¾æ¥å¯¹è±¡ private $url; //è¯·æ±‚åœ°å€ private $requestType; //è¯·æ±‚æ–¹å¼ private $param=[]; //è¯·æ±‚å‚æ•° private $timeout=10; //è¶…æ—¶æ—¶é—´ private $header=[]; //è¯·æ±‚å¤´ä¿¡æ¯ private $method=JSocket::methodGet; //è¯·æ±‚æ–¹å¼ private $file; //æ–‡ä»¶ private $ssl; //è¯ä¹¦æ–‡ä»¶ private $ret; //è¿”å›ç»“æœ private $retFormat=JSocket::retFormatJson; //è¿”å›æ ¼å¼ public function __construct() &#123; $this-&gt;ch = curl_init(); &#125; public function setRetFormat($retFormat)&#123; $this-&gt;retFormat=$retFormat; return $this; &#125; public function setRequestType($requestType) &#123; $this-&gt;requestType=$requestType; &#125; /** * è®¾ç½®è¯·æ±‚åœ°å€ */ public function setUrl($url)&#123; $this-&gt;url=$url; return $this; &#125; /** * è®¾ç½®è¯·æ±‚å‚æ•° * @param type $key * @param type $value * @return \\JSocket */ public function setParam($key,$value)&#123; $this-&gt;param[$key]=$value; return $this; &#125; /** * è·å–è¯·æ±‚å‚æ•° * @param type $key * @param type $value * @return \\JSocket */ public function getParam()&#123; return $this-&gt;param; &#125; /** * è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ * @param type $timeout * @return \\JSocket */ public function setTimeout($timeout)&#123; $this-&gt;timeout=$timeout; return $this; &#125; /** * è®¾ç½®è¯·æ±‚å¤´ * @param type $header * @return \\JSocket */ public function setHeader($header)&#123; $this-&gt;header[]=$header; return $this; &#125; /** * è®¾ç½®è¯·æ±‚æ–¹å¼ * @param type $method * @return \\JSocket */ public function setMethod($method)&#123; $this-&gt;method=$method; return $this; &#125; /** * è®¾ç½®å‘é€æ–‡ä»¶ * @param type $key * @param type $value * @return \\JSocket */ public function setFile($key,$file)&#123; $this-&gt;file[$key]=curl_file_create($file); return $this; &#125; /** * è®¾ç½®æ•´æ•°æ–‡ä»¶ * @param type $ssl * @return \\JSocket */ public function ssl($ssl)&#123; $this-&gt;ssl=$ssl; return $this; &#125; /** * è¯·æ±‚æ¥å£ * @return \\JSocket */ public function exe()&#123; curl_setopt($this-&gt;ch, CURLOPT_TIMEOUT, $this-&gt;timeout); curl_setopt($this-&gt;ch, CURLOPT_RETURNTRANSFER, true); if($this-&gt;header)&#123; curl_setopt($this-&gt;ch,CURLOPT_HTTPHEADER, $this-&gt;header); curl_setopt($this-&gt;ch,CURLOPT_HEADER,FALSE); &#125; switch ($this-&gt;method) &#123; case self::methodPost: curl_setopt($this-&gt;ch, CURLOPT_POST, TRUE); if($this-&gt;file)&#123; curl_setopt($this-&gt;ch, CURLOPT_POSTFIELDS, $this-&gt;file); &#125; if($this-&gt;param)&#123; if ($this-&gt;requestType==self::retFormatJson)&#123; curl_setopt($this-&gt;ch, CURLOPT_POSTFIELDS, json_encode($this-&gt;param)); &#125;else if ($this-&gt;requestType==self::retFormatXml)&#123; curl_setopt($this-&gt;ch, CURLOPT_POSTFIELDS, \\DataBaseHelper::arrayToXml($this-&gt;param)); &#125;else&#123; curl_setopt($this-&gt;ch, CURLOPT_POSTFIELDS, http_build_query($this-&gt;param)); &#125; &#125; break; case self::methodDelete: curl_setopt($this-&gt;ch, CURLOPT_CUSTOMREQUEST, 'DELETE'); case self::methodGet: if($this-&gt;param)&#123; $this-&gt;url = $this-&gt;url . (strpos($this-&gt;url, '?') ? '&amp;' : '?') . http_build_query($this-&gt;param); &#125; &#125; if($this-&gt;ssl)&#123; curl_setopt($this-&gt;ch,CURLOPT_SSLCERTTYPE,'PEM'); curl_setopt($this-&gt;ch,CURLOPT_SSLCERT, $this-&gt;ssl['cert']); curl_setopt($this-&gt;ch,CURLOPT_SSLKEYTYPE,'PEM'); curl_setopt($this-&gt;ch,CURLOPT_SSLKEY, $this-&gt;ssl['key']); curl_setopt($this-&gt;ch,CURLOPT_SSL_VERIFYPEER,TRUE); curl_setopt($this-&gt;ch,CURLOPT_SSL_VERIFYHOST,2);//ä¸¥æ ¼æ ¡éªŒ curl_setopt($this-&gt;ch,CURLOPT_HEADER, FALSE); if (isset($this-&gt;ssl['ca']))&#123; curl_setopt($this-&gt;ch,CURLOPT_CAINFO, $this-&gt;ssl['ca']); &#125; &#125;else&#123; curl_setopt($this-&gt;ch, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($this-&gt;ch, CURLOPT_SSL_VERIFYHOST, false); &#125; curl_setopt($this-&gt;ch, CURLOPT_URL, $this-&gt;url); $starttime=$this-&gt;microtimeFloat(); $this-&gt;ret = curl_exec($this-&gt;ch); $endtime = $this-&gt;microtimeFloat(); $errorNum=curl_errno($this-&gt;ch); $errorMsg=curl_error($this-&gt;ch); $runtime = number_format(($endtime-$starttime), 4).'s'; if($errorNum)&#123; Log::error($this-&gt;url, [\"param\"=&gt;$this-&gt;param,\"result\"=&gt;$errorNum,\"runtime\"=&gt;$runtime,\"response\"=&gt;$this-&gt;ret]); Log::error(\"curlè¯·æ±‚é”™è¯¯ä¿¡æ¯ï¼š\".$errorMsg); return NULL; &#125; $this-&gt;http_code = curl_getinfo($this-&gt;ch,CURLINFO_HTTP_CODE); curl_close ($this-&gt;ch); Log::info($this-&gt;url, [\"param\"=&gt;$this-&gt;param,\"status\"=&gt;$this-&gt;http_code,\"runtime\"=&gt;$runtime,\"response\"=&gt;$this-&gt;ret]); return $this; &#125; /** * è·å–ç»“æœ */ public function getRet()&#123; switch ($this-&gt;retFormat)&#123; case JSocket::retFormatJson: return json_decode($this-&gt;ret,TRUE); break; case JSocket::retFormatXml: return \\DataBaseHelper::xmlToArray($this-&gt;ret); break; &#125; return $this-&gt;ret; &#125; public function getHttpCode()&#123; return $this-&gt;http_code; &#125; /** * ç²¾ç¡®æ—¶é—´ * @return type */ public function microtimeFloat()&#123; list($usec, $sec) = explode(\" \", microtime()); return ((float)$usec + (float)$sec); &#125;&#125;","categories":[{"name":"phpæ¡†æ¶","slug":"phpæ¡†æ¶","permalink":"http://www.daichongweb.com/categories/phpæ¡†æ¶/"}],"tags":[{"name":"laravel","slug":"laravel","permalink":"http://www.daichongweb.com/tags/laravel/"}]},{"title":"tp5æ¨¡å‹äº‹ä»¶â€˜before_insertâ€™ç”¨æ³•","slug":"tp5æ¨¡å‹äº‹ä»¶â€˜beforeInsertâ€™ç”¨æ³•","date":"2019-02-19T02:19:58.000Z","updated":"2021-09-03T05:56:57.966Z","comments":true,"path":"tp5æ¨¡å‹äº‹ä»¶â€˜beforeInsertâ€™ç”¨æ³•/","link":"","permalink":"http://www.daichongweb.com/tp5æ¨¡å‹äº‹ä»¶â€˜beforeInsertâ€™ç”¨æ³•/","excerpt":"tp5çš„æ¨¡å‹äº‹ä»¶åªæœ‰åœ¨è°ƒç”¨æ¨¡å‹æ–¹æ³•çš„æ—¶å€™ç”Ÿæ•ˆï¼Œä½¿ç”¨æŸ¥è¯¢æ„é€ å™¨æ˜¯æ— æ•ˆçš„ã€‚ å¼•è¨€TP5å®˜ç½‘ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å®ä¾‹åŒ–æ¨¡å‹è¿›è¡Œæ“ä½œbefore_insertè¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ‰§è¡Œçš„ã€‚ æ¨¡å‹çš„æ„ä¹‰å°±æ˜¯ä¸ºäº†ç®€åŒ–æ§åˆ¶å™¨æ“ä½œï¼Œç®€åŒ–é€»è¾‘å¤„ç†ï¼Œæå‡ä»£ç çš„æ•´æ´åº¦å’Œå¯è¯»æ€§ã€‚è¿™æ ·ä¸€æ¥æ¨¡å‹äº‹ä»¶èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚","text":"tp5çš„æ¨¡å‹äº‹ä»¶åªæœ‰åœ¨è°ƒç”¨æ¨¡å‹æ–¹æ³•çš„æ—¶å€™ç”Ÿæ•ˆï¼Œä½¿ç”¨æŸ¥è¯¢æ„é€ å™¨æ˜¯æ— æ•ˆçš„ã€‚ å¼•è¨€TP5å®˜ç½‘ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å®ä¾‹åŒ–æ¨¡å‹è¿›è¡Œæ“ä½œbefore_insertè¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ‰§è¡Œçš„ã€‚ æ¨¡å‹çš„æ„ä¹‰å°±æ˜¯ä¸ºäº†ç®€åŒ–æ§åˆ¶å™¨æ“ä½œï¼Œç®€åŒ–é€»è¾‘å¤„ç†ï¼Œæå‡ä»£ç çš„æ•´æ´åº¦å’Œå¯è¯»æ€§ã€‚è¿™æ ·ä¸€æ¥æ¨¡å‹äº‹ä»¶èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚è¿™ç¯‡æ–‡ç« å°±ä»‹ç»ä¸€ä¸‹æ¨¡å‹äº‹ä»¶â€˜before_insertâ€™äº‹ä»¶å¯¹äºä¸‹å•é€»è¾‘çš„å¸®åŠ©ã€‚æ¨¡å‹ShopOrder1234567891011121314151617&lt;?phpnamespace app\\common\\model;use think\\Model;use daichongweb\\helper;class ShopOrderM extends Model&#123; protected $table = 'shop_text'; protected static function init() &#123; self::beforeInsert(function($ShopOrderM)&#123; //åˆ›å»ºè®¢å•å· $ShopOrderM['orderno'] = helper::buildOrderno('T', 'shop_text'); $ShopOrderM['name'] = $ShopOrderM['name'].'1';//å¤„ç†å‰ç«¯ä¼ è¿‡æ¥çš„æ•°æ®è¿›è¡Œæ“ä½œ return $ShopOrderM; &#125;,true); &#125;&#125; æ§åˆ¶å™¨1234567891011121314151617181920212223242526272829&lt;?phpnamespace app\\api\\controller;use daichongweb\\helper;use think\\response\\Json;use think\\Db;use think\\facade\\Request;use think\\facade\\Cache;use app\\api\\controller\\ShopMain;/** * å•†åŸä¸‹å•æ¥å£ */class ShopOrder&#123; //ä¸‹å•æµ‹è¯• public function orderText() &#123; $info = input(); //éªŒè¯å™¨ $validate = new \\app\\common\\validate\\ShopOrderV(); if(!$validate-&gt;check($info)) &#123; return new Json([ 'code' =&gt; 1, 'message' =&gt; $validate-&gt;getError(), ]); &#125; $shopOrder = new \\app\\common\\model\\ShopOrderM(); $shopOrder-&gt;save($info); &#125;&#125; ä»æ§åˆ¶å™¨çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ§åˆ¶å™¨çš„é€»è¾‘å¤„ç†åªæœ‰æ¥æ”¶æ•°æ®ã€éªŒè¯ã€æ‰§è¡Œæ’å…¥ã€‚ç”Ÿæˆè®¢å•ã€å¤„ç†æ•°æ®å…¨éƒ¨æ”¾åœ¨æ¨¡å‹çš„æ–°å¢å‰å¤„ç†ã€‚$ShopOrderM[â€˜nameâ€™] = $ShopOrderM[â€˜nameâ€™].â€™1â€™;è¿™é‡Œå°±æ˜¯è‡ªåŠ¨å‘æ•°æ®è¡¨çš„nameæ’å…¥æ•°æ®ã€‚","categories":[{"name":"phpæ¡†æ¶","slug":"phpæ¡†æ¶","permalink":"http://www.daichongweb.com/categories/phpæ¡†æ¶/"}],"tags":[{"name":"tp5","slug":"tp5","permalink":"http://www.daichongweb.com/tags/tp5/"}]},{"title":"tp5ç±»çš„å±æ€§ä¸å­˜åœ¨","slug":"tp5ç±»çš„å±æ€§ä¸å­˜åœ¨","date":"2019-02-16T06:13:53.000Z","updated":"2021-09-03T05:56:57.966Z","comments":true,"path":"tp5ç±»çš„å±æ€§ä¸å­˜åœ¨/","link":"","permalink":"http://www.daichongweb.com/tp5ç±»çš„å±æ€§ä¸å­˜åœ¨/","excerpt":"tp5æ¨¡å‹æ–°å¢å…³è”æŠ¥é”™ç±»çš„å±æ€§ä¸å­˜åœ¨,å³ä½¿æ•°æ®è¡¨ä¸­å­˜åœ¨éœ€è¦çš„å­—æ®µï¼Œä½†æ˜¯ä¾ç„¶æŠ¥é”™app\\common\\model\\Slide-&gt;is_slideç±»ä¼¼çš„é—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºåœ¨ä½¿ç”¨å…³è”æ¨¡å‹æ–°å¢çš„æ—¶å€™ä¸»è¡¨æ–°å¢æ“ä½œæœªä½¿ç”¨æ¨¡å‹æ–°å¢ã€‚","text":"tp5æ¨¡å‹æ–°å¢å…³è”æŠ¥é”™ç±»çš„å±æ€§ä¸å­˜åœ¨,å³ä½¿æ•°æ®è¡¨ä¸­å­˜åœ¨éœ€è¦çš„å­—æ®µï¼Œä½†æ˜¯ä¾ç„¶æŠ¥é”™app\\common\\model\\Slide-&gt;is_slideç±»ä¼¼çš„é—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºåœ¨ä½¿ç”¨å…³è”æ¨¡å‹æ–°å¢çš„æ—¶å€™ä¸»è¡¨æ–°å¢æ“ä½œæœªä½¿ç”¨æ¨¡å‹æ–°å¢ã€‚é”™è¯¯å†™æ³•12345//ç›´æ¥æ–°å¢æœªä½¿ç”¨æ¨¡å‹$result = Db::name('table')-&gt;allowField(true)-&gt;save($info);//ç„¶åä½¿ç”¨æ¨¡å‹æ–°å¢$model = new \\app\\common\\model\\ShopCommentM();$model-&gt;comment_image()-&gt;saveAll($imageData); æ­£ç¡®å†™æ³•1234//å…ˆä½¿ç”¨æ¨¡å‹æ–°å¢ä¸»è¡¨ï¼Œå†æ–°å¢å…³è”è¡¨$model = new \\app\\common\\model\\ShopCommentM();$model-&gt;allowField(true)-&gt;save($info);$model-&gt;comment_image()-&gt;saveAll($imageData); æ¨¡å‹æ–‡ä»¶1234567891011121314151617181920212223//ä¸»è¡¨æ¨¡å‹&lt;?phpnamespace app\\common\\model;use think\\Model;class ShopCommentM extends Model&#123; protected $table = 'shop_comment'; public function comment_image() &#123; return $this-&gt;hasMany('ShopCommentImageM','comment_id'); &#125;&#125;//å…³è”è¡¨æ¨¡å‹&lt;?phpnamespace app\\common\\model;use think\\Model;class ShopCommentImageM extends Model&#123; protected $table = 'shop_comment_image';&#125;","categories":[],"tags":[{"name":"tp5","slug":"tp5","permalink":"http://www.daichongweb.com/tags/tp5/"}]},{"title":"phpå…³äºtraitçš„ä½¿ç”¨","slug":"phpå…³äºtraitçš„ä½¿ç”¨","date":"2019-01-25T09:28:45.000Z","updated":"2021-09-03T05:56:57.954Z","comments":true,"path":"phpå…³äºtraitçš„ä½¿ç”¨/","link":"","permalink":"http://www.daichongweb.com/phpå…³äºtraitçš„ä½¿ç”¨/","excerpt":"å…³äºtraitä¹‹å‰å¯ä»¥è¯´æ˜¯å®Œå…¨æ²¡æœ‰äº†è§£è¿‡ï¼Œçœ‹äº†å®˜æ–¹æ–‡æ¡£ä¹‹åæ‰å¾—çŸ¥æ˜¯php5.4çš„æ–°ç‰¹æ€§,ç”¨æ¥è§£å†³åœ¨ä¸åŒç»“æ„(æ¨¡å—)ä¸‹ä»£ç å¤ç”¨çš„é—®é¢˜.å…·ä½“å¯ä»¥æŸ¥çœ‹phpæ‰‹å†Œæ‰‹å†Œçš„ä»‹ç»ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†çŒ®ç»™é‚£äº›ä¸å–œæ¬¢çœ‹æ–‡æ¡£ï¼Œå–œæ¬¢ç›´æ¥ä¸Šæ‰‹ä½¿ç”¨çš„ç«¥é‹. é¦–å…ˆä»‹ç»ä¸€ä¸‹æˆ‘çš„é¡¹ç›®ç»“æ„ æˆ‘åœ¨Commonæ¨¡å—ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶traits å‘½åç©ºé—´ä¸º common/traitsã€‚ ç°åœ¨æœ‰å¤šä¸ªæ¨¡å—éœ€è¦ä½¿ç”¨ç›¸åŒçš„ä»£ç ï¼Œé‚£ä¹ˆå°±åœ¨traitsä¸‹æ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨,å†™å…¥å…¬ç”¨çš„ä»£ç ","text":"å…³äºtraitä¹‹å‰å¯ä»¥è¯´æ˜¯å®Œå…¨æ²¡æœ‰äº†è§£è¿‡ï¼Œçœ‹äº†å®˜æ–¹æ–‡æ¡£ä¹‹åæ‰å¾—çŸ¥æ˜¯php5.4çš„æ–°ç‰¹æ€§,ç”¨æ¥è§£å†³åœ¨ä¸åŒç»“æ„(æ¨¡å—)ä¸‹ä»£ç å¤ç”¨çš„é—®é¢˜.å…·ä½“å¯ä»¥æŸ¥çœ‹phpæ‰‹å†Œæ‰‹å†Œçš„ä»‹ç»ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†çŒ®ç»™é‚£äº›ä¸å–œæ¬¢çœ‹æ–‡æ¡£ï¼Œå–œæ¬¢ç›´æ¥ä¸Šæ‰‹ä½¿ç”¨çš„ç«¥é‹. é¦–å…ˆä»‹ç»ä¸€ä¸‹æˆ‘çš„é¡¹ç›®ç»“æ„ æˆ‘åœ¨Commonæ¨¡å—ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶traits å‘½åç©ºé—´ä¸º common/traitsã€‚ ç°åœ¨æœ‰å¤šä¸ªæ¨¡å—éœ€è¦ä½¿ç”¨ç›¸åŒçš„ä»£ç ï¼Œé‚£ä¹ˆå°±åœ¨traitsä¸‹æ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨,å†™å…¥å…¬ç”¨çš„ä»£ç common/traits/ShopGoods.php123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpnamespace \\common\\traits;trait ShopGoods&#123; use \\app\\common\\traits\\ShopCommon;//è¿™é‡Œæ˜¯å¼•ç”¨äº†å…¶ä»–çš„å…¬å…±æ–¹æ³• //å•†å“æ•°æ® private function goodsList($company_id,$hotel_id = NULL) &#123; $post = input(); $post['company_id'] = $company_id; $post['hotel_id'] = $hotel_id; $post['my'] = isset($post['my'])??false; $goods = new ShopGoodsM(); $model = $goods-&gt;alias('goods') -&gt;leftJoin('shop_goods_category gcat','goods.id=gcat.goods_id') -&gt;leftJoin('shop_category cat','gcat.category_id=cat.category_id') -&gt;where('cat.deletetime',NULL); if($post['my'])&#123; $model-&gt;withSearch(['company_id','hotel_id'],$post); &#125;else&#123; $model-&gt;withSearch(['company_id'],$post); &#125; $model-&gt;group('goods.id'); $list = $model-&gt;field(\"GROUP_CONCAT(DISTINCT(cat.name)) as category_name,goods.*\") -&gt;select(); //æŸ¥è¯¢skuå±æ€§ foreach ($list as $key =&gt; $value) &#123; $list[$key]['sku'] = $goods-&gt;skus()-&gt;where('goods_id',$value['id'])-&gt;field('sku,price,stock,score')-&gt;select(); &#125; $total = $model-&gt;count(); return new Json([ 'code' =&gt; 0, 'message' =&gt; 'success', 'data' =&gt; $list, 'total' =&gt; $total ]); &#125;&#125;?&gt;é‚£ä¸Šè¾¹è¿™å—ä»£ç ç°åœ¨æœ‰Companyå’ŒHotelä¸¤ä¸ªæ¨¡å—è¦ä½¿ç”¨:company/index.php123456789101112&lt;?phpnamespace company\\controller;class ShopGoods&#123; use \\common\\traits\\ShopGoods;//å¼•å…¥å…¬å…±çš„traitsæ–‡ä»¶ //å•†å“æ•°æ® public function getGoods() &#123; return $this-&gt;goodsList(helper::getCompanyIdInCompany()); &#125;&#125;?&gt;è¿™æ ·çš„è¯Companyå’ŒHotelæ¨¡å—ä¸‹åªæœ‰å†™è¿™ä¸¤è¡Œä»£ç å°±å¤Ÿäº†ã€‚ çœ‹åˆ°è¿™é‡Œå…¶å®å¾ˆå¤šäººä¼šæœ‰ç–‘é—®ï¼Œè¯´:è¿™ä¸å’Œæ™®é€šçš„ä»£ç å…¬ç”¨æ˜¯ä¸€ä¸ªç±»å‹å—ï¼Ÿä¸ä¸ä¸ï¼ä»–ä»¬ä¸ä¸€æ ·ï¼Œä¾‹å¦‚å¾ˆå¤šæ¨¡å—ä¸‹çš„å‚æ•°æ˜¯æ— æ³•å…¬ç”¨çš„,companyä¸‹çš„company_idåœ¨hotelæ¨¡å—ä¸‹æ˜¯æ— æ³•è°ƒç”¨çš„,ä½†å¼•å…¥traitæ–¹æ³•ä¹‹åï¼Œä½ å°±å¯ä»¥åœ¨ä¸åŒçš„æ¨¡å—ä¸‹åšå‚æ•°å¤„ç†,traitæ–¹æ³•æ—¢å¯ä»¥é€šè¿‡é»˜è®¤å‚æ•°çš„å½¢å¼ä¼ é€’ä¹Ÿå¯ä»¥æ¥æ”¶postã€getç­‰æ–¹æ³•çš„ä¼ é€’ã€‚å®‰å…¨æ–¹é¢ï¼štraitæ–¹æ³•ä¸å¯ç›´æ¥é€šè¿‡æ¥å£è®¿é—®ã€ç›¸æ¯”ç”¨å…¬ç”¨çš„commonæ–¹æ³•åšè®¿é—®å¤„ç†çœäº‹äº†å¾ˆå¤šï¼","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"jsä¸€æ¬¡æäº¤å´å‘èµ·å¤šæ¬¡è¯·æ±‚","slug":"jsä¸€æ¬¡æäº¤å´å‘èµ·å¤šæ¬¡è¯·æ±‚","date":"2019-01-21T02:25:46.000Z","updated":"2021-09-03T05:56:57.929Z","comments":true,"path":"jsä¸€æ¬¡æäº¤å´å‘èµ·å¤šæ¬¡è¯·æ±‚/","link":"","permalink":"http://www.daichongweb.com/jsä¸€æ¬¡æäº¤å´å‘èµ·å¤šæ¬¡è¯·æ±‚/","excerpt":"æœ€è¿‘åšå‰ç«¯çš„å·¥ä½œæ¯”è¾ƒå¤š,ç»å¸¸ä¼šé‡åˆ°ä¸€äº›è‡ªå·±ä¸å¤ªæ˜ç™½çš„é—®é¢˜ï¼Œéå¸¸çš„æ‡µé€¼ã€‚æ¯”å¦‚åšä¸€ä¸ªç®€å•çš„ajaxå¼‚æ­¥æäº¤ä¼šå‡ºç°ä¸¤æ¬¡è¯·æ±‚çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æœ€è¿‘é‡è§æ¯”è¾ƒå¥‡æ€ªçš„é—®é¢˜ã€‚ ç»è¿‡æ’æŸ¥ä¹‹åå‘ç°ä¸¤æ¬¡å‡ºç°ä¸¤æ¬¡è¯·æ±‚çš„åŸå› å¯èƒ½æ˜¯ï¼š1.å¼•å…¥äº†ä¸¤ä¸ªåŒæ ·çš„js,æ¯”å¦‚å¼•å…¥äº†ä¸¤ä¸ªåŒæ ·çš„jqueryæ’ä»¶","text":"æœ€è¿‘åšå‰ç«¯çš„å·¥ä½œæ¯”è¾ƒå¤š,ç»å¸¸ä¼šé‡åˆ°ä¸€äº›è‡ªå·±ä¸å¤ªæ˜ç™½çš„é—®é¢˜ï¼Œéå¸¸çš„æ‡µé€¼ã€‚æ¯”å¦‚åšä¸€ä¸ªç®€å•çš„ajaxå¼‚æ­¥æäº¤ä¼šå‡ºç°ä¸¤æ¬¡è¯·æ±‚çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æœ€è¿‘é‡è§æ¯”è¾ƒå¥‡æ€ªçš„é—®é¢˜ã€‚ ç»è¿‡æ’æŸ¥ä¹‹åå‘ç°ä¸¤æ¬¡å‡ºç°ä¸¤æ¬¡è¯·æ±‚çš„åŸå› å¯èƒ½æ˜¯ï¼š1.å¼•å…¥äº†ä¸¤ä¸ªåŒæ ·çš„js,æ¯”å¦‚å¼•å…¥äº†ä¸¤ä¸ªåŒæ ·çš„jqueryæ’ä»¶ 2.é¡µé¢å­˜åœ¨formè¡¨å•ï¼Œç‚¹å‡»æäº¤æŒ‰é’®ä¹‹ååˆæ‰§è¡Œäº†form.submit(),è¿™ä¸ªformæœ¬èº«å°±ä¼šæäº¤ä¸€æ¬¡ã€‚ 3.è·¨åŸŸè¯·æ±‚ï¼Œè¿™ä¸ªé—®é¢˜å°±æ¯”è¾ƒæ·±å…¥ä¸€ç‚¹äº†ï¼Œjsè·¨åŸŸçš„æ—¶å€™æœ¬èº«ä¼šå‘é€ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡æ˜¯é¢„æŸ¥è¯·æ±‚(option)ï¼Œæ˜¯ä¸ºäº†æŸ¥è¯¢æ˜¯å¦æ”¯æŒè·¨åŸŸï¼Œç¬¬äºŒæ¬¡æ‰æ˜¯çœŸæ­£çš„æ•°æ®è¯·æ±‚ã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆåç«¯è¦æœ‰å…è®¸è·¨åŸŸè¯·æ±‚çš„å¤„ç†ï¼Œå‰ç«¯çš„headerè¦åŠ å…¥application/x-www-form-urlencoded, multipart/form-data æˆ– text/plainä¸­çš„ä¸€ç§ï¼Œå°±å¯ä»¥è§£å†³äº†ã€‚ åç«¯è·¨åŸŸå¤„ç†123header('Access-Control-Allow-Origin: *');header(\"Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept\");header('Access-Control-Allow-Methods: GET, POST, PUT');","categories":[],"tags":[{"name":"js","slug":"js","permalink":"http://www.daichongweb.com/tags/js/"}]},{"title":"å°ç¨‹åºæœåŠ¡å•†æ”¯ä»˜","slug":"å°ç¨‹åºæœåŠ¡å•†æ”¯ä»˜","date":"2018-11-13T07:59:14.000Z","updated":"2021-09-03T05:56:57.976Z","comments":true,"path":"å°ç¨‹åºæœåŠ¡å•†æ”¯ä»˜/","link":"","permalink":"http://www.daichongweb.com/å°ç¨‹åºæœåŠ¡å•†æ”¯ä»˜/","excerpt":"å»ºè®®æŒ‰ç…§æ¥å£æ–‡æ¡£è¿›è¡Œå¼€å‘,ä¸è¦ç›´æ¥ä½¿ç”¨sdkä¸‹é¢è´´ä¸Šä»£ç ä¸ºå¤§å®¶ä¸€ä¸€ä»‹ç»æ–‡æ¡£å’ŒçœŸå®æƒ…å†µçš„å·®è·:","text":"å»ºè®®æŒ‰ç…§æ¥å£æ–‡æ¡£è¿›è¡Œå¼€å‘,ä¸è¦ç›´æ¥ä½¿ç”¨sdkä¸‹é¢è´´ä¸Šä»£ç ä¸ºå¤§å®¶ä¸€ä¸€ä»‹ç»æ–‡æ¡£å’ŒçœŸå®æƒ…å†µçš„å·®è·:123456789101112131415161718192021222324252627282930313233343536373839require './common/payConfig.php';$key = $payConfig['key'];$orderData = array( \"appid\" =&gt; $payConfig['appid'], 'mch_id' =&gt; $payConfig['mchid'], 'sub_appid' =&gt; $payConfig['sub_appid'], 'sub_mch_id' =&gt; $mchid, 'body' =&gt; $body, 'attach' =&gt; $attach, 'out_trade_no' =&gt; $order_id, 'total_fee' =&gt; $total_price, 'spbill_create_ip' =&gt; $_SERVER['REMOTE_ADDR'], 'notify_url' =&gt; 'daichongweb.com', 'trade_type' =&gt; 'JSAPI', // 'openid' =&gt; $UnionID, è¿™ä¸ªæ˜¯ä¸éœ€è¦çš„ 'goods_tag' =&gt; 'daichong', 'nonce_str' =&gt; $this-&gt;getNonceStr(), 'sub_openid' =&gt; $mini_openid);ksort($orderData);reset($orderData);$buff = \"\";foreach ($orderData as $k =&gt; $v)&#123; if($k != \"sign\" &amp;&amp; $v != \"\" &amp;&amp; !is_array($v))&#123; $buff .= ($k . \"=\" . $v . \"&amp;\"); &#125;&#125;$buff = trim($buff, \"&amp;\");$buff = $buff.'&amp;key='.$key;$signA = strtoupper(MD5($buff));$orderData['sign'] = $signA;$xml = $this-&gt;arrayToXml($orderData);$url = \"https://api.mch.weixin.qq.com/pay/unifiedorder\"; $result = $this-&gt;https_post($url,$xml);$payArray = (array)simplexml_load_string($result, 'SimpleXMLElement', LIBXML_NOCDATA);åœ¨ä»£ç ä¸Šçš„å·®è·å…¶å®åªæœ‰ä¸€ä¸ªopenid,ä½†æ˜¯ä»–è¿˜æ˜¯ä¼šæŠ¥é”™appidå’Œsub_mch_idä¸åŒ¹é…,è§£å†³è¿™ä¸ªé—®é¢˜çš„å‰æå°ç¨‹åºå’Œå…¬ä¼—å·çš„ä¸»ä½“å¿…é¡»ä¸€è‡´,ä¹Ÿå°±æ˜¯å°ç¨‹åºå’Œå¾®ä¿¡å…¬ä¼—å·å¿…é¡»åœ¨åŒä¸€ä¸ªæœåŠ¡å•†ä¸Šç»‘å®šã€‚ç»‘å®šæ–¹å¼æ˜¯åœ¨æœåŠ¡å•†æˆ·é‡Œæ‰¾åˆ°â€™æœåŠ¡å•†åŠŸèƒ½â€˜-&gt;â€™ç‰¹çº¦å•†æˆ·ç®¡ç†â€˜æ‰¾åˆ°å¯¹åº”å•†æˆ·ç‚¹å‡»é…ç½®ç¬¬ä¸€æ­¥ï¼š ç¬¬äºŒæ­¥ï¼š æ·»åŠ å¥½ä¹‹åå°±å¯ä»¥æµ‹è¯•æ”¯ä»˜äº†ï¼ŒæŠŠæ”¯ä»˜å‚æ•°è¿”å›ç»™å‰ç«¯ï¼Œå•Šå°±å®Œäº‹äº†!","categories":[],"tags":[{"name":"å°ç¨‹åºæ”¯ä»˜","slug":"å°ç¨‹åºæ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å°ç¨‹åºæ”¯ä»˜/"}]},{"title":"è°·æ­Œæµè§ˆå™¨Flashæ²¡æœ‰æ·»åŠ æŒ‰é”®","slug":"è°·æ­Œæµè§ˆå™¨Flashæ²¡æœ‰æ·»åŠ æŒ‰é”®","date":"2018-09-14T08:22:12.000Z","updated":"2021-09-03T05:56:57.988Z","comments":true,"path":"è°·æ­Œæµè§ˆå™¨Flashæ²¡æœ‰æ·»åŠ æŒ‰é”®/","link":"","permalink":"http://www.daichongweb.com/è°·æ­Œæµè§ˆå™¨Flashæ²¡æœ‰æ·»åŠ æŒ‰é”®/","excerpt":"å…³äºè°·æ­Œæµè§ˆå™¨ä¸èƒ½ä½¿ç”¨Flashçš„é—®é¢˜å¤§å®¶è‚¯å®šé‡åˆ°è¿‡ï¼Œåªè¦åœ¨è®¾ç½®-ã€‹é«˜çº§-ã€‹å†…å®¹ç®¡ç†-ã€‹Flashé‡Œæ·»åŠ ç½‘ç«™å°±å¯ä»¥äº†ä»Šå¤©æˆ‘æ›´æ–°äº†ä¸€ä¸‹æµè§ˆå™¨ï¼Œå‡çº§åˆ°äº†æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå‘ç°Flashåˆä½¿ç”¨ä¸äº†ã€‚æŒ‰ç…§ä»¥å¾€çš„æµç¨‹å»æ·»åŠ å±…ç„¶å‘ç°æ²¡æœ‰å±…ç„¶æ²¡æœ‰æ·»åŠ æŒ‰é’®","text":"å…³äºè°·æ­Œæµè§ˆå™¨ä¸èƒ½ä½¿ç”¨Flashçš„é—®é¢˜å¤§å®¶è‚¯å®šé‡åˆ°è¿‡ï¼Œåªè¦åœ¨è®¾ç½®-ã€‹é«˜çº§-ã€‹å†…å®¹ç®¡ç†-ã€‹Flashé‡Œæ·»åŠ ç½‘ç«™å°±å¯ä»¥äº†ä»Šå¤©æˆ‘æ›´æ–°äº†ä¸€ä¸‹æµè§ˆå™¨ï¼Œå‡çº§åˆ°äº†æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå‘ç°Flashåˆä½¿ç”¨ä¸äº†ã€‚æŒ‰ç…§ä»¥å¾€çš„æµç¨‹å»æ·»åŠ å±…ç„¶å‘ç°æ²¡æœ‰å±…ç„¶æ²¡æœ‰æ·»åŠ æŒ‰é’®ç„¶åå°±æ˜¯é•¿è¾¾1ä¸ªå¤šå°æ—¶çš„ç™¾åº¦ï¼Œè¯•äº†æ— æ•°çš„æ–¹æ³•éƒ½æ²¡æœ‰è§£å†³ï¼Œæœ€åé™ä¸‹æ¥æ€è€ƒä¹‹åæ‰æœ‰äº†å¤´ç»ªã€‚é‚£ä¹ˆæœ€ç»ˆçš„è§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼šåœ¨æµè§ˆå™¨è¾“å…¥1chrome://flags/#run-all-flash-in-allow-modeæœç´¢ï¼šæœç´¢1Enable Ephemeral Flash Permissionsä¿®æ”¹çŠ¶æ€ä¸ºDisabledç„¶åä¸‹é¢ä¼šå¼¹å‡ºä¸€ä¸ªæ¡†ï¼Œç‚¹å‡»ä¸€ä¸‹æŒ‰é’®å°±å¯ä»¥äº†ï¼","categories":[],"tags":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://www.daichongweb.com/tags/æµè§ˆå™¨/"}]},{"title":"phpæ ¹æ®äºŒä½æ•°æ®ä¸­çš„æŸä¸ªé”®å€¼æ’åº","slug":"phpæ ¹æ®äºŒä½æ•°æ®ä¸­çš„æŸä¸ªé”®å€¼æ’åº","date":"2018-09-11T08:57:41.000Z","updated":"2021-09-03T05:56:57.960Z","comments":true,"path":"phpæ ¹æ®äºŒä½æ•°æ®ä¸­çš„æŸä¸ªé”®å€¼æ’åº/","link":"","permalink":"http://www.daichongweb.com/phpæ ¹æ®äºŒä½æ•°æ®ä¸­çš„æŸä¸ªé”®å€¼æ’åº/","excerpt":"ä¸‹é¢å…ˆä¸ºå¤§å®¶ä»‹ç»ä¸¤ä¸ªphpå‡½æ•°ï¼šarray_column():è¿”å›è¾“å…¥æ•°ç»„ä¸­æŸä¸ªå•ä¸€åˆ—çš„å€¼ã€‚å°ä¾‹å­ï¼š array_columnçš„ç”¨æ³•123456789101112131415161718$a = array( array( 'id' =&gt; 5698, 'first_name' =&gt; 'daichong', 'last_name' =&gt; 'css', ), array( 'id' =&gt; 4767, 'first_name' =&gt; 'dc', 'last_name' =&gt; 'js', ), array( 'id' =&gt; 3809, 'first_name' =&gt; 'DC', 'last_name' =&gt; 'web', ));$lastNames = array_column($a,'first_name')","text":"ä¸‹é¢å…ˆä¸ºå¤§å®¶ä»‹ç»ä¸¤ä¸ªphpå‡½æ•°ï¼šarray_column():è¿”å›è¾“å…¥æ•°ç»„ä¸­æŸä¸ªå•ä¸€åˆ—çš„å€¼ã€‚å°ä¾‹å­ï¼š array_columnçš„ç”¨æ³•123456789101112131415161718$a = array( array( 'id' =&gt; 5698, 'first_name' =&gt; 'daichong', 'last_name' =&gt; 'css', ), array( 'id' =&gt; 4767, 'first_name' =&gt; 'dc', 'last_name' =&gt; 'js', ), array( 'id' =&gt; 3809, 'first_name' =&gt; 'DC', 'last_name' =&gt; 'web', ));$lastNames = array_column($a,'first_name')æ‰“å°ç»“æœ123456Array( [0] =&gt; daichong [1] =&gt; dc [2] =&gt; DC) array_multisort():è¿”å›æŒ‡å®šæ’åºåçš„æ•°ç»„ã€‚å‡½æ•°è¿”å›æ’åºæ•°ç»„ã€‚æ‚¨å¯ä»¥è¾“å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚å‡½æ•°å…ˆå¯¹ç¬¬ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ’åºï¼Œæ¥ç€æ˜¯å…¶ä»–æ•°ç»„ï¼Œå¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ªå€¼ç›¸åŒï¼Œå®ƒå°†å¯¹ä¸‹ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚æ³¨é‡Šï¼šå­—ç¬¦ä¸²é”®åå°†è¢«ä¿ç•™ï¼Œä½†æ˜¯æ•°å­—é”®åå°†è¢«é‡æ–°ç´¢å¼•ï¼Œä» 0 å¼€å§‹ï¼Œå¹¶ä»¥ 1 é€’å¢ã€‚æ³¨é‡Šï¼šæ‚¨å¯ä»¥åœ¨æ¯ä¸ªæ•°ç»„åè®¾ç½®æ’åºé¡ºåºå’Œæ’åºç±»å‹å‚æ•°ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ¯ä¸ªæ•°ç»„å‚æ•°ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚å®è·µï¼š ä»£ç 123456789101112131415161718$arr=array( 0=&gt;array( 'run_date'=&gt;3, 'count'=&gt;'5' ), 1=&gt;array( 'run_date'=&gt;2, 'count'=&gt;'10' ), 2=&gt;array( 'run_date'=&gt;1, 'count'=&gt;'10' ) );$date = array_column($arr, 'run_date');array_multisort($date,SORT_ASC,$arr);echo \"&lt;pre&gt;\";print_r($arr); ç»“æœï¼š æ‰“å°ç»“æœ123456789101112131415161718192021Array( [0] =&gt; Array ( [run_date] =&gt; 1 [count] =&gt; 10 ) [1] =&gt; Array ( [run_date] =&gt; 2 [count] =&gt; 10 ) [2] =&gt; Array ( [run_date] =&gt; 3 [count] =&gt; 5 )) æ˜¯ä¸æ˜¯æ ¹æ®æŒ‡å®šçš„é”®å€¼è¿›è¡Œæ’åºäº†å‘¢ï¼Ÿ","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"webç«¯å­˜å‚¨æ•°æ®(cookie,storage)é€‰æ‹©å’Œä½¿ç”¨","slug":"webç«¯å­˜å‚¨æ•°æ®-cookie-storage-é€‰æ‹©å’Œä½¿ç”¨","date":"2018-08-17T07:49:37.000Z","updated":"2021-09-03T05:56:57.975Z","comments":true,"path":"webç«¯å­˜å‚¨æ•°æ®-cookie-storage-é€‰æ‹©å’Œä½¿ç”¨/","link":"","permalink":"http://www.daichongweb.com/webç«¯å­˜å‚¨æ•°æ®-cookie-storage-é€‰æ‹©å’Œä½¿ç”¨/","excerpt":"å…³äºå‰ç«¯å­˜å‚¨çš„æ–¹æ³•ç”¨å¾ˆå¤šï¼Œæœ€ä¸ºå¸¸è§çš„æ˜¯cookieå’ŒlocationStorageã€‚ å…¶ä¸­cookieçš„é™åˆ¶æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚å¿…é¡»éœ€è¦cookie.jsã€æµè§ˆå™¨å¯¹cookieçš„æ•°é‡é™åˆ¶(ä¹‹å‰çš„æµè§ˆå™¨æ¯ä¸ªåŸŸåé™åˆ¶cookieä¹‹æ¶èƒ½å­˜å‚¨50ä¸ª)ï¼Œæ•°æ®é•¿åº¦çš„é™åˆ¶(å¤§éƒ¨åˆ†æµè§ˆå™¨æ˜¯4085å­—èŠ‚å·¦å³,ä½†å®é™…æ›´å°)ã€‚ locationstorageèƒ½å­˜å‚¨4-5Må¤§å°çš„æ•°æ®ï¼Œæœ‰æ•ˆæœŸæœªæ°¸ä¹…ã€‚ application cache æ˜¯ç¦»çº¿ç¼“å­˜ï¼Œå­˜å‚¨å¤§å°ä¹Ÿæ˜¯5Må·¦å³,ä»–ä¸å…¶ä»–ä¸¤ç§æ–¹å¼çš„ä¸åŒåœ¨ä¸æµè§ˆå™¨ç¼“å­˜æ˜¯å¯¹å•ä¸ªæ–‡ä»¶ï¼Œè€Œapplocation cacheæ˜¯å¯¹æ•´ä¸ªåº”ç”¨ï¼Œå½“æ•´ä¸ªåº”ç”¨éƒ½ç¼“å­˜ä¸‹æ¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ°æ— ç½‘ç»œè¿æ¥ã€‚ ä»Šå¤©æˆ‘è¦å†™çš„æ˜¯locationstorageçš„sessionStorageï¼Œä»–ä»¬çš„ç”¨æ³•å®Œå…¨ç›¸åŒï¼Œå¾ˆç®€å•ï¼Œä½†æ˜¯çœŸçš„å¾ˆå®ç”¨ã€‚ä»Šå¤©ä½¿ç”¨ä¹‹åæˆ‘è§‰å¾—è¿™ä¸ªsessionStorageçœŸçš„æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚","text":"å…³äºå‰ç«¯å­˜å‚¨çš„æ–¹æ³•ç”¨å¾ˆå¤šï¼Œæœ€ä¸ºå¸¸è§çš„æ˜¯cookieå’ŒlocationStorageã€‚ å…¶ä¸­cookieçš„é™åˆ¶æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚å¿…é¡»éœ€è¦cookie.jsã€æµè§ˆå™¨å¯¹cookieçš„æ•°é‡é™åˆ¶(ä¹‹å‰çš„æµè§ˆå™¨æ¯ä¸ªåŸŸåé™åˆ¶cookieä¹‹æ¶èƒ½å­˜å‚¨50ä¸ª)ï¼Œæ•°æ®é•¿åº¦çš„é™åˆ¶(å¤§éƒ¨åˆ†æµè§ˆå™¨æ˜¯4085å­—èŠ‚å·¦å³,ä½†å®é™…æ›´å°)ã€‚ locationstorageèƒ½å­˜å‚¨4-5Må¤§å°çš„æ•°æ®ï¼Œæœ‰æ•ˆæœŸæœªæ°¸ä¹…ã€‚ application cache æ˜¯ç¦»çº¿ç¼“å­˜ï¼Œå­˜å‚¨å¤§å°ä¹Ÿæ˜¯5Må·¦å³,ä»–ä¸å…¶ä»–ä¸¤ç§æ–¹å¼çš„ä¸åŒåœ¨ä¸æµè§ˆå™¨ç¼“å­˜æ˜¯å¯¹å•ä¸ªæ–‡ä»¶ï¼Œè€Œapplocation cacheæ˜¯å¯¹æ•´ä¸ªåº”ç”¨ï¼Œå½“æ•´ä¸ªåº”ç”¨éƒ½ç¼“å­˜ä¸‹æ¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ°æ— ç½‘ç»œè¿æ¥ã€‚ ä»Šå¤©æˆ‘è¦å†™çš„æ˜¯locationstorageçš„sessionStorageï¼Œä»–ä»¬çš„ç”¨æ³•å®Œå…¨ç›¸åŒï¼Œå¾ˆç®€å•ï¼Œä½†æ˜¯çœŸçš„å¾ˆå®ç”¨ã€‚ä»Šå¤©ä½¿ç”¨ä¹‹åæˆ‘è§‰å¾—è¿™ä¸ªsessionStorageçœŸçš„æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚æµ‹è¯•cookieå­˜å‚¨ æœ€ç»ˆå‘ç°1837çš„é•¿åº¦å­˜ä¸è¿›å»ã€‚sessionStorage çš„ä½¿ç”¨ sessionStorage1234//å­˜å‚¨sessionStorage.setItem('newList',str)//è·å–sessionStorage.getItem('newList')","categories":[],"tags":[{"name":"jquery","slug":"jquery","permalink":"http://www.daichongweb.com/tags/jquery/"}]},{"title":"phpå¾ªç¯å¤„ç†ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ï¼Ÿ","slug":"phpå¾ªç¯å¤„ç†ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ï¼Ÿ","date":"2018-08-10T02:31:13.000Z","updated":"2021-09-03T05:56:57.955Z","comments":true,"path":"phpå¾ªç¯å¤„ç†ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ï¼Ÿ/","link":"","permalink":"http://www.daichongweb.com/phpå¾ªç¯å¤„ç†ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ï¼Ÿ/","excerpt":"ä»Šå¤©æ¥å†™ä¸€ç¯‡å¦‚ä½•ä¼˜åŒ–åœ¨å¾ªç¯é‡Œçš„sqlã€‚ç›¸ä¿¡å¤§å®¶éƒ½ä¼šé‡åˆ°åœ¨foreaché‡Œå¾ªç¯æ“ä½œæ•°æ®åº“ï¼Œä¸Šå­¦çš„æ—¶å€™ä¸€å¬åˆ°å¾ªç¯æŸ¥è¡¨è¿™ç±»çš„è¯ï¼Œå“‡ï¼æ„Ÿè§‰å¾ˆé«˜ç«¯ï¼Œæ®Šä¸çŸ¥è¿™æ ·çš„æ“ä½œå¯¹æ•°æ®åº“çš„å‹åŠ›æ˜¯æ— é™å¤§çš„ã€‚åƒä¸€ä¸ªä¸‰çº§çš„åˆ†ç±»æ•°æ®æ“ä½œï¼Œå¾ˆå¤šäººä¼šé€‰æ‹©å¾ªç¯æŸ¥è¡¨ï¼Œæ¯•ç«Ÿè¿™æ ·çš„å†™æ³•æ˜¯æœ€æ–¹ä¾¿ã€æœ€ç®€å•çš„ã€‚å‰æœŸæ•°æ®é‡å°çš„æ—¶å€™æ˜¯æ²¡æœ‰å¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œåˆ°äº†ä¸€å®šç¨‹åº¦ï¼Œä½ ä¼šå‘ç°é¡µé¢åŠ è½½é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œæ•°æ®åº“çš„å‹åŠ›è¶Šæ¥è¶Šå¤§ã€‚è¿™ä¸ªæ—¶å€™ä½ å¿…é¡»è¦é€‰æ‹©ä¿®æ”¹ä½ çš„ç¨‹åºäº†ï¼ ä½†æ˜¯è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ¥ä»‹ç»å¦‚ä½•ä¼˜åŒ–å¾ªç¯æŸ¥è¯¢çš„ï¼Œæ˜¯ä»‹ç»å¦‚ä½•æ¥ä¼˜åŒ–å¾ªç¯ä¿®æ”¹è¡¨æ•°æ®çš„ã€‚","text":"ä»Šå¤©æ¥å†™ä¸€ç¯‡å¦‚ä½•ä¼˜åŒ–åœ¨å¾ªç¯é‡Œçš„sqlã€‚ç›¸ä¿¡å¤§å®¶éƒ½ä¼šé‡åˆ°åœ¨foreaché‡Œå¾ªç¯æ“ä½œæ•°æ®åº“ï¼Œä¸Šå­¦çš„æ—¶å€™ä¸€å¬åˆ°å¾ªç¯æŸ¥è¡¨è¿™ç±»çš„è¯ï¼Œå“‡ï¼æ„Ÿè§‰å¾ˆé«˜ç«¯ï¼Œæ®Šä¸çŸ¥è¿™æ ·çš„æ“ä½œå¯¹æ•°æ®åº“çš„å‹åŠ›æ˜¯æ— é™å¤§çš„ã€‚åƒä¸€ä¸ªä¸‰çº§çš„åˆ†ç±»æ•°æ®æ“ä½œï¼Œå¾ˆå¤šäººä¼šé€‰æ‹©å¾ªç¯æŸ¥è¡¨ï¼Œæ¯•ç«Ÿè¿™æ ·çš„å†™æ³•æ˜¯æœ€æ–¹ä¾¿ã€æœ€ç®€å•çš„ã€‚å‰æœŸæ•°æ®é‡å°çš„æ—¶å€™æ˜¯æ²¡æœ‰å¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œåˆ°äº†ä¸€å®šç¨‹åº¦ï¼Œä½ ä¼šå‘ç°é¡µé¢åŠ è½½é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œæ•°æ®åº“çš„å‹åŠ›è¶Šæ¥è¶Šå¤§ã€‚è¿™ä¸ªæ—¶å€™ä½ å¿…é¡»è¦é€‰æ‹©ä¿®æ”¹ä½ çš„ç¨‹åºäº†ï¼ ä½†æ˜¯è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ¥ä»‹ç»å¦‚ä½•ä¼˜åŒ–å¾ªç¯æŸ¥è¯¢çš„ï¼Œæ˜¯ä»‹ç»å¦‚ä½•æ¥ä¼˜åŒ–å¾ªç¯ä¿®æ”¹è¡¨æ•°æ®çš„ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹æˆ‘æ­£åœ¨åšçš„ä¸€äº›ä¸šåŠ¡ï¼šæ•°ç»„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960Array( [0] =&gt; Array ( [did] =&gt; 1446175 [userid] =&gt; 449310 [danhao] =&gt; W1808100219 [isno] =&gt; 2 [green_state] =&gt; R [id] =&gt; 19 [time] =&gt; 2018-08-10 11:06:30 ) [1] =&gt; Array ( [did] =&gt; 1446174 [userid] =&gt; 456791 [danhao] =&gt; W1808100218 [isno] =&gt; 2 [green_state] =&gt; R [id] =&gt; 34 [time] =&gt; 2018-08-10 11:06:30 ) [2] =&gt; Array ( [did] =&gt; 1446172 [userid] =&gt; 113637 [danhao] =&gt; W1808100217 [isno] =&gt; 2 [green_state] =&gt; R [id] =&gt; 38 [time] =&gt; 2018-08-10 11:06:30 ) [3] =&gt; Array ( [did] =&gt; 1446171 [userid] =&gt; 10884 [danhao] =&gt; W1808100216 [isno] =&gt; 2 [green_state] =&gt; R [id] =&gt; 5 [time] =&gt; 2018-08-10 11:06:30 ) [4] =&gt; Array ( [did] =&gt; 1446169 [userid] =&gt; 79165 [danhao] =&gt; W1808100214 [isno] =&gt; 2 [green_state] =&gt; R [id] =&gt; 11 [time] =&gt; 2018-08-10 11:06:30 ))code snippet è¿™ä¸ªåŠŸèƒ½çš„è¦æ±‚æ˜¯åŒæ­¥è®¢å•ï¼Œæ•°æ®å°±åƒä¸Šè¾¹å±•ç¤ºçš„ä¸€æ · green_state çš„å€¼æ˜¯ä¸å›ºå®šçš„ï¼Œå¯èƒ½æ˜¯Rä¹Ÿå¯èƒ½æ˜¯X,è¿™ä¸ªä»£è¡¨çš„æ˜¯è®¢å•çš„çŠ¶æ€ã€‚æˆ‘ç°åœ¨è¦åšçš„æ˜¯æ‹¿è¿™ä¸ªè®¢å•çŠ¶æ€å»æŠŠä»–ç›¸åº”çš„å­—æ®µå€¼æ”¹æˆè¿™ä¸ªçŠ¶æ€ã€‚ åŸå§‹å†™æ³•:å¾ªç¯ä¿®æ”¹ é€»è¾‘123foreach($order as $k=&gt;$v)&#123; Db::query(\"update order set green_state=$v['green_state'] set did=$v['did']\");&#125; è¿™æ ·çš„å†™æ³•æœ‰å¤šå°‘æ¡æ•°æ®å°±ä¼šè¯·æ±‚æ•°æ®åº“å¤šå°‘æ¬¡ï¼Œæ— ç–‘æ˜¯æœ€æ¶ˆè€—æ€§èƒ½çš„å†™æ³•ã€‚ä¼˜åŒ–å†™æ³•ï¼šé“¾æ¥sql é€»è¾‘ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768//é¢„å®šsql s$Rsql = '';$RsetIds = '';//e//å–æ¶ˆsql s$Xsql = '';$XsetIds = '';//e//I$Isql = '';$IsetIds = '';////O$Osql = '';$OsetIds = '';////N$Nsql = '';$NsetIds = '';////D$Dsql = '';$DsetIds = '';//foreach ($order_data as $k =&gt; $v) &#123; $order_data[$k]['time'] = date('Y-m-d H:i:s'); $data = json_decode($this-&gt;order_info($pms['url'],$pms['jiudian'],$pms['hotelgroupId'],$v['danhao']),true); if($data['resultCode']==0)&#123; $order_data[$k]['green_state'] = $data['guest']['sta']; &#125; //ç»„åˆsql Rç±»å‹ é¢„å®š if($order_data[$k]['green_state']=='R')&#123; $Rsql = \"set green_state='R'\"; $RsetIds .= $v['did'].','; &#125; //ç»„åˆsql Xç±»å‹ å–æ¶ˆ if($order_data[$k]['green_state']=='X')&#123; $Xsql = \"set green_state='X'\"; $XsetIds .= $v['did'].','; &#125; //ç»„åˆsql Iç±»å‹ åœ¨ä½ if($order_data[$k]['green_state']=='I')&#123; $Isql = \"set green_state='I'\"; $IsetIds .= $v['did'].','; &#125; //ç»„åˆsql Oç±»å‹ é€€æˆ¿ if($order_data[$k]['green_state']=='O')&#123; $Osql = \"set green_state='O'\"; $OsetIds .= $v['did'].','; &#125; //ç»„åˆsql Nç±»å‹ åº”åˆ°æœªåˆ° if($order_data[$k]['green_state']=='N')&#123; $Nsql = \"set green_state='N'\"; $NsetIds .= $v['did'].','; &#125; //ç»„åˆsql Dç±»å‹ åˆ é™¤ if($order_data[$k]['green_state']=='D')&#123; $Dsql = \"set green_state='D'\"; $DsetIds .= $v['did'].','; &#125;&#125;$RsetIds = trim($RsetIds,',');$XsetIds = trim($XsetIds,',');$IsetIds = trim($IsetIds,',');$OsetIds = trim($OsetIds,',');$NsetIds = trim($NsetIds,',');$DsetIds = trim($DsetIds,',');$sql = \"update order $Rsql where did in($RsetIds)\";ä»¥ä¸Šå°±æ˜¯æˆ‘æ ¹æ®éœ€æ±‚è°ƒæ•´çš„ä»£ç ï¼Œé€šè¿‡ä¸åŒè®¢å•ç±»å‹ç»„æˆä¸åŒçš„sqlï¼Œæœ€ç»ˆå®ç°6æ¡sqlå®Œæˆ6ä¸ªç±»å‹çš„ä¿®æ”¹ï¼Œå¦‚æœæ˜¯10wæ¡æ•°æ®ï¼Œé‚£ä¹ˆè¯·æ±‚æ•°æ®åº“çš„æ¬¡æ•°æ˜¯6æ¬¡ï¼Œç›¸æ¯”ä¹‹å‰çš„æ¬¡æ•°é™ä½äº†9åƒå¤šæ¬¡ï¼è¾¾åˆ°äº†ä¼˜åŒ–çš„æ•ˆæœï¼Œå½“ç„¶è¿™ä¸ªä»£ç è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ã€‚ä»¥ä¸Šä»£ç åªæ˜¯ä¸ºå¤§å®¶æä¾›æ€è·¯ï¼Œå…·ä½“ä¸šåŠ¡é€»è¾‘è¿˜è¦æ ¹æ®å®é™…æƒ…å†µè€Œå®šï¼","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"phpåšä¸€ä¸ªç®€å•çš„æ—¥å¿—åŠŸèƒ½","slug":"phpåšä¸€ä¸ªç®€å•çš„æ—¥å¿—åŠŸèƒ½","date":"2018-08-03T09:06:20.000Z","updated":"2021-09-03T05:56:57.953Z","comments":true,"path":"phpåšä¸€ä¸ªç®€å•çš„æ—¥å¿—åŠŸèƒ½/","link":"","permalink":"http://www.daichongweb.com/phpåšä¸€ä¸ªç®€å•çš„æ—¥å¿—åŠŸèƒ½/","excerpt":"ä»Šå¤©ä¸€ç›´åœ¨å’Œåˆ«çš„å…¬å¸å¯¹æ¥æ¥å£ï¼Œä¹‹å‰çš„å¯¹æ¥éƒ½æ²¡æœ‰åšæ¥å¾€æ—¥å¿—ï¼Œè¿™æ ·çš„è¯åŠŸèƒ½å‡ºäº†é—®é¢˜è¦é’ˆå¯¹æ€§çš„æ‰¾åˆ°é—®é¢˜çš„åŸå› æ¯”è¾ƒéº»çƒ¦ï¼Œé€¼ä¸å¾—å·²åªèƒ½åšä¸ªæ—¥å¿—è®°å½•ä¸€ä¸‹ã€‚è€Œä¸”ç¨‹åºè¿˜æ²¡æœ‰ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œåˆä¸æƒ³ç ”ç©¶åˆ«äººçš„ä»£ç ï¼Œæ²¡åŠæ³•åªèƒ½è‡ªå·±ç®€å•çš„åšä¸€ä¸ªå†™å…¥æ—¥å¿—çš„åŠŸèƒ½ã€‚","text":"ä»Šå¤©ä¸€ç›´åœ¨å’Œåˆ«çš„å…¬å¸å¯¹æ¥æ¥å£ï¼Œä¹‹å‰çš„å¯¹æ¥éƒ½æ²¡æœ‰åšæ¥å¾€æ—¥å¿—ï¼Œè¿™æ ·çš„è¯åŠŸèƒ½å‡ºäº†é—®é¢˜è¦é’ˆå¯¹æ€§çš„æ‰¾åˆ°é—®é¢˜çš„åŸå› æ¯”è¾ƒéº»çƒ¦ï¼Œé€¼ä¸å¾—å·²åªèƒ½åšä¸ªæ—¥å¿—è®°å½•ä¸€ä¸‹ã€‚è€Œä¸”ç¨‹åºè¿˜æ²¡æœ‰ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œåˆä¸æƒ³ç ”ç©¶åˆ«äººçš„ä»£ç ï¼Œæ²¡åŠæ³•åªèƒ½è‡ªå·±ç®€å•çš„åšä¸€ä¸ªå†™å…¥æ—¥å¿—çš„åŠŸèƒ½ã€‚å®ç°é€»è¾‘: å†™å…¥æ–‡ä»¶1234567891011121314151617181920212223242526272829/** * å†™å…¥æ—¥å¿— * * @access public * @param must $path å†™å…¥æ—¥å¿—çš„åœ°å€(./log/) * @param must $data å†™å…¥å†…å®¹ * @param optional $fileName æ–‡ä»¶åç§° * @return Number 1 æˆåŠŸ 0 å¤±è´¥ */ public static function write_log($path,$data,$fileName='error')&#123; $file_path = $path.date('Y-m-d'); //æ–‡ä»¶å¤¹ä¸å­˜åœ¨åˆ›å»ºæ–‡ä»¶å¤¹ if(!file_exists($file_path))&#123; mkdir($file_path,0777,true); &#125; //æ–‡ä»¶å®Œæ•´è·¯å¾„ $file = $path.date('Y-m-d').\"/\".$fileName.\".txt\"; //æ‰“å¼€æ–‡ä»¶ \"a+\" è¯»å†™æ–¹å¼æ‰“å¼€ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™å°è¯•åˆ›å»º $handle = fopen($file,\"a+\"); //å†™å…¥æ–‡ä»¶ $str = fwrite($handle,date('Y-m-d H:i:s').':'.json_encode($data).\"\\n\"); //å…³é—­æ–‡ä»¶ fclose($handle); if($str)&#123; return 1; &#125;else&#123; return 0; &#125; &#125;è°ƒç”¨æ–¹æ³•: è°ƒç”¨1echo Db::write_log('./log/',array(1,2,3,4,5,6,7),'greenCloudReturnMsg');æ•ˆæœï¼š","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"mysqlæ›´æ–°sqlä¼˜åŒ–","slug":"mysqlæ›´æ–°sqlä¼˜åŒ–","date":"2018-07-28T08:35:30.000Z","updated":"2021-09-03T05:56:57.934Z","comments":true,"path":"mysqlæ›´æ–°sqlä¼˜åŒ–/","link":"","permalink":"http://www.daichongweb.com/mysqlæ›´æ–°sqlä¼˜åŒ–/","excerpt":"mysql on duplicate key update å¯¹äºä¸æ˜¯å¾ˆå¸¸ç”¨çš„äººæ¥è¯´æ˜¯æ¯”è¾ƒé™Œç”Ÿçš„ã€‚é‚£ä¹ˆä»–åˆ°åº•æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹ï¼š æ¯”å¦‚åœ¨æˆ‘ä»¬åšä¸€ä¸ªç‚¹å‡»é‡çš„åŠŸèƒ½ï¼Œç¨‹åºçš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šåœ¨ç”¨æˆ·ç‚¹å‡»çš„æ—¶å€™æˆ‘ä»¬é¦–å…ˆè¦åˆ¤æ–­æ•°æ®è¡¨ä¸­å·²ç»å­˜åœ¨äº†è¿™ä¸ªäººçš„æ•°æ®ï¼Œå¦‚æœå­˜åœ¨æ—¥å¿—è¡¨å¯¹åº”çš„ç”¨æˆ·ç‚¹å‡»æ¬¡æ•°åŠ 1ï¼Œå¦‚æœä¸å­˜åœ¨æ–°å¢ä¸€æ¡æ•°æ®ã€‚ é‚£ä¹ˆæŒ‰ç…§æ­£å¸¸çš„ç¼–ç¨‹éœ€è¦æœ‰ä¸¤æ¡sql å…ˆæŸ¥è¯¢æ•°æ®è¡¨ä¸­æ˜¯å¦æœ‰ï¼Œæœ‰äº†æ‰§è¡Œä¿®æ”¹æ“ä½œï¼Œæ²¡æœ‰æ‰§è¡Œæ·»åŠ æ“ä½œã€‚ä¸€æ¡æŸ¥è¯¢ä¸€æ¡ä¿®æ”¹æˆ–æ·»åŠ ã€‚ é‚£ä¹ˆæœ‰äº†è¿™ä¸ªon duplicate key update ä¹‹åå°±å¯ä»¥æŠŠè¿™ä¸¤ä¸ªsqlç®€åŒ–ä¸ºä¸€æ¡ï¼Œå‡å°‘äº†æ•°æ®çš„æŸ¥è¯¢æ¬¡æ•°ã€é¿å…äº†æ•°æ®é‡å¤è€Œä¸”å°‘æ‰“ä¸€äº›ä»£ç ï¼Œå¯è°“æ˜¯ä¸€ä¸¾ä¸‰å¾—ï¼","text":"mysql on duplicate key update å¯¹äºä¸æ˜¯å¾ˆå¸¸ç”¨çš„äººæ¥è¯´æ˜¯æ¯”è¾ƒé™Œç”Ÿçš„ã€‚é‚£ä¹ˆä»–åˆ°åº•æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹ï¼š æ¯”å¦‚åœ¨æˆ‘ä»¬åšä¸€ä¸ªç‚¹å‡»é‡çš„åŠŸèƒ½ï¼Œç¨‹åºçš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šåœ¨ç”¨æˆ·ç‚¹å‡»çš„æ—¶å€™æˆ‘ä»¬é¦–å…ˆè¦åˆ¤æ–­æ•°æ®è¡¨ä¸­å·²ç»å­˜åœ¨äº†è¿™ä¸ªäººçš„æ•°æ®ï¼Œå¦‚æœå­˜åœ¨æ—¥å¿—è¡¨å¯¹åº”çš„ç”¨æˆ·ç‚¹å‡»æ¬¡æ•°åŠ 1ï¼Œå¦‚æœä¸å­˜åœ¨æ–°å¢ä¸€æ¡æ•°æ®ã€‚ é‚£ä¹ˆæŒ‰ç…§æ­£å¸¸çš„ç¼–ç¨‹éœ€è¦æœ‰ä¸¤æ¡sql å…ˆæŸ¥è¯¢æ•°æ®è¡¨ä¸­æ˜¯å¦æœ‰ï¼Œæœ‰äº†æ‰§è¡Œä¿®æ”¹æ“ä½œï¼Œæ²¡æœ‰æ‰§è¡Œæ·»åŠ æ“ä½œã€‚ä¸€æ¡æŸ¥è¯¢ä¸€æ¡ä¿®æ”¹æˆ–æ·»åŠ ã€‚ é‚£ä¹ˆæœ‰äº†è¿™ä¸ªon duplicate key update ä¹‹åå°±å¯ä»¥æŠŠè¿™ä¸¤ä¸ªsqlç®€åŒ–ä¸ºä¸€æ¡ï¼Œå‡å°‘äº†æ•°æ®çš„æŸ¥è¯¢æ¬¡æ•°ã€é¿å…äº†æ•°æ®é‡å¤è€Œä¸”å°‘æ‰“ä¸€äº›ä»£ç ï¼Œå¯è°“æ˜¯ä¸€ä¸¾ä¸‰å¾—ï¼sql1insert into t_my (id,click) VALUES (2,1) on DUPLICATE KEY UPDATE click=click+1;","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºå¼€å‘è·å–unionID","slug":"å¾®ä¿¡å°ç¨‹åºå¼€å‘è·å–unionID","date":"2018-07-27T07:04:42.000Z","updated":"2021-09-03T05:56:57.977Z","comments":true,"path":"å¾®ä¿¡å°ç¨‹åºå¼€å‘è·å–unionID/","link":"","permalink":"http://www.daichongweb.com/å¾®ä¿¡å°ç¨‹åºå¼€å‘è·å–unionID/","excerpt":"è¿™å‡ å¤©åœ¨åšä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°å·²ç»å®Œæˆçš„é…ç½®ï¼Œä»¥åŠæ¥å£çš„å¼€å‘ã€‚æœ€åå´å‘ç°å°ç¨‹åºçš„openidå’Œå¾®ä¿¡å…¬ä¼—å·çš„ä¸ä¸€è‡´ï¼Œå†çœ‹äº†å¾®ä¿¡æ–‡æ¡£ä¹‹åå‘ç°ï¼Œå°ç¨‹åºå’Œå¾®ä¿¡å…¬å·çš„openidéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚åªæœ‰ä¸€ä¸ªUnionIDæ˜¯é€šç”¨çš„ï¼Œåˆ°è¿™é‡Œå°±å¯ä»¥é€šè¿‡å¾®ä¿¡çš„æ¥å£getuserinfoå»è·å–äº†ã€‚ä½†æ˜¯æœ‰å¾ˆå¤šäººæ˜¯è·å–ä¸åˆ°çš„ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹æœ‰ä»€ä¹ˆæƒ…å†µæ˜¯è·å–ä¸åˆ°çš„ï¼šç¬¬ä¸€ç§æƒ…å†µï¼šå¾®ä¿¡è¯·æ±‚ç”¨æˆ·æˆæƒï¼Œç”¨æˆ·æœªåŒæ„ ç¬¬äºŒç§æƒ…å†µï¼šç”¨æˆ·æ²¡æœ‰å…³æ³¨è¿‡å°ç¨‹åºç»‘å®šçš„å…¬ä¼—å·ã€ä¹Ÿæ²¡æœ‰ç™»å½•è¿‡ ç¬¬ä¸‰ç§ï¼šåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æœªç»‘å®šå¼€å‘è€… å¦‚æœè¿™ä¸‰ç§æƒ…å†µéƒ½æ²¡æœ‰ï¼Œæ˜¯å¯ä»¥è·å–åˆ°unionIdçš„ã€‚","text":"è¿™å‡ å¤©åœ¨åšä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°å·²ç»å®Œæˆçš„é…ç½®ï¼Œä»¥åŠæ¥å£çš„å¼€å‘ã€‚æœ€åå´å‘ç°å°ç¨‹åºçš„openidå’Œå¾®ä¿¡å…¬ä¼—å·çš„ä¸ä¸€è‡´ï¼Œå†çœ‹äº†å¾®ä¿¡æ–‡æ¡£ä¹‹åå‘ç°ï¼Œå°ç¨‹åºå’Œå¾®ä¿¡å…¬å·çš„openidéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚åªæœ‰ä¸€ä¸ªUnionIDæ˜¯é€šç”¨çš„ï¼Œåˆ°è¿™é‡Œå°±å¯ä»¥é€šè¿‡å¾®ä¿¡çš„æ¥å£getuserinfoå»è·å–äº†ã€‚ä½†æ˜¯æœ‰å¾ˆå¤šäººæ˜¯è·å–ä¸åˆ°çš„ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹æœ‰ä»€ä¹ˆæƒ…å†µæ˜¯è·å–ä¸åˆ°çš„ï¼šç¬¬ä¸€ç§æƒ…å†µï¼šå¾®ä¿¡è¯·æ±‚ç”¨æˆ·æˆæƒï¼Œç”¨æˆ·æœªåŒæ„ ç¬¬äºŒç§æƒ…å†µï¼šç”¨æˆ·æ²¡æœ‰å…³æ³¨è¿‡å°ç¨‹åºç»‘å®šçš„å…¬ä¼—å·ã€ä¹Ÿæ²¡æœ‰ç™»å½•è¿‡ ç¬¬ä¸‰ç§ï¼šåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æœªç»‘å®šå¼€å‘è€… å¦‚æœè¿™ä¸‰ç§æƒ…å†µéƒ½æ²¡æœ‰ï¼Œæ˜¯å¯ä»¥è·å–åˆ°unionIdçš„ã€‚","categories":[],"tags":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡å°ç¨‹åº/"}]},{"title":"sublimeé…ç½®è‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶","slug":"sublimeé…ç½®è‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶","date":"2018-07-26T10:08:06.000Z","updated":"2021-09-03T05:56:57.965Z","comments":true,"path":"sublimeé…ç½®è‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶/","link":"","permalink":"http://www.daichongweb.com/sublimeé…ç½®è‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶/","excerpt":"æœ€è¿‘ä¸€ç›´åœ¨ä¿®æ”¹å…¬å¸è€ç³»ç»Ÿä¸Šçš„bug,å› ä¸ºè€ç³»ç»Ÿä¸Šæ²¡æœ‰å®‰è£…gitä»¥åŠå…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œæ‰€ä»¥åªèƒ½ç”¨ftpä¸Šä¼ ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯æä¸ºç—›è‹¦çš„ï¼Œè¦æƒ³ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å¿…é¡»å…ˆä¸‹è½½ï¼Œå†ä¿®æ”¹ï¼Œå†ä¸Šä¼ ã€‚æ¯æ¬¡ç‚¹æ¥ç‚¹å»ç»ˆäºæŠŠæˆ‘æçƒ¦äº†ï¼Œä»Šå¤©ä¸‹å®šå†³å¿ƒä¸€å®šè¦æä¸€ä¸ªè‡ªåŠ¨ä¸Šä¼ ã€‚ ä¹‹åå°±æ˜¯åœ¨ç™¾åº¦ä¸æ–­çš„æ‰¾èµ„æ–™ï¼Œåœ¨èåˆäº†å¤šç¯‡èµ„æ–™çš„ç²¾ååç»ˆäºæ­å»ºæˆåŠŸï¼ ä¸€æ¬¡æ¬¡çš„æµ‹è¯•åï¼Œå“ˆå“ˆå“ˆå“ˆï¼ï¼ï¼ï¼ï¼ï¼å®Œå…¨æ²¡é—®é¢˜ï¼ï¼ï¼ï¼ï¼ï¼ï¼ ä¸‹é¢ä¸ºå¤§å®¶å¥‰çŒ®å®ç°æ­¥éª¤ï¼š","text":"æœ€è¿‘ä¸€ç›´åœ¨ä¿®æ”¹å…¬å¸è€ç³»ç»Ÿä¸Šçš„bug,å› ä¸ºè€ç³»ç»Ÿä¸Šæ²¡æœ‰å®‰è£…gitä»¥åŠå…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œæ‰€ä»¥åªèƒ½ç”¨ftpä¸Šä¼ ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯æä¸ºç—›è‹¦çš„ï¼Œè¦æƒ³ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å¿…é¡»å…ˆä¸‹è½½ï¼Œå†ä¿®æ”¹ï¼Œå†ä¸Šä¼ ã€‚æ¯æ¬¡ç‚¹æ¥ç‚¹å»ç»ˆäºæŠŠæˆ‘æçƒ¦äº†ï¼Œä»Šå¤©ä¸‹å®šå†³å¿ƒä¸€å®šè¦æä¸€ä¸ªè‡ªåŠ¨ä¸Šä¼ ã€‚ ä¹‹åå°±æ˜¯åœ¨ç™¾åº¦ä¸æ–­çš„æ‰¾èµ„æ–™ï¼Œåœ¨èåˆäº†å¤šç¯‡èµ„æ–™çš„ç²¾ååç»ˆäºæ­å»ºæˆåŠŸï¼ ä¸€æ¬¡æ¬¡çš„æµ‹è¯•åï¼Œå“ˆå“ˆå“ˆå“ˆï¼ï¼ï¼ï¼ï¼ï¼å®Œå…¨æ²¡é—®é¢˜ï¼ï¼ï¼ï¼ï¼ï¼ï¼ ä¸‹é¢ä¸ºå¤§å®¶å¥‰çŒ®å®ç°æ­¥éª¤ï¼šç¬¬ä¸€æ­¥ï¼šæ‰“å¼€sublime å®‰ä½Ctrl+Shift+p ç¬¬äºŒæ­¥ï¼šè¾“å…¥sftpï¼Œå›è½¦ã€‚æ³¨æ„è¦é€‰æ‹©åå­—ä¸ºsftpçš„ï¼Œè¿™é‡Œå› ä¸ºæˆ‘å®‰è£…è¿‡äº†æ‰€ä»¥æœä¸åˆ°ï¼ ç­‰å¾…å®‰è£…å®Œæˆåè¿›è¡Œä¸‹ä¸€æ­¥ï¼ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ’ä»¶å‚æ•° ç¬¬å››æ­¥ï¼šæµ‹è¯• åˆ°è¿™é‡Œè‡ªåŠ¨ä¸Šä¼ çš„åŠŸèƒ½å°±å·²ç»å®Œæˆäº†ï¼Œå¦‚æœæœ‰é‡åˆ°é—®é¢˜è¯·åœ¨ä¸‹é¢ç•™è¨€æˆ–å‘é‚®ä»¶ï¼Œæˆ‘ä¼šå°½åŠ›å¸®ä½ è§£ç­”ï¼","categories":[],"tags":[{"name":"tool","slug":"tool","permalink":"http://www.daichongweb.com/tags/tool/"}]},{"title":"å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ä»¥åŠå¦‚ä½•å®ç°å‘é€æ¨¡æ¿æ¶ˆæ¯","slug":"å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ä»¥åŠå¦‚ä½•å®ç°å‘é€æ¨¡æ¿æ¶ˆæ¯","date":"2018-07-21T06:01:25.000Z","updated":"2021-09-03T05:56:57.977Z","comments":true,"path":"å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ä»¥åŠå¦‚ä½•å®ç°å‘é€æ¨¡æ¿æ¶ˆæ¯/","link":"","permalink":"http://www.daichongweb.com/å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ä»¥åŠå¦‚ä½•å®ç°å‘é€æ¨¡æ¿æ¶ˆæ¯/","excerpt":"æœ€è¿‘åœ¨åšä¸€ä¸ªå¾®ä¿¡ä¸Šçš„ä¼šå‘˜ç³»ç»Ÿï¼Œæ¶‰åŠåˆ°å¾®ä¿¡æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ã€‚ä»æ¥ä¸å–œæ¬¢çœ‹å¾®ä¿¡æ–‡æ¡£çš„æˆ‘é‡åˆ°äº†éå¸¸å¤šçš„å‘ï¼Œæœ€ç»ˆè¿˜æ˜¯å¡«å¹³äº†ï¼Œå¸Œæœ›å¤§å®¶å†çœ‹äº†æˆ‘è¿™ç¯‡æ–‡ç« ä¹‹åèƒ½å°‘èµ°äº›å¼¯è·¯å§ï¼ ä¸‹é¢ä¸ºå¤§å®¶è´´å‡ºä»£ç ï¼šæ”¯ä»˜å›è°ƒ12345678//è°ƒç”¨æ¨¡æ¿æ¶ˆæ¯user_pay(100,$userid,$openid,'pay_success',$integral.'å…ƒ',$balance.'å…ƒ');//å‘å¾®ä¿¡å‘é€æ”¯ä»˜æˆåŠŸ$textTpl=\"&lt;xml&gt;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;&lt;/xml&gt;\";echo $textTpl;","text":"æœ€è¿‘åœ¨åšä¸€ä¸ªå¾®ä¿¡ä¸Šçš„ä¼šå‘˜ç³»ç»Ÿï¼Œæ¶‰åŠåˆ°å¾®ä¿¡æ”¯ä»˜å›è°ƒä¸­å‘é€æ¨¡æ¿æ¶ˆæ¯çš„é—®é¢˜ã€‚ä»æ¥ä¸å–œæ¬¢çœ‹å¾®ä¿¡æ–‡æ¡£çš„æˆ‘é‡åˆ°äº†éå¸¸å¤šçš„å‘ï¼Œæœ€ç»ˆè¿˜æ˜¯å¡«å¹³äº†ï¼Œå¸Œæœ›å¤§å®¶å†çœ‹äº†æˆ‘è¿™ç¯‡æ–‡ç« ä¹‹åèƒ½å°‘èµ°äº›å¼¯è·¯å§ï¼ ä¸‹é¢ä¸ºå¤§å®¶è´´å‡ºä»£ç ï¼šæ”¯ä»˜å›è°ƒ12345678//è°ƒç”¨æ¨¡æ¿æ¶ˆæ¯user_pay(100,$userid,$openid,'pay_success',$integral.'å…ƒ',$balance.'å…ƒ');//å‘å¾®ä¿¡å‘é€æ”¯ä»˜æˆåŠŸ$textTpl=\"&lt;xml&gt;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;&lt;/xml&gt;\";echo $textTpl;æ¨¡æ¿æ¶ˆæ¯12345678910111213141516171819202122232425262728293031323334353637//è·å–access_token$access_token=access_tokens($appid,$appsecret,$mulu);//ç‚¹å‡»æ¨¡æ¿çš„è·³è½¬åœ°å€$url=$a['titleurl'].\"?action=my\";//è·å–é€šçŸ¥æ¨¡æ¿Id$mb = $mbID;//å……å€¼æˆåŠŸé€šçŸ¥if($type=='pay_success')&#123; $name = 'å……å€¼æˆåŠŸï¼'; $time = date(\"Y-m-d H:i:s\"); $remark = \"æ­å–œæ‚¨å……å€¼æˆåŠŸäº†ï¼æ‚¨å¯ä»¥å‰å¾€ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è´¦æˆ·ä½™é¢ä»¥åŠå‡çº§æ–¹å¼,æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼\"; //æ¨¡æ¿æ¶ˆæ¯ $template=array( 'touser'=&gt;$openid, 'template_id'=&gt;$mb, 'url'=&gt;$url, 'topcolor'=&gt;\"#7B68EE\", 'data'=&gt;array( 'first'=&gt;array('value'=&gt;urlencode($name),'color'=&gt;\"#ff0000\"), 'keyword1'=&gt;array('value'=&gt;urlencode($userid),'color'=&gt;'#0000FE'), 'keyword2'=&gt;array('value'=&gt;urlencode($price),'color'=&gt;'#000000'), 'keyword3'=&gt;array('value'=&gt;urlencode($balance),'color'=&gt;'#000000'), 'keyword4'=&gt;array('value'=&gt;urlencode($time),'color'=&gt;'#000000'), 'remark'=&gt;array('value'=&gt;urlencode($remark),'color'=&gt;'#008000'), ) );&#125;$json_template=json_encode($template);$url=\"https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=\".$access_token;$res=http_request($url,urldecode($json_template));$res = json_decode($res,true);if($res['errcode']==0)&#123; return 1;&#125;else&#123; return 0;&#125;å¾®ä¿¡å‘é€æ¨¡æ¿æ¶ˆæ¯æˆåŠŸä¹‹åä¼šå›è°ƒä½ é…ç½®çš„æ¶ˆæ¯åœ°å€æ³¨æ„åœ¨ä½ é…ç½®çš„æ¶ˆæ¯å›è°ƒåœ°å€çš„æ–¹æ³•ä¸­æ‰¾åˆ°å¾®ä¿¡æ‰€å›è°ƒçš„ä»£ç ä¸èƒ½ç”¨exitæˆ–dieæ¥ç»“æŸä»£ç ï¼Œæ”¯ä»˜å›è°ƒå°†æ— æ³•è¾“å‡ºæ”¯ä»˜æˆåŠŸï¼","categories":[],"tags":[{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡æ”¯ä»˜/"}]},{"title":"phpå®ç°æ•°æ®å¯¼å‡ºexcelè¡¨æ ¼","slug":"phpå®ç°æ•°æ®å¯¼å‡ºexcelè¡¨æ ¼","date":"2018-07-16T08:03:55.000Z","updated":"2021-09-03T05:56:57.955Z","comments":true,"path":"phpå®ç°æ•°æ®å¯¼å‡ºexcelè¡¨æ ¼/","link":"","permalink":"http://www.daichongweb.com/phpå®ç°æ•°æ®å¯¼å‡ºexcelè¡¨æ ¼/","excerpt":"ä»Šå¤©çš„åšå®¢å†…å®¹æ˜¯phpå®ç°å¯¼å‡ºexcel,å¤§å®¶éƒ½çŸ¥é“å®ç°phpå¯¼å‡ºexcelæœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæœ€æ–¹ä¾¿çš„æ˜¯phpexcelè¿™ä¸ªæ’ä»¶ï¼Œä½†æ˜¯åœ¨å¤„ç†æµ·é‡æ•°æ®çš„æ—¶å€™å°±ä¼šå‡ºç°éå¸¸éå¸¸ç¼“æ…¢çš„æƒ…å†µã€‚è€Œä¸”ç”¨è¿™ä¸ªæ’ä»¶è¦æ±‚çš„phpç‰ˆæœ¬æ˜¯5.6ä»¥ä¸Šï¼Œå¾ˆä¸å·§ï¼Œæˆ‘çš„phpç‰ˆæœ¬æ˜¯5.4ã€‚ç”¨ä¸äº†è¿™ä¸ªæ’ä»¶ï¼Œåªèƒ½å¦å¯»ä»–æ³•äº†ï¼ åˆšå¼€å§‹çš„ä½¿ç”¨æ˜¯ä½¿ç”¨å‰ç«¯çš„tableå¯¼å‡º,æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œä»£ç é‡å¤ªå¤§ï¼Œä¸æ–¹ä¾¿ã€‚ åæ¥åˆå°è¯•äº†å‡ ç§æ–¹æ³•ï¼Œæœ€åé€‰æ‹©äº†ä¸€ç§æœ€ç®€å•ï¼Œæœ€æœ‰æ•ˆï¼Œä»£ç é‡æœ€å°‘çš„æ–¹æ³•ï¼","text":"ä»Šå¤©çš„åšå®¢å†…å®¹æ˜¯phpå®ç°å¯¼å‡ºexcel,å¤§å®¶éƒ½çŸ¥é“å®ç°phpå¯¼å‡ºexcelæœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæœ€æ–¹ä¾¿çš„æ˜¯phpexcelè¿™ä¸ªæ’ä»¶ï¼Œä½†æ˜¯åœ¨å¤„ç†æµ·é‡æ•°æ®çš„æ—¶å€™å°±ä¼šå‡ºç°éå¸¸éå¸¸ç¼“æ…¢çš„æƒ…å†µã€‚è€Œä¸”ç”¨è¿™ä¸ªæ’ä»¶è¦æ±‚çš„phpç‰ˆæœ¬æ˜¯5.6ä»¥ä¸Šï¼Œå¾ˆä¸å·§ï¼Œæˆ‘çš„phpç‰ˆæœ¬æ˜¯5.4ã€‚ç”¨ä¸äº†è¿™ä¸ªæ’ä»¶ï¼Œåªèƒ½å¦å¯»ä»–æ³•äº†ï¼ åˆšå¼€å§‹çš„ä½¿ç”¨æ˜¯ä½¿ç”¨å‰ç«¯çš„tableå¯¼å‡º,æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œä»£ç é‡å¤ªå¤§ï¼Œä¸æ–¹ä¾¿ã€‚ åæ¥åˆå°è¯•äº†å‡ ç§æ–¹æ³•ï¼Œæœ€åé€‰æ‹©äº†ä¸€ç§æœ€ç®€å•ï¼Œæœ€æœ‰æ•ˆï¼Œä»£ç é‡æœ€å°‘çš„æ–¹æ³•ï¼ä»£ç 123456789101112131415161718&lt;?phprequire_once('./db.php');class index extends Db&#123; public function index() &#123; $data = Db::get_all(\"select userid from order\"); header(\"Content-type:application/vnd.ms-excel\");//è®¾ç½®å¯¼å‡ºæ ¼å¼ header(\"Content-Disposition:filename=å¯¼å‡º.xls\");//è®¾ç½®å¯¼å‡ºæ–‡ä»¶åç§° header(\"Cache-Control: max-age=0\");//æ•°æ®ä¸ç»è¿‡ç¼“å­˜ï¼Œæ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“ $strexport=\"Userid\\r\"; foreach ($data as $row)&#123; $strexport.= $row['userid'].\"\\r\"; &#125; $strexport = iconv('UTF-8',\"GB2312//IGNORE\",$strexport); exit($strexport); &#125;&#125;$obj = new index; è¿™æ®µä»£ç åªæ˜¯å®ç°æœ€ç®€å•çš„å¯¼å‡ºï¼Œå…·ä½“çš„ä¼˜åŒ–å°±éœ€è¦å¤§å®¶å»ç ”ç©¶äº†ï¼","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"phpè½¬ä¹‰htmlå®ä½“","slug":"phpè½¬ä¹‰htmlå®ä½“","date":"2018-07-11T09:35:45.000Z","updated":"2021-09-03T05:56:57.964Z","comments":true,"path":"phpè½¬ä¹‰htmlå®ä½“/","link":"","permalink":"http://www.daichongweb.com/phpè½¬ä¹‰htmlå®ä½“/","excerpt":"","text":"ç»å¸¸ä½¿ç”¨å„ç§ç¼–è¾‘å™¨çš„å°ä¼™ä¼´ä»¬éƒ½ä¼šé‡åˆ°ï¼Œåœ¨å¤åˆ¶ä¸€äº›å¸¦æœ‰æ ·å¼æ–‡å­—åˆ°ç¼–è¾‘å™¨ç„¶åä¿å­˜åˆ°æ•°æ®åº“é‡Œä¹‹åä¸€äº›ç‰¹æ®Šçš„ç¬¦å·è¢«è½¬ä¹‰æˆäº†htmlå®ä½“ã€‚ ä¾‹å¦‚ï¼šå¤§äºå·å’Œå°äºå·ï¼Œé€šè¿‡ç¼–è¾‘å™¨å’Œæ¡†æ¶çš„è¿‡æ»¤å’Œå¤„ç†å­˜åˆ°æ•°æ®åº“çš„æ˜¯&amp;gtå’Œ&lt; ç„¶ååœ¨å‰ç«¯æŠŠæ•°æ®è¾“å‡ºåˆ°é¡µé¢ä¸Šä¹‹åè¿˜æ˜¯æ•°æ®åº“é‡Œçš„åŸæ–‡ï¼Œå¹¶æ²¡æœ‰è½¬ä¹‰æˆæ­£å¸¸çš„ç¬¦å·ã€‚ é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°è¿™ä¸ªphpå‡½æ•°äº†ï¼š è½¬ä¹‰å‡½æ•°å®˜æ–¹æ–‡æ¡£1htmlspecialchars_decode() åœ¨æˆ‘ä½¿ç”¨ä¹‹åå‘ç°ä»–ä¸ä»…èƒ½è§£å†³è¿™äº›ç¬¦å·çš„é—®é¢˜ï¼Œå…¶ä»–htmlæ ‡ç­¾çš„é—®é¢˜åœ¨è½¬ä¹‰åä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ã€‚","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥å›è°ƒéªŒè¯è®¢å•çœŸå®æ€§","slug":"å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥å›è°ƒéªŒè¯è®¢å•çœŸå®æ€§","date":"2018-07-07T12:48:11.000Z","updated":"2021-09-03T05:56:57.977Z","comments":true,"path":"å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥å›è°ƒéªŒè¯è®¢å•çœŸå®æ€§/","link":"","permalink":"http://www.daichongweb.com/å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥å›è°ƒéªŒè¯è®¢å•çœŸå®æ€§/","excerpt":"æœ€è¿‘åœ¨åšä¸€ä¸ªå……å€¼åŠŸèƒ½ï¼Œå› ä¸ºæ˜¯å¾®ç½‘ç«™å¹¶ä¸”æ˜¯åœ¨å¾®ä¿¡å…¬ä¼—å·å†…ï¼Œæ‰€ä»¥é€‰æ‹©äº†å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ã€‚åšè¿‡å¾®ä¿¡æ”¯ä»˜çš„å°ä¼™ä¼´éƒ½çŸ¥é“å¾®ä¿¡æ”¯ä»˜çš„æ¨¡å¼åˆ†ä¸ºä¸‰ç§ï¼š ç¬¬ä¸€ç§ï¼šæ™®é€šå•†æˆ· ç¬¬äºŒç§ï¼šæœåŠ¡å•† ç¬¬ä¸‰ç§ï¼šé“¶è¡ŒæœåŠ¡ ä¸‰ç§æ”¯ä»˜æ¨¡å¼æœ‰å¾ˆæ˜æ˜¾çš„ä¸åŒï¼Œç¬¬ä¸€ç§å°±æ˜¯æœ€å¸¸è§çš„æ™®é€šå¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼Œæ”¯ä»˜éœ€è¦å¾®ä¿¡å…¬ä¼—å·çš„appid appkey mc_id mc_key å››ä¸ªæ”¯ä»˜å‚æ•°ã€‚è€Œè¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å±äºå•ç‹¬çš„å¾®ä¿¡æ”¯ä»˜å‚æ•°ã€‚","text":"æœ€è¿‘åœ¨åšä¸€ä¸ªå……å€¼åŠŸèƒ½ï¼Œå› ä¸ºæ˜¯å¾®ç½‘ç«™å¹¶ä¸”æ˜¯åœ¨å¾®ä¿¡å…¬ä¼—å·å†…ï¼Œæ‰€ä»¥é€‰æ‹©äº†å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ã€‚åšè¿‡å¾®ä¿¡æ”¯ä»˜çš„å°ä¼™ä¼´éƒ½çŸ¥é“å¾®ä¿¡æ”¯ä»˜çš„æ¨¡å¼åˆ†ä¸ºä¸‰ç§ï¼š ç¬¬ä¸€ç§ï¼šæ™®é€šå•†æˆ· ç¬¬äºŒç§ï¼šæœåŠ¡å•† ç¬¬ä¸‰ç§ï¼šé“¶è¡ŒæœåŠ¡ ä¸‰ç§æ”¯ä»˜æ¨¡å¼æœ‰å¾ˆæ˜æ˜¾çš„ä¸åŒï¼Œç¬¬ä¸€ç§å°±æ˜¯æœ€å¸¸è§çš„æ™®é€šå¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼Œæ”¯ä»˜éœ€è¦å¾®ä¿¡å…¬ä¼—å·çš„appid appkey mc_id mc_key å››ä¸ªæ”¯ä»˜å‚æ•°ã€‚è€Œè¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å±äºå•ç‹¬çš„å¾®ä¿¡æ”¯ä»˜å‚æ•°ã€‚ç¬¬äºŒç§æ˜¯æœåŠ¡å•†æ¨¡å¼ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ªæœåŠ¡å•†çš„æ”¯ä»˜å¹³å°ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæœåŠ¡å•†æ”¯ä»˜å¹³å°ç”³è¯·å­å•†æˆ·å¹³å°ã€‚é‚£ä¹ˆæ”¯ä»˜çš„æ—¶å€™åŒæ ·çš„å››ä¸ªæ”¯ä»˜å‚æ•°å°±è¦ä»æœåŠ¡å•†å’Œå­å•†æˆ·è·å¾—äº†ï¼Œå¹¶ä¸æ˜¯å•ç‹¬çš„ä¸€ä¸ªå…¬ä¼—å·é‡Œçš„å‚æ•°ã€‚å…·ä½“å¤§å®¶å¯ä»¥çœ‹å¾®ä¿¡çš„æ–‡æ¡£ã€‚ ç¬¬ä¸‰ç§æš‚æ—¶æ²¡åšè¿‡ã€‚ å‘¨æ‰€ä¼—çŸ¥å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥å›è°ƒéªŒè¯è®¢å•çœŸå®æ€§æ˜¯éå¸¸é‡è¦çš„ï¼Œå¦‚æœä¸åšéªŒè¯ï¼Œåœ¨æœ‰äººçŸ¥é“ä½ çš„å¾®ä¿¡æ”¯ä»˜å›è°ƒåœ°å€åå°±èƒ½ç›´æ¥è¯·æ±‚ä½ çš„æ”¯ä»˜å›è°ƒåœ°å€ï¼Œæ¨¡ä»¿å¾®ä¿¡æ”¯ä»˜å›è°ƒè¾¾åˆ°ä¸æ”¯ä»˜é‡‘é¢å°±èƒ½å……å€¼ã€è´­ä¹°å•†å“ç­‰æ“ä½œï¼æ‰€ä»¥éªŒè¯è®¢å•çš„çœŸå®æ€§æ˜¯æ¯ä¸ªç¨‹åºå‘˜å¿…é¡»è¦åšçš„ï¼ é‚£ä¹ˆå…·ä½“çš„éªŒè¯æ­¥éª¤æœ‰å“ªäº›å‘¢ï¼Ÿ ç¬¬ä¸€æ­¥ï¼šæ¥æ”¶å¾®ä¿¡è¿”å›çš„å‚æ•°ã€‚ç¬¬äºŒæ­¥ï¼šå¤„ç†å‚æ•°ã€‚ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ksortæ’åºå‚æ•°ï¼ŒASCIIç ä»å°åˆ°å¤§æ’åº.ç¬¬å››æ­¥ï¼šåœ¨å‚æ•°åé¢è¿æ¥ä¸Š(å•†æˆ·ç§˜é’¥è®¾ç½®è·¯å¾„ï¼šå¾®ä¿¡å•†æˆ·å¹³å°(pay.weixin.qq.com)â€“&gt;è´¦æˆ·è®¾ç½®â€“&gt;APIå®‰å…¨â€“&gt;å¯†é’¥è®¾ç½®)ã€‚ç¬¬äº”æ­¥ï¼šåŠ å¯†ç”Ÿæˆç­¾åã€‚ç¬¬å…­æ­¥ï¼šå¯¹æ¯”åŠ å¯†åçš„ç­¾åã€‚ å…·ä½“çš„æ­¥éª¤å¯ä»¥åœ¨å¾®ä¿¡æ”¯ä»˜å¼€å‘æ–‡æ¡£ä¸­æŸ¥çœ‹è¯¦ç»†çš„ç­¾åç”Ÿæˆå’Œå¯¹æ¯”çš„æ­¥éª¤ï¼ ä¸‹é¢å°±æ˜¯æˆ‘æ ¹æ®å¾®ä¿¡æ–‡æ¡£å†™çš„ä»£ç ï¼š[ç”Ÿæˆç­¾ååŠå¯¹æ¯”] []1234567891011121314151617181920212223242526272829$postobj = $GLOBALS['HTTP_RAW_POST_DATA'];//ç¬¬ä¸€ç§æ–¹å¼$postobj = file_get_contents(\"php://input\");//ç¬¬äºŒç§æ–¹å¼$postObj = (array)simplexml_load_string($postStr, 'SimpleXMLElement', LIBXML_NOCDATA);//è½¬åŒ–xmlæ•°æ®ä¸ºæ•°ç»„ $result_code = $postObj['result_code'];//å¾®ä¿¡è¿”å›çš„å‚æ•° if($result_code==\"SUCCESS\")&#123;//å‚æ•°å€¼ä¸ºSUCCESSæ—¶è¯´æ˜æ”¯ä»˜æˆåŠŸ $total_fee = $postObj['total_fee']; //ç­¾åç®—æ³• Start ksort($postObj);//æ’åºå‚æ•° $buff = \"\"; foreach ($postObj as $k =&gt; $v)//å¤„ç†å‚æ•°æŒ‰ç…§key=&gt;valueçš„å½¢å¼ç»„åˆæˆå­—ç¬¦ä¸² &#123; if($k != \"sign\" &amp;&amp; $v != \"\" &amp;&amp; !is_array($v))&#123;//å»æ‰å‚æ•°ä¸­çš„signï¼ˆå¾®ä¿¡è¿”å›çš„ç­¾åï¼‰ $buff .= $k . \"=\" . $v . \"&amp;\"; &#125; &#125; $buff = trim($buff, \"&amp;\");//å»é™¤æœ«å°¾çš„&amp;çš„ç¬¦å· $buff = $buff.'&amp;key=ç§˜é’¥';//è¿æ¥ä¸Šå•†æˆ·æ”¯ä»˜ç§˜é’¥ $signA = strtoupper(MD5($buff));//MD5åŠ å¯†å¹¶è½¬ä¸ºå°å†™ &#125; if($postobj['sign']==$signA &amp;&amp; $total_fee==çœŸå®çš„æ”¯ä»˜é‡‘é¢)&#123; //è®¢å•çœŸå® //é€»è¾‘å¤„ç† &#125;else&#123; //ç­¾åé”™è¯¯æˆ–æ”¯ä»˜é”™è¯¯ echo '&lt;xml&gt; &lt;return_code&gt;&lt;![CDATA[FAIL]]&gt;&lt;/return_code&gt;//successæˆåŠŸ failå¤±è´¥ &lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt; &lt;/xml&gt;';//è¿”å›å¾®ä¿¡æ¶ˆæ¯å¦åˆ™å¾®ä¿¡ä¼šä¸€ç›´è¯·æ±‚ä½ çš„å¼‚æ­¥å›è°ƒåœ°å€ &#125; æ³¨æ„ï¼šä»¥ä¸Šæ˜¯é’ˆå¯¹æœåŠ¡å•†æ”¯ä»˜çš„ç­¾åå¯¹æ¯”æ–¹æ³•ï¼Œæ™®é€šå•†æˆ·çš„æ–¹æ³•åŸºæœ¬ä¸Šå’Œè¿™ä¸ªæ˜¯ä¸€è‡´çš„ï¼ˆæ™®é€šå•†æˆ·å¯èƒ½ä¸éœ€è¦å»é™¤signï¼‰ã€‚","categories":[],"tags":[{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡æ”¯ä»˜/"}]},{"title":"php å•ä¾‹æ¨¡å¼è¿æ¥æ•°æ®åº“PDO","slug":"phpå•ä¾‹æ¨¡å¼è¿æ¥æ•°æ®åº“PDO","date":"2018-06-10T08:36:28.000Z","updated":"2021-09-03T05:56:57.954Z","comments":true,"path":"phpå•ä¾‹æ¨¡å¼è¿æ¥æ•°æ®åº“PDO/","link":"","permalink":"http://www.daichongweb.com/phpå•ä¾‹æ¨¡å¼è¿æ¥æ•°æ®åº“PDO/","excerpt":"æœ¬ç¯‡ä»‹ç»ä¸€ä¸‹phpçš„å•ä¾‹æ¨¡å¼ä»¥åŠPDOè¿æ¥æ•°æ®åº“çš„æ–¹æ³•ã€‚ è¯´åˆ°â€™å•ä¾‹æ¨¡å¼â€˜phpåŸºç¡€æ¯”è¾ƒæ‰å®çš„ç«¥é‹è‚¯å®šä¸é™Œç”Ÿï¼Œä½†åƒæœ¬äººè¿™æ ·çš„ç¨‹åºçŒ¿åŸºç¡€ä¸æ˜¯å¾ˆå¥½çš„å¯èƒ½åªæ˜¯æœ‰äº›å°è±¡è€Œå·²ã€‚ é‚£ä¹ˆâ€™å•ä¾‹æ¨¡å¼â€˜åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ä»–å…¶å®æ˜¯phpæ¡†æ¶åº•å±‚æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚â€™å·¥å‚æ¨¡å¼â€˜ã€â€™æ³¨å†Œæ ‘æ¨¡å¼â€˜ã€â€™ç­–ç•¥æ¨¡å¼â€˜ä»¥åŠâ€™è§‚å¯Ÿè€…æ¨¡å¼â€˜ç­‰ç­‰ï¼Œéƒ½æ˜¯phpå„å¤§æ¡†æ¶åº•å±‚æ¶æ„çš„æ ¸å¿ƒæ‰€åœ¨ï¼ æ‰€è°“çš„â€™å•ä¾‹æ¨¡å¼â€˜è¯´ç™½äº†å…¶å®å°±æ˜¯â€™ä¸‰ç§æœ‰ï¼Œä¸€å…¬æœ‰â€˜ã€‚ â€™ä¸‰ç§æœ‰â€˜ï¼šä¸€ä¸ªç§æœ‰å˜é‡ä½œä¸ºå®ä¾‹åŒ–å¯¹è±¡å­˜å‚¨ï¼Œä¸¤ä¸ªç§æœ‰æ–¹æ³•â€™cloneâ€˜é˜²æ­¢å…‹éš†å¯¹è±¡ä»¥åŠâ€™constructâ€˜ã€‚ â€™ä¸€å…¬æœ‰â€˜ï¼šä¸€ä¸ªå…±æœ‰çš„æ–¹æ³•ç”¨æ¥æ£€æµ‹å’Œå®ä¾‹åŒ–ç±»ã€‚","text":"æœ¬ç¯‡ä»‹ç»ä¸€ä¸‹phpçš„å•ä¾‹æ¨¡å¼ä»¥åŠPDOè¿æ¥æ•°æ®åº“çš„æ–¹æ³•ã€‚ è¯´åˆ°â€™å•ä¾‹æ¨¡å¼â€˜phpåŸºç¡€æ¯”è¾ƒæ‰å®çš„ç«¥é‹è‚¯å®šä¸é™Œç”Ÿï¼Œä½†åƒæœ¬äººè¿™æ ·çš„ç¨‹åºçŒ¿åŸºç¡€ä¸æ˜¯å¾ˆå¥½çš„å¯èƒ½åªæ˜¯æœ‰äº›å°è±¡è€Œå·²ã€‚ é‚£ä¹ˆâ€™å•ä¾‹æ¨¡å¼â€˜åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ä»–å…¶å®æ˜¯phpæ¡†æ¶åº•å±‚æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚â€™å·¥å‚æ¨¡å¼â€˜ã€â€™æ³¨å†Œæ ‘æ¨¡å¼â€˜ã€â€™ç­–ç•¥æ¨¡å¼â€˜ä»¥åŠâ€™è§‚å¯Ÿè€…æ¨¡å¼â€˜ç­‰ç­‰ï¼Œéƒ½æ˜¯phpå„å¤§æ¡†æ¶åº•å±‚æ¶æ„çš„æ ¸å¿ƒæ‰€åœ¨ï¼ æ‰€è°“çš„â€™å•ä¾‹æ¨¡å¼â€˜è¯´ç™½äº†å…¶å®å°±æ˜¯â€™ä¸‰ç§æœ‰ï¼Œä¸€å…¬æœ‰â€˜ã€‚ â€™ä¸‰ç§æœ‰â€˜ï¼šä¸€ä¸ªç§æœ‰å˜é‡ä½œä¸ºå®ä¾‹åŒ–å¯¹è±¡å­˜å‚¨ï¼Œä¸¤ä¸ªç§æœ‰æ–¹æ³•â€™cloneâ€˜é˜²æ­¢å…‹éš†å¯¹è±¡ä»¥åŠâ€™constructâ€˜ã€‚ â€™ä¸€å…¬æœ‰â€˜ï¼šä¸€ä¸ªå…±æœ‰çš„æ–¹æ³•ç”¨æ¥æ£€æµ‹å’Œå®ä¾‹åŒ–ç±»ã€‚ä¸‹é¢æ˜¯ä»£ç ï¼š[å•ä¾‹ç±»]1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;?php header(\"Content-Type: text/html;charset=utf-8\"); //å•ä¾‹class Uni&#123; //åˆ›å»ºé™æ€ç§æœ‰çš„å˜é‡ä¿å­˜è¯¥ç±»å¯¹è±¡ private static $instance; //é˜²æ­¢ç›´æ¥åˆ›å»ºå¯¹è±¡ private function __construct()&#123; &#125; //é˜²æ­¢å…‹éš†å¯¹è±¡ private function __clone()&#123; &#125; public static function getInstance()&#123; //åˆ¤æ–­$instanceæ˜¯å¦æ˜¯Uniçš„å¯¹è±¡ //æ²¡æœ‰åˆ™åˆ›å»º if (!self::$instance) &#123; //å®ä¾‹åŒ–æœ¬ç±»å¯¹è±¡ ä¼ å…¥å‚æ•°,å®ä¾‹åŒ–ç±»ä¼šæ‰§è¡Œæ„é€ å‡½æ•° self::$instance = new PDO('mysql:host=127.0.0.1;dbname=test', 'root', 'root'); &#125; return self::$instance; &#125; //æŸ¥è¯¢å¤šæ¡æ•°æ® public static function get_all($sql,$type=1)&#123; try &#123; if($type==1)&#123; //ç¼“å†²æŸ¥è¯¢ $data = self::getInstance()-&gt;query($sql)-&gt;fetchAll(PDO::FETCH_ASSOC); &#125;else&#123; //éç¼“å†²æŸ¥è¯¢ $uresult = self::getInstance()-&gt;query($sql); if ($uresult) &#123; while ($data[] = $uresult-&gt;fetch(PDO::FETCH_ASSOC)) &#123;&#125; &#125; &#125; return $data; &#125; catch (Exception $e) &#123; return 'æŸ¥è¯¢é”™è¯¯'.$e; &#125; &#125; //æŸ¥è¯¢å•æ¡æ•°æ® public static function get_one($sql)&#123; try &#123; $data = self::getInstance()-&gt;query($sql)-&gt;fetch(PDO::FETCH_ASSOC); return $data; &#125; catch (Exception $e) &#123; return 'æŸ¥è¯¢é”™è¯¯'.$e; &#125; &#125; //æŸ¥è¯¢å•ä¸ªå­—æ®µ public static function get_field($sql,$field)&#123; try &#123; $data = self::getInstance()-&gt;query($sql)-&gt;fetch(PDO::FETCH_ASSOC); return $data[$field]; &#125; catch (Exception $e) &#123; return 'æŸ¥è¯¢é”™è¯¯'.$e; &#125; &#125; &#125; çœ‹åˆ°è¿™é‡Œæœ‰çš„ç«¥é‹å¯èƒ½è¿˜ä¼šæœ‰äº›ç–‘é—®ï¼šâ€è¿™äº›ä»£ç åˆ°åº•æ˜¯èƒ½èµ·åˆ°ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿâ€œï¼Œä¸‹é¢å°±ä¸ºå¤§å®¶æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ªå•ä¾‹ç±»åˆ°åº•æ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€‚[æ¼”ç¤ºä»£ç ]12345678910public static function getInstance()&#123; //åˆ¤æ–­$instanceæ˜¯å¦æ˜¯Uniçš„å¯¹è±¡ //æ²¡æœ‰åˆ™åˆ›å»º if (!self::$instance) &#123; // è¿™é‡Œåœ¨å¾€ä¸Šçœ‹åˆ°æœ‰çš„äººæ˜¯ç”¨ instanceof self æ¥åˆ¤æ–­çš„ï¼Œå¤§åŒå°å¼‚ã€‚ echo 1; //å®ä¾‹åŒ–æœ¬ç±»å¯¹è±¡ ä¼ å…¥å‚æ•°,å®ä¾‹åŒ–ç±»ä¼šæ‰§è¡Œæ„é€ å‡½æ•° self::$instance = new PDO('mysql:host=127.0.0.1;dbname=test', 'root', 'root'); &#125; return self::$instance; &#125; æˆ‘ä»¬å†è¿æ¥æ•°æ®åº“è¿™é‡Œè¾“å‡ºä¸€ä¸ª 1ï¼Œç„¶åè°ƒç”¨ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š [è°ƒç”¨æ–¹æ³•]12Uni::getInstance();//1 æˆ‘ä»¬ä¼šå‘ç°é¡µé¢ä¸Šè¾“å‡ºäº†ä¸€ä¸ª â€™1â€˜ï¼Œè¿™æ˜¯æ²¡é—®é¢˜çš„ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å†™ä¸€ä¸ªå¾ªç¯ï¼š [å¾ªç¯è°ƒç”¨]1234for ($i=0; $i &lt;10; $i++) &#123; Uni::getInstance(); &#125;//1 åˆ°è¿™æˆ‘ä»¬ä¼šå‘ç°é¡µé¢ä¸Šè¾“å‡ºçš„è¿˜æ˜¯ä¸€ä¸ª â€™1â€˜ï¼Œè¯´æ˜æˆ‘ä»¬å¤šæ¬¡è°ƒç”¨è¿™ä¸ªç±»ï¼Œä½†åªè¿æ¥äº†ä¸€æ¬¡æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå•ä¾‹ç±»ï¼Œæˆ‘ä»¬å¯èƒ½æ¯æ¬¡çš„æŸ¥è¯¢éƒ½å»è¿æ¥æ•°æ®åº“ï¼Œè¿‡å¤šçš„è¿æ¥ä¼šå¯¼è‡´æ•°æ®åº“å´©æºƒã€‚ æ‰€ä»¥è¿™ä¸ªå•ä¾‹æ¨¡å¼è¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚ å¤§å®¶å­¦åˆ°äº†å—ï¼Ÿ","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"mysql åˆ é™¤è¡¨ä¸­é‡å¤çš„æ•°æ®","slug":"mysqlåˆ é™¤è¡¨ä¸­é‡å¤çš„æ•°æ®","date":"2018-06-06T13:21:27.000Z","updated":"2021-09-03T05:56:57.933Z","comments":true,"path":"mysqlåˆ é™¤è¡¨ä¸­é‡å¤çš„æ•°æ®/","link":"","permalink":"http://www.daichongweb.com/mysqlåˆ é™¤è¡¨ä¸­é‡å¤çš„æ•°æ®/","excerpt":"sqlåˆ é™¤æ•°æ®åº“é‡å¤çš„æ•°æ® ä»Šå¤©åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªæ³¨å†Œç»‘å®šå¾®ä¿¡UIDçš„é—®é¢˜ã€‚æŒ‰æ­£å¸¸é€»è¾‘æ¥è¯´ï¼Œä¸€ä¸ªæ‰‹æœºå·åªèƒ½ç»‘å®šä¸€ä¸ªUIdï¼Œä½†é—®é¢˜æ€»æ˜¯ä¼šåªæœ‰ä½ æƒ³ä¸åˆ°æ²¡æœ‰ä½ åšä¸åˆ°ï¼Œæœ‰ä¸ªå®¢æˆ·å±…ç„¶ç”¨ä¸€ä¸ªæ‰‹æœºå·ç»‘å®šäº†å‡ ç™¾ä¸ªæ‰‹æœºå·ï¼Œå…·ä½“æ˜¯ä¸ºäº†å¹²ä»€ä¹ˆå°±ä¸è¯´äº†ã€‚æœ‰ä¸€ä¸ªäººèƒ½æƒ³åˆ°è¿™æ ·çš„æ–¹æ³•ï¼Œå°±ä¼šæœ‰ç¬¬äºŒä¸ªäººèƒ½æƒ³åˆ°ï¼Œä¹‹åå°±ä¸ç”¨è¯´äº†è¶Šæ¥è¶Šå¤šã€‚ä»…ä»…å‡ å¤©æ•°æ®åº“é‡Œçš„æ•°æ®å·²ç»å‡ ä¸‡æ¡äº†ï¼Œæ…¢æ…¢çš„æˆ‘æ„è¯†åˆ°äº†è¿™æ ·ä¸‹å»è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»æƒ³åŠæ³•è§£å†³ã€‚åˆšå¼€å§‹æ˜¯æ‰‹åŠ¨åˆ é™¤é‡å¤çš„æ•°æ®ï¼Œä½†æ˜¯å¤ªå¤šäº†ï¼Œæ‰‹åŠ¨åˆ ç®€ç›´æ˜¯æ²¡æ³•å¼„ï¼Œä¸åˆ è¿˜ä¸è¡Œï¼Œç»™å­—æ®µåŠ å”¯ä¸€ç´¢å¼•å¿…é¡»è¦æŠŠé‡å¤çš„æ•°æ®åˆ æ‰.","text":"sqlåˆ é™¤æ•°æ®åº“é‡å¤çš„æ•°æ® ä»Šå¤©åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªæ³¨å†Œç»‘å®šå¾®ä¿¡UIDçš„é—®é¢˜ã€‚æŒ‰æ­£å¸¸é€»è¾‘æ¥è¯´ï¼Œä¸€ä¸ªæ‰‹æœºå·åªèƒ½ç»‘å®šä¸€ä¸ªUIdï¼Œä½†é—®é¢˜æ€»æ˜¯ä¼šåªæœ‰ä½ æƒ³ä¸åˆ°æ²¡æœ‰ä½ åšä¸åˆ°ï¼Œæœ‰ä¸ªå®¢æˆ·å±…ç„¶ç”¨ä¸€ä¸ªæ‰‹æœºå·ç»‘å®šäº†å‡ ç™¾ä¸ªæ‰‹æœºå·ï¼Œå…·ä½“æ˜¯ä¸ºäº†å¹²ä»€ä¹ˆå°±ä¸è¯´äº†ã€‚æœ‰ä¸€ä¸ªäººèƒ½æƒ³åˆ°è¿™æ ·çš„æ–¹æ³•ï¼Œå°±ä¼šæœ‰ç¬¬äºŒä¸ªäººèƒ½æƒ³åˆ°ï¼Œä¹‹åå°±ä¸ç”¨è¯´äº†è¶Šæ¥è¶Šå¤šã€‚ä»…ä»…å‡ å¤©æ•°æ®åº“é‡Œçš„æ•°æ®å·²ç»å‡ ä¸‡æ¡äº†ï¼Œæ…¢æ…¢çš„æˆ‘æ„è¯†åˆ°äº†è¿™æ ·ä¸‹å»è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»æƒ³åŠæ³•è§£å†³ã€‚åˆšå¼€å§‹æ˜¯æ‰‹åŠ¨åˆ é™¤é‡å¤çš„æ•°æ®ï¼Œä½†æ˜¯å¤ªå¤šäº†ï¼Œæ‰‹åŠ¨åˆ ç®€ç›´æ˜¯æ²¡æ³•å¼„ï¼Œä¸åˆ è¿˜ä¸è¡Œï¼Œç»™å­—æ®µåŠ å”¯ä¸€ç´¢å¼•å¿…é¡»è¦æŠŠé‡å¤çš„æ•°æ®åˆ æ‰.[sql]1234567891011121314151617181920212223242526delete from [table_name] where [primary key] in (select [primary key] from (select [primary key]FROM [table_name]WHERE [é‡å¤çš„å­—æ®µå] IN ( SELECT [primary key] FROM [table_name] GROUP BY [é‡å¤çš„å­—æ®µå] HAVING count([é‡å¤çš„å­—æ®µå]) &gt; 1 )AND [primary key] NOT IN ( SELECT min([primary key]) FROM [table_name] GROUP BY [é‡å¤çš„å­—æ®µå] HAVING count([é‡å¤çš„å­—æ®µå]) &gt; 1))a)è¿™æ®µsqlä¸ä»…è§£å†³äº†æˆ‘çš„ç‡ƒçœ‰ä¹‹æ€¥ï¼Œå¹¶ä¸”è¿˜å¸®æˆ‘ä¿ç•™äº†é‡å¤æ•°æ®ä¸­çš„ä¸€æ¡æœ€è€çš„æ•°æ®ï¼ è™½ç„¶sqlå†™çš„å¾ˆå®Œç¾ä½†æ˜¯ä¹Ÿè¦ç»è¿‡å®è·µæ‰èƒ½æ˜¯ä¸æ˜¯æ­£ç¡®çš„ï¼1SELECT * FROM [table_name] group by [é‡å¤çš„å­—æ®µå] HAVING count(*)&gt;1æŸ¥è¯¢æ¡æ•°ä¸º0ï¼Œsqlæ­£ç¡®æ— è¯¯ï¼Œæ¼‚äº®ï¼","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"}]},{"title":"phpå°†æŒ‡å®šæ–‡å­—æ›¿æ¢ä¸ºç›¸åŒæ•°é‡çš„*å·","slug":"phpå°†æŒ‡å®šæ–‡å­—æ›¿æ¢ä¸ºç›¸åŒæ•°é‡çš„-å·","date":"2018-06-04T05:23:50.000Z","updated":"2021-09-03T05:56:57.955Z","comments":true,"path":"phpå°†æŒ‡å®šæ–‡å­—æ›¿æ¢ä¸ºç›¸åŒæ•°é‡çš„-å·/","link":"","permalink":"http://www.daichongweb.com/phpå°†æŒ‡å®šæ–‡å­—æ›¿æ¢ä¸ºç›¸åŒæ•°é‡çš„-å·/","excerpt":"","text":"æ›¿æ¢æ–‡å­—ä¸ºæ˜Ÿå·çš„åŠŸèƒ½ç»å¸¸ä¼šé‡åˆ°ï¼Œæ¯”å¦‚å…³é”®è¯è¿‡æ»¤ï¼ŒèŠå¤©å†…å®¹è¿‡æ»¤ç­‰ï¼Œè¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç ï¼ [å®ç°ä»£ç ]1234567891011121314$text = \"è‹è²çš„ä¸–ç•Œå®‰é˜²ç§‘æŠ€æŒ‰æ—¶ä»˜æ¬¾é“¾æ¥è¨è¾¾å“ˆåƒåœ¾å¡åˆ·å¡è´¹SAPå‘ç”Ÿç ´æˆ¿é—´çˆ±ä¸Šï¼›é è°±ç§¯åˆ†å¡æ™®æ–¯å®‰å¾½äº¤ä»˜ææ€•æ˜¯ç”µè¯è´¹ç ´IDå¡æ‰‹IPå¡\";// å›è°ƒå‡½æ•°function next_year($matches)&#123; $len = mb_strlen($matches[0],'UTF8'); $res = ''; for($i=1;$i&lt;=$len;$i++)&#123; $res.='*'; &#125; return $res;&#125;$arr = array('é“¾æ¥','å¡');$preg_str = implode('|',$arr);echo preg_replace_callback(\"/($preg_str)/\",\"next_year\",$text);","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"php æ•°ç»„åˆ†ç»„ äºŒç»´æ•°ç»„ä¸­ï¼Œå°†æŸä¸ªé”®å€¼ç›¸åŒçš„åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­","slug":"phpæ•°ç»„åˆ†ç»„-äºŒç»´æ•°ç»„ä¸­ï¼Œå°†æŸä¸ªé”®å€¼ç›¸åŒçš„åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­","date":"2018-06-04T05:09:35.000Z","updated":"2021-09-03T05:56:57.960Z","comments":true,"path":"phpæ•°ç»„åˆ†ç»„-äºŒç»´æ•°ç»„ä¸­ï¼Œå°†æŸä¸ªé”®å€¼ç›¸åŒçš„åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­/","link":"","permalink":"http://www.daichongweb.com/phpæ•°ç»„åˆ†ç»„-äºŒç»´æ•°ç»„ä¸­ï¼Œå°†æŸä¸ªé”®å€¼ç›¸åŒçš„åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­/","excerpt":"åŸæ•°æ®12345678910111213141516171819$arr = array( 0 =&gt; array ( 'initial' =&gt; 'A', 'typename' =&gt; 'å¥¥è¿ª' ), 1 =&gt; array ( 'initial' =&gt; 'F', 'typename' =&gt;'F1' ), 2 =&gt; array ( 'initial' =&gt; 'F', 'typename' =&gt; 'F2' ));","text":"åŸæ•°æ®12345678910111213141516171819$arr = array( 0 =&gt; array ( 'initial' =&gt; 'A', 'typename' =&gt; 'å¥¥è¿ª' ), 1 =&gt; array ( 'initial' =&gt; 'F', 'typename' =&gt;'F1' ), 2 =&gt; array ( 'initial' =&gt; 'F', 'typename' =&gt; 'F2' )); [åˆå¹¶ä»£ç ]1234$result = array();foreach($arr as $k=&gt;$v)&#123; $result[$v['initial']][] = $v;&#125; [åˆ†ç»„åçš„æ•°ç»„]1234567891011121314151617181920212223242526272829Array( [A] =&gt; Array ( [0] =&gt; Array ( [initial] =&gt; A [typename] =&gt; å¥¥è¿ª ) ) [F] =&gt; Array ( [0] =&gt; Array ( [initial] =&gt; F [typename] =&gt; F1 ) [1] =&gt; Array ( [initial] =&gt; F [typename] =&gt; F2 ) ))","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"}]},{"title":"linuxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜","slug":"Linuxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜","date":"2018-06-04T05:00:09.000Z","updated":"2021-09-03T05:56:57.876Z","comments":true,"path":"Linuxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/Linuxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜/","excerpt":"","text":"[å‘½ä»¤è¡ŒæŠ¥é”™æç¤º]12345678910111213141516171819202122232425@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.The fingerprint for the ECDSA key sent by the remote host isSHA256:Qv4XPuXFuO1G8s0teCXRANvVnZy1jjIFKkp8yfJgLeA.Please contact your system administrator.Add correct host key in /c/Users/Administrator/.ssh/known_hosts to get rid of this message.Offending ECDSA key in /c/Users/Administrator/.ssh/known_hosts:3ECDSA host key for 58.87.72.33 has changed and you have requested strict checking.Host key verification failed. å¯¹äºä¸€ä¸ªå°ç™½æ¥è¯´ï¼Œè¿™ä¸ªæ˜¯å®Œå…¨çœ‹ä¸æ‡‚çš„ï¼Œä¸‹é¢å°±å‘Šè¯‰å¤§å®¶å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ é¦–å…ˆç”¨sshç¬¬ä¸€æ¬¡è¿æ¥sever,severä¼šç”Ÿæˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼Œç§é’¥å­˜åœ¨è¿æ¥æ–¹çš„æœ¬åœ°ï¼Œç³»ç»Ÿé‡è£…åseverä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªå…¬é’¥ï¼Œç„¶åè¿æ¥æ–¹çš„ç§é’¥å·²ç»å’Œseverçš„å…¬é’¥ä¸åŒ¹é…ï¼Œå¯¼è‡´æŠ¥é”™æ— æ³•ç™»å½•ã€‚ è§£å†³æ–¹æ³•ï¼š ssh-keygen -R xx.xx.xx.xx åé¢è·Ÿipå³å¯åˆ é™¤æŒ‡å®šæœåŠ¡å™¨çš„å…¬é’¥æ–‡ä»¶ï¼Œå†æ¬¡è¿æ¥æ—¶é‡æ–°ç”Ÿæˆï¼Œå¹¶è¦†ç›–æ‰è¿æ¥æ–¹çš„ç§é’¥ã€‚","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://www.daichongweb.com/tags/linux/"}]},{"title":"liunxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜","slug":"liunxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜","date":"2018-06-04T05:00:09.000Z","updated":"2021-09-03T05:56:57.930Z","comments":true,"path":"liunxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜/","link":"","permalink":"http://www.daichongweb.com/liunxé‡è£…ç³»ç»Ÿåsshè¿æ¥è®¤è¯çš„é—®é¢˜/","excerpt":"","text":"[å‘½ä»¤è¡ŒæŠ¥é”™æç¤º]12345678910111213141516171819202122232425@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.The fingerprint for the ECDSA key sent by the remote host isSHA256:Qv4XPuXFuO1G8s0teCXRANvVnZy1jjIFKkp8yfJgLeA.Please contact your system administrator.Add correct host key in /c/Users/Administrator/.ssh/known_hosts to get rid of this message.Offending ECDSA key in /c/Users/Administrator/.ssh/known_hosts:3ECDSA host key for 58.87.72.33 has changed and you have requested strict checking.Host key verification failed. å¯¹äºä¸€ä¸ªå°ç™½æ¥è¯´ï¼Œè¿™ä¸ªæ˜¯å®Œå…¨çœ‹ä¸æ‡‚çš„ï¼Œä¸‹é¢å°±å‘Šè¯‰å¤§å®¶å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ é¦–å…ˆç”¨sshç¬¬ä¸€æ¬¡è¿æ¥sever,severä¼šç”Ÿæˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼Œç§é’¥å­˜åœ¨è¿æ¥æ–¹çš„æœ¬åœ°ï¼Œç³»ç»Ÿé‡è£…åseverä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªå…¬é’¥ï¼Œç„¶åè¿æ¥æ–¹çš„ç§é’¥å·²ç»å’Œseverçš„å…¬é’¥ä¸åŒ¹é…ï¼Œå¯¼è‡´æŠ¥é”™æ— æ³•ç™»å½•ã€‚ è§£å†³æ–¹æ³•ï¼š ssh-keygen -R xx.xx.xx.xx åé¢è·Ÿipå³å¯åˆ é™¤æŒ‡å®šæœåŠ¡å™¨çš„å…¬é’¥æ–‡ä»¶ï¼Œå†æ¬¡è¿æ¥æ—¶é‡æ–°ç”Ÿæˆï¼Œå¹¶è¦†ç›–æ‰è¿æ¥æ–¹çš„ç§é’¥ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://www.daichongweb.com/tags/Linux/"}]},{"title":"jqueryç®€å•å®ç°å›¾ç‰‡æ‡’åŠ è½½","slug":"jqueryç®€å•å®ç°å›¾ç‰‡æ‡’åŠ è½½","date":"2018-06-01T03:04:11.000Z","updated":"2021-09-03T05:56:57.929Z","comments":true,"path":"jqueryç®€å•å®ç°å›¾ç‰‡æ‡’åŠ è½½/","link":"","permalink":"http://www.daichongweb.com/jqueryç®€å•å®ç°å›¾ç‰‡æ‡’åŠ è½½/","excerpt":"æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³ä¼˜åŒ–webç½‘ç«™ã€‚æˆ‘æ˜¯ä¸€ä¸ªåç«¯ç¨‹åºå‘˜ï¼Œä½†å¯¹jså¾ˆæ„Ÿå…´è¶£ï¼Œä¹‹å‰æ€»å¬è¯´å›¾ç‰‡æ‡’åŠ è½½å¯ä»¥ä¼˜åŒ–ç½‘ç«™ï¼Œæœ¬æ¥ä»¥ä¸ºæ˜¯å¾ˆéš¾å¾—æŠ€æœ¯ï¼Œä»Šå¤©äº²æ‰‹è¯•äº†ä¸€ä¸‹æ‰å‘ç°æ˜¯å¦‚æ­¤ç®€å•ã€‚ä¸‹é¢ä¸ºå¤§å®¶å¥‰ä¸Šæˆ‘çš„ä»£ç ï¼","text":"æœ€è¿‘çªå‘å¥‡æƒ³ï¼Œæƒ³ä¼˜åŒ–webç½‘ç«™ã€‚æˆ‘æ˜¯ä¸€ä¸ªåç«¯ç¨‹åºå‘˜ï¼Œä½†å¯¹jså¾ˆæ„Ÿå…´è¶£ï¼Œä¹‹å‰æ€»å¬è¯´å›¾ç‰‡æ‡’åŠ è½½å¯ä»¥ä¼˜åŒ–ç½‘ç«™ï¼Œæœ¬æ¥ä»¥ä¸ºæ˜¯å¾ˆéš¾å¾—æŠ€æœ¯ï¼Œä»Šå¤©äº²æ‰‹è¯•äº†ä¸€ä¸‹æ‰å‘ç°æ˜¯å¦‚æ­¤ç®€å•ã€‚ä¸‹é¢ä¸ºå¤§å®¶å¥‰ä¸Šæˆ‘çš„ä»£ç ï¼1alert('Hello Welcome to DaiChong.Blog!'); [é¦–å…ˆæ˜¯htmléƒ¨åˆ†]123456789101112131415161718&lt;style&gt;*&#123; padding:0; margin:0; list-style:none;&#125;img&#123; height:200px; width:100%;&#125;&lt;/style&gt;&lt;ul&gt; &lt;li&gt;&lt;img src='1.png'&gt;&lt;/li&gt; &lt;li&gt;&lt;img src='1.png'&gt;&lt;/li&gt; &lt;li&gt;&lt;img src='1.png'&gt;&lt;/li&gt; &lt;li&gt;&lt;img src='1.png'&gt;&lt;/li&gt; &lt;li&gt;&lt;img src='1.png'&gt;&lt;/li&gt;&lt;/ul&gt; [juqeryéƒ¨åˆ†]12345678910111213141516171819202122232425262728&lt;script&gt; $(function()&#123; //ä»£æ›¿æ•°æ® var arr = ['./1.jpg','./01.png','./02.png','./03.png','./03(1).png','./å®¢æˆ¿1.png','./å®¢æˆ¿2.png']; var str = \"\"; $.each(arr,function (k,v) &#123; str+='&lt;li&gt;&lt;img data-src=\"'+v+'\"&gt;&lt;/li&gt;'; &#125;) $(\"ul\").html(str); //åˆå§‹åŒ–ä¸€æ¬¡ load_img(); &#125;) $(window).scroll(function()&#123; load_img(); &#125;) function load_img()&#123; //å¯è§†åŒºåŸŸçš„é«˜åº¦ var view_height = $(window).height(); //æ»šåŠ¨æ¡çš„é«˜åº¦ var scroll_top = $(window).scrollTop(); $('ul li img').each(function(k,v)&#123; var top = $(v).offset().top-scroll_top; if(top&lt;view_height)&#123; $(v).attr('src',$(v).attr('data-src')); &#125; &#125;) &#125;&lt;/script&gt;","categories":[],"tags":[{"name":"jquery","slug":"jquery","permalink":"http://www.daichongweb.com/tags/jquery/"}]}],"categories":[{"name":"liunx","slug":"liunx","permalink":"http://www.daichongweb.com/categories/liunx/"},{"name":"hexo","slug":"hexo","permalink":"http://www.daichongweb.com/categories/hexo/"},{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/categories/phpæ‰©å±•ç±»/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/categories/å¼€å‘å·¥å…·/"},{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/categories/mysql/"},{"name":"phpæ¡†æ¶","slug":"phpæ¡†æ¶","permalink":"http://www.daichongweb.com/categories/phpæ¡†æ¶/"}],"tags":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡å°ç¨‹åº/"},{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å¾®ä¿¡æ”¯ä»˜/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"http://www.daichongweb.com/tags/å¼€å‘å·¥å…·/"},{"name":"java","slug":"java","permalink":"http://www.daichongweb.com/tags/java/"},{"name":"node","slug":"node","permalink":"http://www.daichongweb.com/tags/node/"},{"name":"php","slug":"php","permalink":"http://www.daichongweb.com/tags/php/"},{"name":"å°ç¨‹åºæ”¯ä»˜","slug":"å°ç¨‹åºæ”¯ä»˜","permalink":"http://www.daichongweb.com/tags/å°ç¨‹åºæ”¯ä»˜/"},{"name":"phpæ‰©å±•ç±»","slug":"phpæ‰©å±•ç±»","permalink":"http://www.daichongweb.com/tags/phpæ‰©å±•ç±»/"},{"name":"nginx","slug":"nginx","permalink":"http://www.daichongweb.com/tags/nginx/"},{"name":"mysql","slug":"mysql","permalink":"http://www.daichongweb.com/tags/mysql/"},{"name":"vue","slug":"vue","permalink":"http://www.daichongweb.com/tags/vue/"},{"name":"laravel","slug":"laravel","permalink":"http://www.daichongweb.com/tags/laravel/"},{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"http://www.daichongweb.com/tags/æ¶æ„/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"http://www.daichongweb.com/tags/æµ‹è¯•/"},{"name":"redis","slug":"redis","permalink":"http://www.daichongweb.com/tags/redis/"},{"name":"linux","slug":"linux","permalink":"http://www.daichongweb.com/tags/linux/"},{"name":"git","slug":"git","permalink":"http://www.daichongweb.com/tags/git/"},{"name":"jquery","slug":"jquery","permalink":"http://www.daichongweb.com/tags/jquery/"},{"name":"walle","slug":"walle","permalink":"http://www.daichongweb.com/tags/walle/"},{"name":"hexo","slug":"hexo","permalink":"http://www.daichongweb.com/tags/hexo/"},{"name":"composer","slug":"composer","permalink":"http://www.daichongweb.com/tags/composer/"},{"name":"sublime","slug":"sublime","permalink":"http://www.daichongweb.com/tags/sublime/"},{"name":"phpExcel","slug":"phpExcel","permalink":"http://www.daichongweb.com/tags/phpExcel/"},{"name":"tp5","slug":"tp5","permalink":"http://www.daichongweb.com/tags/tp5/"},{"name":"js","slug":"js","permalink":"http://www.daichongweb.com/tags/js/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://www.daichongweb.com/tags/æµè§ˆå™¨/"},{"name":"tool","slug":"tool","permalink":"http://www.daichongweb.com/tags/tool/"},{"name":"Linux","slug":"Linux","permalink":"http://www.daichongweb.com/tags/Linux/"}]}